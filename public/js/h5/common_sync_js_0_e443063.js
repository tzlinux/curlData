define("common:widget/initapp/initapp.js",function(i,n,o){"use strict";var p=i("common:widget/appresize/appresize.js"),t=(i("common:widget/popup/popup.js"),!1),e=function(){window.scrollTo(0,1)},c=function(){t||listener.on("common.page","switchend",e)},s=function(){p.init(),c(),t=!0};o.exports.init=s});
;define("common:widget/util/device-util.js",function(t,i,n){"use strict";n.exports={isAndroid:function(){return/android/i.test(navigator.userAgent)},isIOS:function(){return/iphone|ipad|ipod/i.test(navigator.userAgent)},isIPhone:function(){return/iphone/i.test(navigator.userAgent)},isIPad:function(){return/ipad/i.test(navigator.userAgent)},getIosVersion:function(){return/OS 7_\d[_\d]* like Mac OS X/i.test(navigator.userAgent)}}});
;define("common:widget/util/downnautil.js",function(e,n,o){"use strict";!function(e,n){function a(e,n){return s.cleanObj.toString.call(e).slice(8,-1)===n}function t(e,n,o){o?n():m(e,n)}function i(e){for(var n=[].slice.call(arguments,1),o=0;o<n.length;o++)for(var a in n[o])e[a]=n[o][a];return e}var r=+new Date,c=(r+"").slice(-3),p=e.Box,s={isBox:/ baiduboxapp\//i.test(navigator.userAgent),getId:function(){return c++},emptyArr:[],toArray:function(e){return s.emptyArr.slice.call(e)},cleanObj:{},emptyFn:function(){},hasMoplusApi:p&&p.moplus,$:function(e,o){return o=o&&1===o.nodeType?o:n,s.toArray(o.querySelectorAll(e))}};"Function,String,Array,Number,RegExp".replace(/[^, ]+/g,function(e){s["is"+e]=function(n){return a(n,e)}}),s.isObject=function(e){return"object"==typeof e},s.utils={json2query:function(e){if(s.isString(e))return e;var n=[];for(var o in e)n.push(o+"="+e[o]);return n.join("&")}};var u=s.utils.json2query;s.io={loadJs:function(o,a,t){function i(){return n.head||n.getElementsByTagName("head")[0]||n.documentElement}var r,c,p,d=n.createElement("script");s.isString(o)?(r=o,s.isFunction(a)&&(t=a,a=null)):(r=o.url,a=o.data,t=o.success,c=o.error||s.emptyFn,p=o.timeout),s.isObject(a)&&(a=u(a)),a&&(r+=(-1===r.indexOf("?")?"?":"&")+a),r=r.replace(/[&?]{1,2}/,"?");var m;/=\?/.test(r)&&(m="_downapp_jsonp"+s.getId(),r=r.replace(/=\?/,"="+m));var l=i();p=p||2e4,d.type="text/javascript",d.src=r;var f,h=!0,g=function(){m&&delete e[m],f&&clearTimeout(f),d.onload=d.onreadystatechange=d.onerror=null,d=null},b=function(){!d||d.readyState&&!/loaded|complete/.test(d.readyState)||(g(),h&&s.isFunction(t)&&t.apply(null,s.toArray(arguments)),h=!1)},w=function(e){g(),h&&c(e),h=!1};m&&(e[m]=b),f=setTimeout(function(){g(),h&&c("timeout"),h=!1},p),d.onload=d.onreadystatechange=d.onerror=b,d.onerror=w,l.appendChild(d)},loadMoplusApi:function(e,n){s.hasMoplusApi?n():this.loadJs(e,n)}},e.downApp=s;var d=e.downApp,m=s.io.loadJs,l={useAppsearch:1,useBdbox:1,appSearchPackageName:"com.baidu.appsearch",appSearchMinVersion:"6.0",packagename:"com.baidu.BaiduMap",filename:"百度地图",appSearchFrom:"wise_ala_map"};s.init=function(){m("//m.baidu.com/static/searchbox/openjs/aio.js",s.emptyFn)},s.down={downWeb:function(n){e.location.href=n.url},downBox:function(n){var o=this;t("//m.baidu.com/static/searchbox/openjs/mp.js",function(){var a=e.Box,t=a.moplus();return a.version_compare(a.version,"6.4")<0?void o.downNoBox(n):void t.api("getpackageinfo",{packagename:n.appSearchPackageName,mcmdf:"inapp_test"},function(e){if(0===e.error&&e.package_infos.length>0){var a=!1;e.package_infos.forEach(function(e){n.appSearchPackageName===e.package_name&&e.version_name>=n.appSearchMinVersion&&(a=!0)}),a?o.downBoxAfterChecked(n):o.downWeb(n)}else o.downBoxAfterChecked(n)})},s.hasMoplusApi)},downBoxAfterChecked:function(n){var o=this;n.bdboxLiteIntent?t("//m.baidu.com/static/searchbox/openjs/aio.js",function(){var o=e.Box,a=n.bdboxLiteIntent,t="#Intent;action=com.baidu.searchbox.plugin.action.INVOKE;S.package_name="+n.appSearchPackageName+";S.website_url="+encodeURIComponent(n.url)+";S.intent="+encodeURIComponent(a)+";S.invoke_order="+encodeURIComponent("[1]")+";S.loading=1;S.use_new_window=0;end";o.android.invokeApp("Bdbox_android_send_intent","send",[t])},p&&p.android&&p.android.invokeApp):o.downWeb()},downAppsearch:function(n){var o=this;t("//static1.searchbox.baidu.com/static/searchbox/openjs/mp.js",function(){var a=e.Box,t="#Intent;action=com.baidu.appsearch.extinvoker.LAUNCH;S.id="+n.appSearchFrom+";S.packagename="+n.packagename+";S.backop=0;S.filename="+encodeURIComponent(n.filename)+";B.downloadapp=true;S.func=14;B.confirm=false;S.url="+encodeURIComponent(n.url)+";end",i={intent:encodeURIComponent(t),mcmdf:"inapp_test"},r=a.moplus();r.api("sendintent",i,function(e){0===e.error||o.downWeb(n)})},s.hasMoplusApi)},downNoBox:function(n){var o=this;t("//m.baidu.com/static/searchbox/openjs/mp.js",function(){var a=e.Box,t=a.moplus();t.api("getpackageinfo",{packagename:n.appSearchPackageName,mcmdf:"inapp_test"},function(e){if(0===e.error&&e.package_infos.length>0){var a=!1;e.package_infos.forEach(function(e){n.appSearchPackageName===e.package_name&&e.version_name>=n.appSearchMinVersion&&(a=!0)}),a?o.downAppsearch(n):o.downWeb(n)}else o.downWeb(n)})},s.hasMoplusApi)},downAuto:function(e){var n=d.down;e=i({},l,e),s.isBox&&e.useBdbox?n.downBox(e):n.downNoBox(e)}},o.exports={downNa:d.down.downAuto}}(window,document)});
;define("common:widget/util/ui-util.js",function(require,exports,module){"use strict";var pbStat=require("core:widget/stat/pbstat.js"),cookie=require("core:widget/cookie/cookie.js"),downNaUtil=require("common:widget/util/downnautil.js");module.exports={ifSupportSubway:function(n){var a,e;if(window.subwaySupport){a=window.subwaySupport;for(var o,t=0,i=a.length,d={};i>t;t++)o=a[t].split(","),d[o[2]]=a[t],d[o[0]]=a[t];e=d}else e={131:"beijing,北京,131",289:"shanghai,上海,289",257:"guangzhou,广州,257",340:"shenzhen,深圳,340",2912:"hongkong,香港,2912",75:"chengdu,成都,75",53:"changchun,长春,53",132:"chongqing,重庆,132",167:"dalian,大连,167",138:"foshan,佛山,138",179:"hangzhou,杭州,179",104:"kunming,昆明,104",315:"nanjing,南京,315",58:"shenyang,沈阳,58",224:"suzhou,苏州,224",332:"tianjin,天津,332",218:"wuhan,武汉,218",233:"xian,西安,233",48:"haerbin,哈尔滨,48",268:"zhengzhou,郑州,268",158:"changsha,长沙,158",180:"ningbo,宁波,180",317:"wuxi,无锡,317",9002:"taibei,台北,9002",9019:"gaoxiong,高雄,9019",236:"qingdao,青岛,236",163:"nanchang,南昌,163",300:"fuzhou,福州,300",119:"dongguan,东莞,119",261:"nanning,南宁,261",beijing:"beijing,北京,131",shanghai:"shanghai,上海,289",guangzhou:"guangzhou,广州,257",shenzhen:"shenzhen,深圳,340",hongkong:"hongkong,香港,2912",chengdu:"chengdu,成都,75",changchun:"changchun,长春,53",chongqing:"chongqing,重庆,132",dalian:"dalian,大连,167",foshan:"foshan,佛山,138",hangzhou:"hangzhou,杭州,179",kunming:"kunming,昆明,104",nanjing:"nanjing,南京,315",shenyang:"shenyang,沈阳,58",suzhou:"suzhou,苏州,224",tianjin:"tianjin,天津,332",wuhan:"wuhan,武汉,218",xian:"xian,西安,233",haerbin:"haerbin,哈尔滨,48",zhengzhou:"zhengzhou,郑州,268",changsha:"changsha,长沙,158",ningbo:"ningbo,宁波,180",wuxi:"wuxi,无锡,317",taibei:"taibei,台北,9002",gaoxiong:"gaoxiong,高雄,9019",qingdao:"qingdao,青岛,236",nanchang:"nanchang,南昌,163",fuzhou:"fuzhou,福州,300",dongguan:"dongguan,东莞,119",nanning:"nanning,南宁,261"};var c=navigator.userAgent,s=/android((\s)*|\/)(1\.\d|2\.[12])/i,r=/FlyFlow/i,l=!(s.test(c)||r.test(c));return l?e[n]:!1},showLoading:function(n){var a=this;a.$pageLoading=this.LoadingBox,a.$pageLoading.show(n);var e=n.css("position");"static"===e&&n.css("position","relative")},hideLoading:function(n,a){var e=function(){n?n.children(".page-loading").length>0&&n.children(".page-loading").remove():$(".page-loading").remove()},o=parseInt(a,10);o&&o>-1?setTimeout(function(){e()},o):e()},bindHrefStat:function(n,a){var e=function(e){e.stopPropagation(),e.preventDefault(),a&&a(),setTimeout(function(){window.navigator.standalone?window.open(n.attr("data")):n.attr("data")&&(window.location.href=n.attr("data"))},200)};n.bind("click",e)},TelBox:{bindEvent:function(){$("#telBox").on("click .ok-telbox",function(){$("#telBox").off(),$("#telBox").remove()}),$("#telBox").on("click .cancel-telbox",function(){$("#telBox").off(),$("#telBox").remove()})},showTb:function(n){if(n){$("#telBox")[0]&&$("#telBox").remove();var a=[];a.push('<div id="telBox" class="telbox">'),a.push('<div class="t"></div>'),a.push('<div  class="c">'),a.push('<div class="t1">拨打电话</div><div>'),a.push('<button class="bt qx cancel-telbox" >取消</button>'),a.push('<a href="wtai://wp/mc;'+$.trim(n)+'"><button class="bt qd ok-telbox" >确定</button></a>'),a.push("</div></div></div>"),$("body").append(a.join("")),this.bindEvent()}}},DownBox:{bindEvent:function(n,a){var e=$("#downBox .download"),o=$("#downBox .cancel");e.on("click",function(){$("#downBox").remove(),$("#greybackground").remove()}),o.on("click",function(){pbStat.addStat("canceldownload"+n),a&&a.callback&&a.callback(),$("#downBox").remove(),$("#greybackground").remove(),$("#indexCloseCover").click()}),appPage.onpageunload(function(){$("#downBox").remove(),$("#greybackground").remove()})},showTb:function(source,obj){source=source||"",obj=obj||{};var tpl="";$("#downBox")[0]&&$("#downBox").remove(),$("#greybackground")[0]&&$("#greybackground").remove(),tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div id="greybackground"><div id="downBox" class="downbox styleguide"><div class="row -align-top"><div class="-col-auto icon"></div><div class="tip-cnt"><h2>',"undefined"==typeof title?"":baidu.template._encodeHTML(title),'</h2><div class="cnt">');for(var i=0;i<contents.length;i++)_template_fun_array.push("        <p>","undefined"==typeof contents[i]?"":baidu.template._encodeHTML(contents[i]),"</p>");_template_fun_array.push('</div></div></div><div class="btns"><a data-da-src="',"undefined"==typeof dowloadSourceStat?"":baidu.template._encodeHTML(dowloadSourceStat),'" class="download" data-da-src="downloadappcover">',"undefined"==typeof downloadBtnText?"":baidu.template._encodeHTML(downloadBtnText),'</a><a href="javascript:;" class="cancel" >',"undefined"==typeof downloadCancelBtnText?"":baidu.template._encodeHTML(downloadCancelBtnText),"</a></div></div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];var textTip=this._getTip(source),title=textTip.title,contents=textTip.contents,dowloadSourceStat="downloadapp"+source,downloadBtnText=textTip.downloadBtnText,downloadCancelBtnText=textTip.downloadCancelBtnText,html=tpl({title:title,contents:contents,dowloadSourceStat:dowloadSourceStat});$("body").append(html);var qudao=obj.qudao||"";$("#greybackground .download").on("click",$.proxy(this.downNa,{source:source,scope:this,qudao:qudao})),pbStat.addStat("downloadappboxdisplay"+source,"show"),this.bindEvent(source,obj)},downNa:function(){var n=this.source||"",a=this.scope,e=this.qudao||a._getChannel(n),o="";if(/iphone/i.test(navigator.userAgent))o="https://itunes.apple.com/cn/app/id452186370?ls=1&mt=8",window.location.href=o;else{o="http://map.baidu.com/maps/download/index.php?app=map&qudao="+e;var t=navigator.userAgent,i=t.match(/baiduboxapp\/(\d+\.?)+/);if(i){var d=i[0].replace("baiduboxapp/","");if(d>="6.4.0")return void downNaUtil.downNa({url:o,bdboxLiteIntent:"intent:#Intent;component=com.baidu.appsearch/.AppSearchInvokerActivity;S.id=wise_ala_map;S.packagename=com.baidu.BaiduMap;S.backop=0;S.filename=%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE;B.downloadapp=true;S.func=14;B.confirm=false;S.url="+encodeURIComponent(o)+";end"})}window.location.href=o}},_getChannel:function(n){n=n||"";var a="";switch(n){case"cover":a="1012139a";break;case"coverfromshare":a="1012139l";break;case"coveraladdin":a="1012139j";break;case"coverwiseicon":a="1012139n";break;case"bottombannerstatic":a="1012139b";break;case"bottombannerfloat":a="1012139k";break;case"drivenavios":case"drivenavandroid":a="1012139c";break;case"walknavios":case"walknavandroid":a="1012139d";break;case"bicyclenavios":case"bicyclenavandroid":a="1012139o";break;case"busnavios":case"busnavandroid":a="1012139e";break;case"mapbanner":a="1012139g";break;case"indexrecom":a="1012139h";break;default:a="1012139f"}var e=cookie.get("third_party")||"";"thirdco_mk"===e&&(a="1012878f");var o=["shenmatopbanner","bottombannerfloat","drivenavios","drivenavandroid","busnavios","busnavandroid","walknavios","walknavandroid","bicyclenavios","bicyclenavandroid"];return window._EXT_INFO&&"shenma"===window._EXT_INFO.thirdparty&&window._EXT_INFO.qudao&&($.inArray(n,o)>=0||""===n)&&(a=window._EXT_INFO.qudao),a},_getTip:function(n){n=n||"";var a={title:"",contents:[],downloadBtnText:"",downloadCancelBtnText:""};switch(n){case"busnavios":case"busnavandroid":a.title="即将为您下载百度地图",a.contents.push("使用到站提醒，不再担心坐过站"),a.downloadBtnText="立即下载",a.downloadCancelBtnText="放弃使用到站提醒";break;case"drivenavios":case"drivenavandroid":a.title="即将为您下载百度地图",a.contents.push("轻松导航，准确快捷"),a.downloadBtnText="立即下载",a.downloadCancelBtnText="放弃使用驾车导航";break;case"walknavios":case"walknavandroid":a.title="即将为您下载百度地图",a.contents.push("步行导航，从此告别路痴"),a.downloadBtnText="立即下载",a.downloadCancelBtnText="放弃使用步行导航";break;default:a.title="即将为您下载百度地图",a.contents.push("用百度地图APP省90%流量"),a.contents.push("下载离线地图，没网也能搜索"),a.downloadBtnText="立即下载百度地图",a.downloadCancelBtnText="取消"}return a}},LoadingBox:{create:function(n,a){var e=document.createElement(n);a=a||{};for(var o in a)if("style"!==o){if(a[o])if(e.setAttribute)e.setAttribute(o,a[o]);else try{e[o]=a[o]}catch(e){}}else e.style.cssText=a[o];return e},show:function(n){if(n.children(".page-loading").length>0)return n.children(".page-loading");var a=this.create("div",{"class":"mappic-loading page-loading slide in",id:"loadingbox"}),e='<div>                           <span class="dot-1"></span>                           <span class="dot-2"></span>                           <span class="dot-3"></span>                           <span class="dot-4"></span>                           <span class="dot-5"></span>                           <span class="dot-6"></span>                           <span class="dot-7"></span>                           <span class="dot-8"></span>                      </div>';return $(a).html(e),n&&n.append($(a)),$(a).show(),$(a)}}}});
;define("common:widget/util/native-util.js",function(e,i,n){"use strict";e.loadCss({url:"//webmap1.bdimg.com/mobile/simple/static/common/widget/util/callnautil.inline_15c1bd3.css"}),function(){var i=e("common:widget/util/ui-util.js"),t=e("common:widget/util/device-util.js"),o=e("core:widget/url/url.js"),a=e("core:widget/stat/pbstat.js"),r={callDelay:1500,hideTipDelay:5e3,specailBrowser:[{broswer:"QQ浏览器",isSpecail:function(e){if(/Android.*MQQBrowser/i.test(e)){var i=/MQQBrowser\/(\d+)\.(\d+)/.exec(e);if(i&&(i[1]=parseInt(i[1],10),i[2]=parseInt(i[2],10),i=i[1]+i[2]/10,6.4>i))return!0}}},{broswer:"UC浏览器",reg:/iPhone.*UCBrowser/i}],delayCallHandle:null,delayHideTipHandle:null},d=function(){document.addEventListener("visibilitychange",l),document.addEventListener("webkitvisibilitychange",l),document.addEventListener("blur",l),document.addEventListener("msvisibilitychange",l),$(window).bind("blur",l)},l=function(){r.delayCallHandle&&clearTimeout(r.delayCallHandle)},s=function(){d(),0===$("iframe#call-na").size()&&$(document.body).append('<iframe src="" id="call-na" width="0" height="0" style="border: 0;display: none;"/>'),0===$("#browserBlockTip").size()&&($(document.body).append('<div id="browserBlockTip" class="hidden">由于UC浏览器屏蔽此功能，请尝试其它浏览器</div>'),$("#browserBlockTip").on("tap",function(){$(this).css("top",-50)}))},c=function(){var e=navigator.userAgent;if(/(MicroMessenger)|(Weibo)/i.test(e)){var i="/mobile/simple/static/common/pages/middle.html?",n="http://"+window.location.host+"/"+o._getCurrentUrl();return/Weibo/i.test(e)?n+="&da_from=weibo&openna=1":/MicroMessenger/i.test(e)&&(n+="&da_from=weixin&openna=1"),a.addStat(window.COM_PB_STAT.CALL_NA_GOTO_WEIXIN),setTimeout(function(){window.location.href=i+n},400),!1}for(var t=!1,d="",l=window.navigator.userAgent,s=0,c=r.specailBrowser.length;c>s;s++){var u=r.specailBrowser[s];if(u.isSpecail){if(u.isSpecail(l)===!0){t=!0,d=u.broswer;break}}else if(u.reg&&u.reg.test(l)){t=!0,d=u.broswer;break}}return t?(a.addStat(window.COM_PB_STAT.CALL_NA_SPECIAL_BROSWER_TIP),$("#browserBlockTip").text("由于"+d+"屏蔽此功能，请尝试其它浏览器"),$("#browserBlockTip").removeClass("hidden").css("top",0),r.delayHideTipHandle&&clearTimeout(r.delayHideTipHandle),r.delayHideTipHandle=setTimeout(function(){$("#browserBlockTip").css("top",-50)},r.hideTipDelay),!1):void 0},u=function(e){var n=navigator.userAgent;if(/baiduboxapp/i.test(n))return void(/HUAWEIM100-TL00/i.test(n)&&window.location.reload());var o=t.isIPhone()?"ios":"android";if("ios"===o)return void(window.location.href="https://itunes.apple.com/cn/app/id452186370?ls=1&mt=8");var a=e?e.source||"":"";if("1"===window._WISE_INFO.netype){var r="http://map.baidu.com/maps/download/index.php?app=map&qudao="+i.DownBox._getChannel(a);window.location.href=r}else i.DownBox.showTb(a)},p=!1,w={bus:1,drive:1,walkcycle:1,indexoffline:1,mapoffline:1,bottombanner:1,zuche:1,universallink:1},f=function(e){return e&&w[e.callNaMore]?!0:p?!1:!0},m=window.navigator.userAgent,v=!1;-1!==m.indexOf("Windows Phone")&&(v=!0);var b=function(e,i,n,t){if(f(i)&&!v){var o={};if(o.netype="1"===window._WISE_INFO.netype?"WIFI":"NOTWIFI","function"!=typeof t||t(o)!==!1){if(c()===!1)return void("function"==typeof n&&n(o));var a=i&&i.forbidDownLoad,d=/Chrome\/([\d.]+)/i.test(navigator.userAgent)||/CriOS\/([\d.]+)/i.test(navigator.userAgent);if(/iphone os ([0-9]+)_/i.test(navigator.userAgent)&&parseInt(RegExp.$1,10)>=9&&!d){window.location.href=e;var l=(new Date).getTime();setTimeout(function(){var e="undefined"!=typeof document.webkitHidden?document.webkitHidden:document.hidden;(new Date).getTime()-l<1550&&!e&&setTimeout(function(){a||u(i)},100)},1500)}else{/iphone os ([0-9]+)_/i.test(navigator.userAgent)&&parseInt(RegExp.$1,10)>=9&&d&&(a=!0),$("iframe#call-na").size()&&$("iframe#call-na").remove();var s='<iframe src="'+e+'" id="call-na" width="0" height="0" style="border: 0;display: none;"/>';$(document.body).append(s)}r.delayCallHandle&&clearTimeout(r.delayCallHandle);var w=(new Date).getTime();r.delayCallHandle=setTimeout(function(){if((new Date).getTime()-w<2e3){if("function"==typeof n&&n(o)===!1)return;a||u(i)}},r.callDelay),p=!0}}},g=function(e,i){var n=function(n){n.stopPropagation(),n.preventDefault(),i&&i(),setTimeout(function(){window.navigator.standalone?window.open(e.attr("data")):e.attr("data")&&(window.location.href=e.attr("data"))},200)};e.bind("click",n)},h=function(){var e=navigator.userAgent;return/MQQBrowser/gi.test(e)?!1:/iphone os ([0-9]+)_/i.test(e)&&parseInt(RegExp.$1,10)>=9?!0:!1},T=function(e,i,n){if(f(n)){if(!n||n.isExternalCbkUrl!==!0){var t=location.host;if(-1===e.indexOf(t)){var o="/";e&&"/"===e.charAt(0)&&(o=""),e=location.protocol+"//"+t+o+e}-1===e.indexOf("universalLinkCbkTag")&&(e+="&universalLinkCbkTag=1")}var a="https://clientmap.baidu.com/map/maplink.php?cburl="+encodeURIComponent(e)+"&openapi="+encodeURIComponent(i);window.location.href=a,p=!0}};n.exports={init:s,callNA:b,download:u,bindHrefStat:g,canUseUniversalLink:h,callNAbyUniversalLink:T}}()});
;define("common:widget/util/aladdininternation-util.js",function(e,t,n){"use strict";n.exports={cssStyle:'.index-widget-tabgroup .tab li:nth-child(3) {display: none}             [href*="/mobile/webapp/place/linesearch/foo=bar/from=place&end=word"],             [data-url*="/mobile/webapp/place/linesearch/foo=bar/from=place&end=word"],             .hotel-widget-detailpoicard .buttons .callnatohere {                 display: none !important;             }             #list-container .features > li:nth-child(2) {                 border-left: none !important;             }',modifyUi:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=this.cssStyle,document.getElementsByTagName("HEAD").item(0).appendChild(e)}}});
;define("common:static/js/mapconst.js",function(o,_,e){var i=o("common:widget/util/device-util.js");e.exports={GEO_TYPE_AREA:0,GEO_TYPE_LINE:1,GEO_TYPE_POINT:2,POI_TYPE_NORMAL:0,POI_TYPE_BUSSTOP:1,POI_TYPE_BUSLINE:2,POI_TYPE_SUBSTOP:3,POI_TYPE_SUBLINE:4,ROUTE_TYPE_DEFAULT:0,ROUTE_TYPE_BUS:1,ROUTE_TYPE_WALK:2,ROUTE_TYPE_DRIVE:3,ROUTE_TYPE_UNSURE:6,TRANS_TYPE_BUS:0,TRANS_TYPE_SUB:1,DEST_START:0,DEST_END:1,DEST_MIDDLE:2,DEST_SEC:3,INPUT_SUG:"输入一个位置，如：西单",MY_GEO:"我的位置",ViewMargins:i.isAndroid()?[60,50,50,50]:[60,50,50,0],ROUTE_MARGINS:i.isAndroid()?[85,50,50,50]:[85,50,50,20],GRViewMargins:[60,50,60,50],SvpOpts:{enableAnimation:!1,margins:this.ViewMargins},PAGE_ID:{traffic:3},SEARCH_FOR_LOC_TIMEOUT:8e3,GLCON_TIMEOUT:3e4,BUSINESS_SPLIT:"     ",APP_ROOT:"mobile/webapp/",CITY_BY_BOUNDS_URI:"//map.baidu.com/",TRAFIIC_URI:"//itsmap1.baidu.com/showevents.php",MARKERS_PATH:"//webmap1.bdimg.com/mobile/simple/static/common/images/markers_a7b71ee.png",DEST_MKR_PATH:"//webmap1.bdimg.com/mobile/simple/static/common/images/dest_mkr_a126707.png",NAVI_MKR_PATH:"//webmap1.bdimg.com/mobile/simple/static/common/images/navigation_d11feb4.png",DRV_DIRECTION_PATH:"//webmap1.bdimg.com/mobile/simple/static/common/images/drv_dest_a021ac0.png",DRV_KEY_POI_PATH:"//webmap1.bdimg.com/mobile/simple/static/common/images/drv_pin_c99bbd5.png",BUS_DIRECTION_PATH:"//webmap1.bdimg.com/mobile/simple/static/common/images/bus_direction_dc5899a.png",ROUTE_DICT:[{stroke:6,color:"#3a6bdb",opacity:.65},{stroke:5,color:"#3a6bdb",opacity:.6},{stroke:4,color:"#30a208",opacity:.65},{stroke:5,color:"#046beb",opacity:.6},{stroke:6,color:"#3a6bdb",opacity:.5},{stroke:4,color:"#30a208",opacity:.5,strokeStyle:"dashed"},{stroke:4,color:"#575757",opacity:.65,strokeStyle:"dashed"}],TRAFFIC_ROUTE_DICT:{congestion:{stroke:6,color:"#b21500"},littleCongestion:{stroke:6,color:"#e59000"},flow:{stroke:6,color:"#08a600"},noData:{stroke:6,color:"#7bace4"},notActive:{stroke:4,color:"#7bace4"},stepCover:{stroke:6,color:"#ff0103",opacity:.6}},IW_POI:0,IW_GRT:1,IW_BSL:2,IW_CNT:3,IW_BUS:4,IW_NAV:5,IW_WLK:6,IW_SHR:7,IW_TFC:10,IW_VCT:11,IW_ADDR:12}});
;define("common:widget/geolocation/initgeo.js",function(o,i,t){"use strict";t.exports={init:function(o){o&&o.isStartGeo===!1||this._initGeoLocation()},_initGeoLocation:function(){o("common:widget/geolocation/geolocation.js").init()}}});
;define("common:widget/geolocation/geolocation.js",function(t,o,e){"use strict";var i=t("common:widget/geolocation/bdboxgeolocation.js"),a=t("common:widget/geolocation/html5geolocation.js"),s=t("common:widget/geolocation/sharegeolocation.js"),n=t("common:widget/geolocation/preciseipgeolocation.js"),c=t("common:widget/geolocation/urlgeolocation.js"),r=t("common:widget/geolocation/myposition.js"),m=t("common:widget/stat/metrics-stat.js"),g=t("common:widget/util/device-util.js"),_=t("common:static/js/localstorage.js"),d=t("common:widget/stat/pbstat.js");e.exports={_IS_LAST_GEO_FAIL:!1,_GEO_METHOD_INDEX:0,_GEO_ARRAY:[],init:function(){this.bindEvent(),this.startGeo({isInitGeo:!0})},bindEvent:function(){var t=this;t._hasBindEvent!==!0&&(t._hasBindEvent=!0,listener.on("common.bdboxGeolocation","start",function(t,o){i.init(o)}),listener.on("common.html5Geolocation","start",function(t,o){a.init(o)}),listener.on("common.shareGeo","start",function(t,o){setTimeout(function(){s.init(o)},0)}),listener.on("common.preciseipGeo","start",function(t,o){setTimeout(function(){n.init(o)},0)}),listener.on("common.urlgeolocation","start",function(t,o){setTimeout(function(){c.init(o)},0)}),listener.on("common.geolocation","success",function(o,e){t._geoSuccess(e)}),listener.on("common.geolocation","mylocsuc",function(o,e){t._addStatGeoSuc(e)}),listener.on("common.geolocation","fail",function(o,e){t._geoFail(e)}),listener.on("common.geomethod","fail",function(o,e){t._geoMethodFail(e)}),listener.on("common.geomethod","success",function(o,e){t._geoMethodSuccess(e)}))},startGeo:function(t){var o=t||{};this._IS_LAST_GEO_FAIL=!1,this._time=Date.now(),this._isInitGeo=o.isInitGeo||!1,this.sucCallback=o.success||function(){},m.start("geo",{expire:50}),m.addStat("geo","start_geo_loc"),o.isInitGeo===!0?this._checkStorageGeoStatus()&&this._checkStorageMyLocStatus()||this._startGeo({isInitGeo:!0}):this._startGeo()},_startGeo:function(){this._initGeoData(),this._GEO_METHOD_INDEX=0,this._useNextMethod()},_checkStorageGeoStatus:function(){if(window._INIT_LOC_SUC===!0){var o=t("core:widget/geolocation/location.js");return setTimeout(function(){listener.trigger("common.geolocation","success",o._location)},0),!0}return!1},_checkStorageMyLocStatus:function(){if(window._INIT_MYLOC_SUC===!0){var o=t("core:widget/geolocation/location.js");return setTimeout(function(){listener.trigger("common.geolocation","mylocsuc",o._mylocation)},0),!0}return!1},_formatToCookie:function(t){var o=t.addr||{},e=t.point||{},i=(new Date).getTime()+"",a=[];return o.accuracy=o.accuracy||1e3,o.cityCode=o.cityCode||1,e.x&&e.y&&o.cityCode?(a.push(parseInt(e.x)),a.push(parseInt(e.y)),a.push(o.accuracy),a.push(o.cityCode),a.push(i),a):void 0},_saveAddressInStorage:function(t){var o=t.addr||{},e=t.point||{},i={address:o.address,city:o.city,district:o.district,street:o.street,x:parseInt(e.x),y:parseInt(e.y)};_.addData("webapp-location-cookie",i)},_geoSuccess:function(t){var o,e=this,i=t.type,a=t.isExactPoi,s=t.isSaveLocInCookie;if(a&&"share"!==i&&"storage"!==i){if(s===!1)return;o=this._formatToCookie(t),this._saveAddressInStorage(t),r.save(o)}a===!0&&(e._IS_LAST_GEO_FAIL=!1),e.sucCallback&&e.sucCallback(t),e.sucCallback=null,/baiduboxapp/i.test(window.navigator.userAgent)&&d.addStat(COM_PB_STAT.LOCATION_SUCCESS)},_geoFail:function(t){var o=this;o._IS_LAST_GEO_FAIL=!0,o._addStatGeoFail(t),o.sucCallback&&(o.sucCallback=null),/baiduboxapp/i.test(window.navigator.userAgent)&&d.addStat(COM_PB_STAT.LOCATION_FAIL)},_getStatTime:function(){var t=Date.now();return t=Math.ceil((t-this._time)/1e3)},_addStatGeoSuc:function(t){var o,e=this;switch(o=e._getStatTime(),t.isExactPoi&&m.addStat("geo","geo_suc_all"),t.type){case"share":var i=t.minutes&&parseInt(t.minutes);5===i&&m.addStat("geo","share_geo_five_success",{time:o}),30===i&&m.addStat("geo","share_geo_thirty_success",{time:o});break;case"html5":m.addStat("geo","wlan_geo_success",{time:o});break;case"preciseip":m.addStat("geo","preciseip_geo_success",{time:o});break;case"url":m.addStat("geo","url_geo_success",{time:o});break;case"storage":t.isExactPoi&&m.addStat("geo","storage_geo_success",{time:o});break;case"bdbox":m.addStat("geo","bdbox_geo_success",{time:o})}m.addStat("geo","geo_suc_end"),m.submit("geo")},_addStatGeoFail:function(t){m.addStat("geo","wlan_geo_error",{error:t.code,messgae:t.message}),m.submit("geo")},_geoMethodSuccess:function(o){var e=t("core:widget/geolocation/location.js");e.setAddress(o,this._isInitGeo),this._geoindex=0},_geoMethodFail:function(t){var o=this;o._useNextMethod(t)},_initGeoData:function(){var t={geostr:"common.shareGeo",type:"start",param:{par:5,id:"5min"}},o={geostr:"common.shareGeo",type:"start",param:{par:30,id:"30min"}},e={geostr:"common.preciseipGeo",type:"start",param:{}},i={geostr:"common.html5Geolocation",type:"start",param:{id:"first",par:3e4}},a={geostr:"common.html5Geolocation",type:"start",param:{id:"second",par:3e4}},s={geostr:"common.urlgeolocation",type:"start",param:{}},n={geostr:"common.bdboxGeolocation",type:"start",param:{}};this._GEO_ARRAY=g.isAndroid()===!0?[n,s,t,e,i,o,a]:[n,s,t,i,e,o,a]},_useNextMethod:function(t){var o=this._GEO_ARRAY[this._GEO_METHOD_INDEX];o?(o.geostr=o.geostr||"",o.param=o.param||{},o.type=o.type||"",this._GEO_METHOD_INDEX++,listener.trigger(o.geostr,o.type,o.param)):listener.trigger("common.geolocation","fail",t)}}});
;define("common:widget/geolocation/myposition.js",function(i,t,e){"use strict";var o=i("core:widget/cookie/cookie.js");e.exports={domain:".baidu.com",path:"/",webCookie:"H_LOC_MI",nativeCookie:"H_LOC_APP",baiduLoc:"BAIDULOC",expires:1728e5,get:function(i){var t,e;if("baiduLoc"===i){if(t=o.get(this.baiduLoc),!t)return;var a={};try{e=t.split("_"),a={crd:{x:e[0],y:e[1],r:e[2]},cc:e[3],t:e[4]}}catch(r){}return a}if(i&&("web"===i||"native"===i)){var s="web"===i?this.webCookie:this.nativeCookie;if((t=o.get(s))&&(e=JSON.parse(t),t&&e)){if(e.crd){var n=e.crd.split("_");n[0]&&n[1]&&n[2]&&(e.crd={x:n[0],y:n[1],r:n[2]})}return e}}},save:function(i){"object"!=typeof i&&i.x&&i.y&&i.cityCode&&i.accuracy||this._save(i)},_save:function(i){var t=Date.now();i.t=t+"";var e=i.join("_");o.set(this.baiduLoc,e,{domain:this.domain,path:this.path,expires:this.expires})},remove:function(i){if(!i)return void o.remove(this.webCookie,{domain:this.domain,path:this.path});var t=o.get(this.webCookie),e=JSON.parse(t),a={};for(var r in e)i!==r&&(a[r]=e[r]);var s=JSON.stringify(a);o.set(this.webCookie,s,{domain:this.domain,path:this.path})}}});
;define("common:widget/geolocation/preciseipgeolocation.js",function(require,exports,module){"use strict";var metricStat=require("common:widget/stat/metrics-stat.js"),PreciseIPGeoLocation={init:function(){this._startGeo()},_startGeo:function(){metricStat.addStat("geo","preciseip_geo_all",1,!0);var addrbyip=_DEFAULT_CITY.addrbyip;addrbyip?this._getDetailLoc(eval("("+addrbyip+")")):listener.trigger("common.geomethod","fail",{})},_getDetailLoc:function(e){var t,i=e&&e.content,o=i&&i.address_detail,r=i&&i.point;return 0!==e.error||""===i.address?void listener.trigger("common.geomethod","fail",{}):(t={addr:{address:i.address||null,city:o.city||null,cityCode:o.city_code||1,district:o.district||null,street:o.street||null,accuracy:o.accuracy||null},point:{x:r.x||null,y:r.y||null},isGeoSuc:!0,isExactPoi:!0,type:"preciseip",isUserDeny:!1,isSaveLocInCookie:!0},metricStat.addStat("geo","preciseip_geo_suc",1,!0),void listener.trigger("common.geomethod","success",t))}};module.exports=PreciseIPGeoLocation});
;define("common:widget/geolocation/html5geolocation.js",function(t,e,o){"use strict";var i=t("common:widget/util/device-util.js"),n=t("common:widget/stat/metrics-stat.js"),a={param:{x:"",y:"",r:"",prod:"maponline"},getReqQuery:function(t,e,o){var i={x:t||"",y:e||"",r:o||""},n=[],a=this;return $.extend(a.param,i),$.each(a.param,function(t){n.push(t+"="+a.param[t])}),n.join("&")},request:function(t,e){var o={x:t[0],y:t[1],pois:"1"},i="//"+location.host+"/mobile/?qt=loc";$.ajax({url:i,data:o,dataType:"json",success:function(t){e&&e(t)}}),this._delay=window.setTimeout(function(){listener.trigger("common.geomethod","fail",{message:"html5 geolocation fail"})},15e3)}},c={getCurrentPosition:function(t,e,o){return navigator.geolocation.getCurrentPosition(t,e,o)},watchPosition:function(t,e,o){return navigator.geolocation.watchPosition(t,e,o)},clearWatch:function(t){navigator.geolocation.clearWatch(t)}},r={init:function(t){this._data=t||{},this._config={enableHighAccuracy:!0,maximumAge:6e4,timeout:this._data.par||3e4,accuracy:2e8},this._getCurrentPosition(c)},_getCurrentPosition:function(t){n.addStat("geo","html5_geo_all",1,!0),t.getCurrentPosition(this._onSuccess,this._onFailure,this._config)},_onSuccess:function(t){var e,o,i=r;e=t.coords,o=e.accuracy,o<i._config.accuracy&&0!==e.longitude&&0!==e.latitude?i._getPosSuccess(t,{success:i.onWlocSuccess}):listener.trigger("common.geomethod","fail",{}),n.addStat("geo","wlan_geo_radius",parseInt(o,10))},_onFailure:function(t){n.addStat("geo","html5_geo_fail",{error:t.code,messgae:t.message},!0),listener.trigger("common.geomethod","fail",t)},_isUserDeny:function(t){return t&&1===t.code?i.isIOS()&&"user denied geolocation"===t.message.toLowerCase()||i.isAndroid()?!0:!1:void 0},_getPosSuccess:function(t){if(t){var e=this,o=t.coords;if(o){var i=new Array;i.push(o.longitude),i.push(o.latitude),e._isFirstSetLoc=!0;var c=e._data.id;a.request(i,function(t){if(a._delay&&window.clearTimeout(a._delay),"object"==typeof t){var e={},i=t.result,r=t.result.addressComponent,s=t.result.cityCode;if(!i.location)return void listener.trigger("common.geomethod","fail",{message:"has no point"});e={addr:{city:r.city,cityCode:s,district:r.district,street:r.street,accuracy:o.accuracy,countryCode:r.country_code||""},point:{x:i.location.lng,y:i.location.lat}},$.extend(e,{type:"html5",isExactPoi:i.location?!0:!1,isSaveLocInCookie:!0}),n.addStat("geo","html5_get_geo_suc",{id:c},!0),listener.trigger("common.geomethod","success",e)}})}}}};o.exports=r});
;define("common:widget/geolocation/nativegeolocation.js",function(i,t,o){"use strict";var e=i("common:widget/stat/metrics-stat.js"),a="http://127.0.0.1:6259/",c="mcmdf=inapp_lbs_basicservice",s={lochost:"//map.baidu.com",apnUrl:a+"getapn?"+c+"&callback=getApnCallback",apinfoUrl:a+"getlocstring?"+c+"&timeout=0&callback=getapinfo",locSdkUrl:a+"geolocation?"+c+"&timeout=12000&callback=getGeoByNative",init:function(i){this._isApnTimeout=!1,this._isNativeAvailable=!1,this._isNativeTimeout=!1,this._isLocsdkTimeout=!1,this._isApinfoTimeout=!1,this._isGeoSuc=!1,this._isApinfoSuc=!1,this._isLocsdkSuc=!1,this._isLocsdkFail=!0,this._isApinfoFail=!0,this.outofdate=!1,this._data=i||{},this.checkApn()},checkApn:function(){var i=this;$.ajax({url:i.apnUrl,dataType:"jsonp",success:function(t){i._isApnTimeout===!1&&t&&0===t.error&&(i._isNativeAvailable=!0,i.nativeGeo&&i.nativeGeo())}}),i.checkApnTimeout(2)},checkApnTimeout:function(i){var t=this;setTimeout(function(){t._isNativeAvailable===!1&&(t._isApnTimeout=!0,listener.trigger("common.geomethod","fail",{}))},1e3*i)},nativeGeo:function(){this.geobyApinfo(),this.geobyLocsdk(),e.addStat("geo","native_geo_all",1,!0)},nativeGeofailed:function(i){var t=this;"locsdk"===i?t._isLocsdkFail=!0:"apinfo"===i&&(t._isApinfoFail=!0),t._isLocsdkFail&&t._isApinfoFail&&!t.outofdate&&(t.outofdate=!0,listener.trigger("common.geomethod","fail",{}),e.addStat("geo","native_geo_fail",1,!0))},geobyApinfo:function(){var i=this;$.ajax({url:i.apinfoUrl,dataType:"jsonp",success:function(t){0===t.error&&i._isApinfoTimeout===!1?i.getLocation(t):(e.addStat("geo","native_geo_apinfo_fail",{id:t.error},!0),i.nativeGeofailed("apinfo")),e.addStat("geo","native_get_geo_suc",{id:"apinfo"},!0)}}),i.checkApinfoTimeout(12)},geobyLocsdk:function(){var i=this;$.ajax({url:i.locSdkUrl,dataType:"jsonp",success:function(t){0===t.error&&i._isLocsdkTimeout===!1?i.getDetailLoc(t):i.nativeGeofailed("locsdk"),e.addStat("geo","native_get_geo_suc",{id:"locsdk"},!0)}}),i.checkLocsdkTimeout(12)},checkLocsdkTimeout:function(i){var t=this;setTimeout(function(){t._isLocsdkSuc!==!1&&t._isGeoSuc||(t._isLocsdkTimeout=!0,t.nativeGeofailed("locsdk"))},1e3*i)},checkApinfoTimeout:function(i){var t=this;setTimeout(function(){t._isApinfoSuc!==!1&&t._isGeoSuc||(t._isApinfoTimeout=!0,t.nativeGeofailed("apinfo"))},1e3*i)},getLocbyUrl:function(i){var t=this,o=t._data.id;$.ajax({url:i,dataType:"jsonp",success:function(i){var a,c=i&&i.content,s=c&&c.address_detail,n=c&&c.point;if(!t.outofdate){if(0!==i.error||""===c.address)return void("apinfo"===i.reqtype||"locsdk"===i.reqtype?t.nativeGeofailed(i.reqtype):(t.outofdate=!0,listener.trigger("common.geomethod","fail",{})));0===i.error&&"apinfo"===i.reqtype&&e.addStat("geo","url_geo_apinfo_suc_back",1,!0),t._isGeoSuc||(t._isGeoSuc=!0,a={addr:{address:c.address||null,city:s.city||null,cityCode:s.city_code||1,district:s.district||null,street:s.street||null,accuracy:s.accuracy},point:{x:n.x||null,y:n.y||null},isGeoSuc:!0,isExactPoi:!0,type:"native",isUserDeny:!1,isSaveLocInCookie:!0},listener.trigger("common.geomethod","success",a),e.addStat("geo","native_geo_getinfo_suc",{type:i.reqtype,id:o},!0))}}})},getLocation:function(i){var t=this,o=i.locstring.split("&"),e=o[0]+"|"+o[1],a=t.lochost+"/mobile/?qt=geo&apinfo="+e+"&type=apinfo&callback=";t._isApinfoSuc=!0,t.getLocbyUrl(a)},getDetailLoc:function(i){var t=this,o=t.getRgcUrl(i);t._isLocsdkSuc=!0,t.getLocbyUrl(o)},getRgcUrl:function(i){var t,o=i.coords.longitude,e=i.coords.latitude,a=i.coords.accuracy,c=this;return t=o&&e?c.lochost+"/mobile/?qt=geo&x="+o+"&y="+e+"&radius="+a+"&type=locsdk&callback=":""}};o.exports=s});
;define("common:widget/geolocation/sharegeolocation.js",function(t,e,i){"use strict";var r=t("common:widget/geolocation/myposition.js"),o=t("common:static/js/localstorage.js"),a=t("common:widget/stat/metrics-stat.js");i.exports={_MINUTES:5,init:function(t){t=t||{},this._MINUTES=parseInt(t.par)||this._MINUTES,this._data=t,this._startGeo()},_startGeo:function(){if(a.addStat("geo","share_geo_all",1,!0),"number"==typeof this._MINUTES){var t=r.get("baiduLoc")||r.get("native")||r.get("web");null!=t?this._setCookieLoc(t):this._geoFailHandler()}else this._geoFailHandler()},_isInMinutes:function(t){if(!t)return!1;var e=parseInt(Date.now()),i=e-6e4*this._MINUTES;return t>i?!0:!1},_formatLoc:function(t){var e=t&&t.crd;if(e)return{addr:{address:t.addr,city:t.city,district:t.district,street:t.street,cityCode:t&&t.cc,accuracy:e&&e.r},point:{x:e&&e.x,y:e&&e.y},t:t&&t.t,isUserInput:t&&"ui"===t.tp?!0:!1,type:"share",isExactPoi:!0,isGeoSuc:!0,minutes:this._MINUTES}},_setCookieLoc:function(t){var e=this,i=e._isInMinutes(t.t);t&&t.crd&&i?t.addr?e._addStatAndTriggerEvent(t):e._checkLocFromStorage(t.crd)?e._getLocFromStorage(t):e._getRgcLoc(t):e._geoFailHandler()},_getRgcLoc:function(t){var e=this;if(t.crd.x&&t.crd.y){var i="//api.map.baidu.com/?qt=rgc_standard&x="+t.crd.x+"&y="+t.crd.y+"&dis_poi="+t.crd.r+"&poi_num=10&ie=utf-8&oue=1&res=api&callback=";$.ajax({url:i,dataType:"jsonp",success:function(i){var r=i.content.address,a=i.content.address_detail;$.extend(t,{addr:r,city:a.city,district:a.district,street:a.street}),o.addData("webapp-location-cookie",t),e._addStatAndTriggerEvent(t)}})}},_checkLocFromStorage:function(t){var e,i;if(void 0===t)return!1;try{if(e=o.getData("webapp-location-cookie"),!e)return!1;i=JSON.parse(e)}catch(r){return!1}return parseInt(i.x)===parseInt(t.x)&&parseInt(i.y)===parseInt(t.y)?(this._locAddress=i,!0):!1},_getLocFromStorage:function(t){var e=this._locAddress;$.extend(t,{addr:e.address?e.address:e.city+e.district+e.street,city:e.city,district:e.district,street:e.street}),this._addStatAndTriggerEvent(t)},_addStatAndTriggerEvent:function(t){var e=this._formatLoc(t);a.addStat("geo","share_geo_suc",1,!0),listener.trigger("common.geomethod","success",e)},_geoFailHandler:function(){return this._MINUTES<=5?void listener.trigger("common.geomethod","fail",{}):this._MINUTES>=30?void listener.trigger("common.geomethod","fail",this._data):void 0}}});
;define("common:widget/geolocation/urlgeolocation.js",function(t,e,o){"use strict";var i=t("common:widget/stat/metrics-stat.js");o.exports={lochost:"//map.baidu.com",init:function(){this._startGeo()},_startGeo:function(){var t=this,e=t.getContainLoc();e?t.getDetailLoc(e):listener.trigger("common.geomethod","fail",{})},getDetailLoc:function(t){var e=this,o=t||[],r=e.lochost+"/mobile/?qt=geo&x="+o[0]+"&y="+o[1]+"&type=url&callback=";return o[0]&&o[1]?(i.addStat("geo","url_geo_startget",1,!0),void $.ajax({url:r,dataType:"jsonp",success:function(t){var e,o=t&&t.content,r=o&&o.address_detail,n=o&&o.point;return 0!==t.error||""===o.address?void listener.trigger("common.geomethod","fail",{}):(e={addr:{address:o.address||null,city:r.city||null,cityCode:r.city_code||1,district:r.district||null,street:r.street||null},point:{x:n.x||null,y:n.y||null},isGeoSuc:!0,isExactPoi:!0,type:"url",isSaveLocInCookie:!1,isUserDeny:!1},i.addStat("geo","url_geo_suc",1,!0),void listener.trigger("common.geomethod","success",e))},error:function(){listener.trigger("common.geomethod","fail",{})}})):void listener.trigger("common.geomethod","fail",{})},getContainLoc:function(){var t=decodeURI(window.location.href),e=t.indexOf("locMC="),o="",i="",r=[];return 0>e?void 0:(e+=6,o=t.substr(e,t.length),i=o.indexOf("|"),i>0?(r=[],r[0]=o.substr(0,i),r[1]=o.substr(i+1,o.length),r):void 0)}}});
;define("common:widget/appresize/appresize.js",function(e,i,t){"use strict";var n=e("common:widget/util/device-util.js");t.exports={init:function(){this.bind(),this.setMainHeight(),$(document.body).css("min-height",window.innerHeight)},bind:function(){listener.on("common","sizechange",$.proxy(this.update,this)),"undefined"!=typeof window.onorientationchange?(window.addEventListener("orientationchange",this.resize,!1),n.isAndroid()&&window.addEventListener("resize",this.resize,!1)):window.addEventListener("resize",this.resize,!1),listener.on("common.page","switchend",$.proxy(this.setMainHeight,this))},getAppHeight:function(){var e=window.innerHeight,i=$(".common-widget-header").height(),t=$(".index-widget-tabgroup").height(),n=$(".index-widget-searchbox").height(),o=$(".common-widget-nav").height(),h=$(".common-widget-footer").height(),s=$(".common-widget-bottom-banner").height(),g=$(".common-widget-lineslide").height(),d=$(".common-widget-weixincallna").height()||0,r=e-(i+h+s+d),m=i+o+t+n+d,a=e-m-g;return{min:r,mapTop:m,mapHeight:a,header:i,footer:h,bottom:s}},setMainHeight:function(){var e=this.getAppHeight();$("#main").css({"min-height":e.min})},update:function(){var e=this.getAppHeight();$("#main").css({"min-height":e.min}),$(".common-widget-map").css({height:e.mapHeight,top:e.mapTop})},resize:function(e){function i(){setTimeout(function(){$(document.body).css("min-height",window.innerHeight)},1),listener.trigger("common","sizechange",{width:e.target.innerWidth,height:e.target.innerHeight,delay:!0})}var t=e.type,n={orientationchange:function(){setTimeout(function(){i()},1e3)},resize:function(){i()}};t=t.replace(/^on/,""),t&&n[t]()}}});
;define("common:widget/popup/popup.js",function(t,i,o){"use strict";o.exports={_defaultOptions:{autoCloseTime:2e3,isTouchHide:!1},_$el:null,_autoCloseTimeout:null,_create:function(t){var i,o;t.layer&&(o=$("<div/>").addClass("common-widget-popup-layer").appendTo(document.body)),i=$("<div></div>").addClass("common-widget-popup").text(t.text||"").hide().appendTo(document.body),this._layout(i),this._$el=i,this._$layer=o},_layout:function(t){var i,o;"none"===t.css("display")&&(o=t.css("visibility"),t.css({visibility:"visibile"}).show()),i=t.offset(),t.css({left:(window.innerWidth-i.width)/2,top:(window.innerHeight-i.height)/2,visibility:o})},open:function(t){var i=this;t=this._options=$.extend({},this._defaultOptions,"string"==typeof t?{text:t}:t),this._$el?(t.html?this._$el.html(t.html):this._$el.text(t.text),this._layout(this._$el)):this._create(t),this._$el.show(),t.autoCloseTime&&(clearTimeout(this._autoCloseTimeout),this._autoCloseTimeout=setTimeout($.proxy(this.close,this),t.autoCloseTime)),t.isTouchHide?(this._$el.on("click",function o(t){t.stopPropagation(),$("#bmap_pop_cover").hide(),i.close(),this._boxTouchHandle=o,this._$el.off("click",o)}),$(document.body).on("click",function e(t){t.stopPropagation(),$("#bmap_pop_cover").hide(),i.close(),this._docTouchHandle=e,$(document.body).off("click",e)})):(this._boxTouchHandle&&this._$el.off("click",this._boxTouchHandle),this._docTouchHandle&&$(document.body).off("click",this._docTouchHandle)),listener.on("common","sizechange",function(){setTimeout(function(){i.setPos()},1e3)})},close:function(){var t;this._$layer&&(this._$layer.remove(),this._$layer=null),this._$el&&(this._$el.remove(),this._$el=null,$.isFunction(t=this._options.onClose)&&t.call(this),this._autoCloseTimeout=null)},setPos:function(){if(this._$el){var t=this._$el.offset(),i=(window.innerWidth-t.width)/2,o=(window.innerHeight-t.height)/2+window.scrollY;this._$el.css({left:i,top:o})}}}});
;define("common:widget/slideupbox/slideupbox.js",function(require,exports,module){function SlideUpBox(t){this.opts=$.extend({wrap:"#main",open:!0,content:"","class":"",title:"",titleStyle:"title",height:"auto",max_height:""},t),this.create()}require.loadCss({url:"//webmap1.bdimg.com/mobile/simple/static/common/widget/slideupbox/slideupbox.inline_88122b2.css"}),$.extend(SlideUpBox.prototype,{create:function(){$.isArray(this.opts.content)&&(this.opts.content=this.opts.content.join(""));var tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="slide-up-box-wrap"><div class="slide-up-box">    <div class="',"undefined"==typeof titleStyle?"":titleStyle,' -hcenter">        <a class="cancel" href="javascript:void(0)">取消</a>        <span>',"undefined"==typeof title?"":title,'</span>        <a class="confirm" href="javascript:void(0)">确定</a>    </div>    <div class="wrap"></div></div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],html=tpl({title:this.opts.title,titleStyle:this.opts.titleStyle});if(this.box=$(html),this.box.addClass("slide-up-box-wrap"),$(".slide-up-box .wrap",this.box).addClass(this.opts.class).height(this.opts.height),""!=this.opts.max_height&&$(".slide-up-box .wrap",this.box).addClass("overflow").css("max-height",this.opts.max_height),$(".wrap",this.box).html(this.opts.content),this.opts.confirm||$(".confirm",this.box).remove(),$(this.opts.wrap).append(this.box),$(this.opts.wrap).append(this.mask),!this.opts.open){this.box.css("visibility","hidden");var _height=$(".slide-up-box",this.box).height();$(".slide-up-box",this.box).css("bottom",-1*_height)}return $(".slide-up-box",this.box).addClass("transition"),this.bind(),this},bind:function(){var t=this;$(".cancel",t.box).on("click",function(){t.opts.cancel&&t.opts.cancel(),t.close()}),$(".confirm",t.box).on("click",function(){t.opts.confirm&&t.opts.confirm()!==!1&&t.close()}),t.box.on("click",function(i){$(i.target).hasClass("slide-up-box-wrap")&&"complete"===t.box.attr("data-animation")&&(t.opts.onClose&&t.opts.onClose(),t.close())}),t.box[0].addEventListener("webkitAnimationEnd",function(){t.box.attr("data-animation","complete")},!1)},close:function(){var t=$(".slide-up-box",this.box).height(),i=this;$(".slide-up-box",this.box).addClass("transition").css({bottom:-1*t}),this.box.removeClass("animation-fadeIn").addClass("animation-fadeOut"),this.box.attr("data-animation","processing"),$("#common-bottombanner-widget-fis").css({visibility:"visible"}),this.recoverPageScroll(),setTimeout(function(){i.box.css({visibility:"hidden"})},140)},open:function(){this.box.css({visibility:"visible"}),$(".slide-up-box",this.box).css({visibility:"visible",bottom:0}),this.box.removeClass("animation-fadeOut").addClass("animation-fadeIn"),this.box.attr("data-animation","processing"),$("#common-bottombanner-widget-fis").css({visibility:"hidden"}),this.forbidPageScroll()},recoverPageScroll:function(){$("html, body").css({height:"auto",overflow:"auto"})},forbidPageScroll:function(){$("html, body").css({height:"100%",overflow:"hidden"})}}),module.exports=SlideUpBox});
;define("common:static/js/localstorage.js",function(e,t,s){"use strict";var a=window.localStorage,r="<#lsvalid#>",c="</#lsvalid#>",d=new RegExp("^(<#lsvalid#>)(.*)(</#lsvalid#>)$"),i=function(){},o=i.prototype;o.deleteData=function(e,t){if(a){t=t||{};try{a.removeItem(e),t.success&&t.success()}catch(s){t.error&&t.error()}}},o.addData=function(e,t,s){if(a){s=s||{};try{a.setItem(e,r+JSON.stringify(t)+c),s.success&&s.success()}catch(d){s.error&&s.error(),l.addStat&&l.addStat(20155,{message:d.message,key:e,type:"ad"})}}},o.getData=function(e){if(a){var t=a.getItem(e);if(null===t)return null;var s=null;return(s=t.match(d))?t=s[2]:void 0}};var l=e("common:widget/util/device-util.js");o.selectData=function(e,t){if(a){var s,r=a.getItem(e);if(t=t||{},null===r)return void(t.success&&t.success(r));var c=null;if(c=r.match(d)){r=c[2];try{s=JSON.parse(r),t.success&&t.success(s)}catch(i){t.error&&t.error(),l.addStat&&l.addStat(20155,{key:e,type:"sd",message:i.message})}}else t.error&&t.error(),l.addStat&&l.addStat(20155,{key:e,type:"sd",message:"data not valid"})}},s.exports=new i});
;define("common:widget/login/login.js",function(e,t,o){"use strict";var a=e("core:widget/cookie/cookie.js"),r=e("core:widget/stat/pbstat.js"),n=e("core:widget/url/url.js");o.exports={checkLogin:function(e){var t=a.get("BDUSS")||"",o=a.get("myUserName")||"";o&&t?(localStorage.removeItem("loginErr"),e&&e({status:!0,username:o})):$.ajax({type:"GET",url:"//map.baidu.com/?qt=ssn&t="+Date.now(),dataType:"jsonp",timeout:8e3,success:function(t,o){if("success"===o&&"0"===t.bdErrCode&&""!==t.displayname){var n={domain:location.hostname,path:"/mobile",expires:6048e5};return a.set("myUserName",t.displayname,n),localStorage.loginErr&&(r.addStat(COM_PB_STAT.LOGIN_SUCCESS,"request"),localStorage.removeItem("loginErr")),e&&e({status:!0,username:t.displayname}),!0}localStorage.setItem("loginErr",1),e&&e({status:!1,username:""})},error:function(){var t=a.get("BDUSS"),o=a.get("myUserName");return t&&o?(localStorage.removeItem("loginErr"),void(e&&e({status:!0,username:o}))):(localStorage.loginErr=1,e&&e({status:!1,username:""}),!1)}})},loginAction:function(){r.addStat(COM_PB_STAT.LOGIN_BTN),location.href="http://wappass.baidu.com/passport/?authsite=1&u="+encodeURIComponent(document.location)},logoutAction:function(){r.addStat(COM_PB_STAT.LOGOUT_BTN),a.remove("myUserName"),location.href="http://wappass.baidu.com/passport/?logout&u="+location.protocol+"//"+location.host+"/mobile/webapp/index/index/force=simple"},goMycenter:function(){r.addStat(COM_PB_STAT.GOTO_MYCENTER_BTN),n.navigate("/mobile/webapp/user/mycenter/force=simple")}}});
;define("common:widget/monitor/pagelog.js",function(e,i,n){"use strict";function t(){var e=window._APP_HASH||{},i=e.module,n=e.action,t=e.page,a=e.third_party,o="";if("place"===i&&"seo"===a&&$.inArray(n,["list","detailnew"])>=0)o=/vt=map/.test(location.href)?[i,a,"map"].join("_"):[i,n,a].join("_");else if(/vt=map/.test(location.href))o=(i+"_map").toLowerCase();else{if("index"===i&&"index"===n&&"navline"===t)return"";if("index"===i&&"index"===n&&"indexmap_a1"===t)return"index_map_a1";o=(i+"_"+n+"_"+t).toLowerCase()}return o}function a(){var e=t();return PDC.DICT[e]?PDC.DICT[e]:""}n.exports={init:function(){var e=a();e&&DP&&DP.init({page:"16_"+e,speed_page:"16_"+e})}}});
;define("common:widget/monitor/monitor.js",function(e,i,t){"use strict";PDC.DICT={index_index_index:10,place_list_list:11,place_detailnew_life:12,place_detailnew_bank:12,place_detailnew_shopping:12,place_detailnew_hospital:12,transit_list_list:13,transit_detail:14,drive_list_map:15,walk_list:16,transit_crosslist:17,transit_crossdetail:18,index_map:19,index_map_a1:76,place_map:20,transit_map:21,drive_map:22,place_detailnew:29},PDC.special_page={place_list_cater:23,place_list_hotel:24,place_list_hotelimg:25,place_list_seo:26,place_detailnew_seo:27,place_seo_map:28},t.exports={init:function(){e("common:widget/monitor/pagelog.js").init()}}});
;define("common:widget/stat/metrics-stat.js",function(n,t,e){"use strict";function r(n,t){if(!n)return!1;f(n,N.suspend,1);var e={};if(e.type="ms0",e.target=n,e.ts=Date.now(),g[n]=e,t){var r=t.expire;r>0&&i(n,r);var u=t.callback;u&&u instanceof Function&&(b[n]=u)}return!0}function i(n,t){x[n]=setTimeout(function(){s(n)},1e3*t)}function u(n,t,e,r){if(!n||!t)return!1;e||(e=1);var i=g[n];if(!i)return!1;if($.isPlainObject(e)){for(var u in e){var o=t+"_"+u;i[o]=e[u]}i[t]=a(i[t],1,r)}else i[t]=a(i[t],e,r);return!0}function a(n,t,e){return e?isNaN(n)?t:isNaN(t)?t:n+t:t}function o(n){return f(n,N.success,1)}function s(n){return f(n,N.expire,1)}function c(){if(!p(g))for(var n in g)f(n,N.suspend,1)}function f(n,t,e){if(!n)return!1;var r=g[n];if(!r)return!1;r.status=t;var i=v(T,r);l(i,e),r.url=i,delete g[n];var u=x[n];u&&(delete x[n],clearTimeout(u));var a=b[n];return a&&a instanceof Function&&(d(a,r,50),delete b[n]),!0}function d(n,t,e){setTimeout(function(){n(t)},e)}function v(n,t){var e=n.split("?"),r=e[0],i=e[1];i?i+="&":i="",i+=$.param(t);var u=r+"?"+i;return u}function l(n){(new Image).src=n}function p(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function m(n){return n?g[n]:void 0}function w(n,t){var e={t:Date.now(),code:n};$.extend(e,t);var r=v(T,e);l(r,1)}var g={},b={},x={},N={success:0,expire:1,suspend:2},T="/mobile/img/transparent.gif?newmap=1";$.each(["blur","pagehide","beforeunload","unload"],function(n,t){var e="on"+t;void 0!==window[e]&&$(window).bind(t,c)}),e.exports={start:r,addStat:u,submit:o,getTarget:m,sendOldStat:w}});
;define("common:static/js/searchdata.js",function(e,a,t){var n;n||(n=e("core:widget/geolocation/location.js"));var c={_cache:{length:0,index:0,data:{}},fetch:function(e,a,t){if(e)if(e=this._processUrl(e),this._getCacheData(e))a&&a(this._getCacheData(e));else{var n=this,c=window.location.host;$.ajax({url:"//"+c+e,dataType:"jsonp",success:function(c){try{var i=c;n._saveToCache(e,i),a&&a(i)}catch(o){t&&t()}},error:function(){t&&t()}})}},_processUrl:function(e){e=e.replace(/%3C/gi,encodeURIComponent(" ")).replace(/%3E/gi,encodeURIComponent(" "));var a="&from=maponline",t="&tn=m01",n="&ie=utf-8",c="&data_version=11252019",i="";return 0!==e.indexOf("/")&&(i="/mobile/?"),e=i+e+a+t+n+c},_getCacheData:function(e){return this._cache.data[e]&&this._cache.data[e].response||null},_saveToCache:function(e,a){this._cache.length>=c.MAX_CACHE&&this._removeOldData();var t=this._cache.index;this._cache.data[e]={index:t,response:a},this._cache.length++,this._cache.index++},_removeOldData:function(){var e=5,a=[];for(var t in this._cache.data)a.push({url:t,index:this._cache.data[t].index});a.sort(function(e,a){return e.index-a.index}),e=e>a.length?a.length:e;for(var n=0;e>n;n++)delete this._cache.data[a[n].url];this._cache.length-=e}};c.MAX_CACHE=10,t.exports=c});
;define("common:widget/nav/nav.js",function(t,a,e){"use strict";var n=t("core:widget/url/url.js"),o=!1,r="_lastPageUrl",i=function(){var t=window.localStorage.getItem(r);"string"==typeof t?(window.localStorage.removeItem(r),n.navigate(t,{replace:!0,storageKey:!1})):history.back()},c=function(){o===!0?i():(window.localStorage.removeItem(r),history.back())},l=function(){$(".common-widget-nav [jsaction]").on("click",$.proxy(function(t){var a=$(t.currentTarget);switch(a.attr("jsaction")){case"jump":c();break;case"tomap":var e=n.get({path:a.attr("link"),disableEncode:!0});n.update(e);break;case"toindex":n.update({module:"index",action:"index"},{queryReplace:!0,pageStateReplace:!0})}},this))},s=function(t){o=!!t;var a=$("#nav_maplink");a.attr("link",a.attr("data-href")),a.attr("data-href",""),l()};e.exports.init=s});
;define("common:widget/footer/footer.js",function(n,o,t){"use strict";var e=n("core:widget/url/url.js"),i=function(){e.update({module:"user",action:"mycenter"})},c=function(){$(".user").on("click",function(){i()})},u=function(){c()};t.exports.init=u});
;define("common:widget/bottombanner/bottombanner.js",function(e,t,a){"use strict";var n=e("common:widget/util/device-util.js"),o=e("core:widget/util/url-util.js"),i=e("core:widget/stat/pbstat.js"),r=e("core:widget/url/url.js"),d=(e("core:widget/cookie/cookie.js"),e("common:widget/util/native-util.js")),s=e("common:static/js/mercatorProjection.js"),l=(n.isAndroid()?"android":n.isIPhone()?"iphone":n.isIPad()?"ipad":"unknown",{hasSendOpenNa:!1,displayConfig:{bus:{image:"bottom-banner-bus",title:"1元召唤顺风车",subtitle:"还在挤公交吗？",color:"#0db9eb"},drive:{image:"bottom-banner-drive",title:"百度手机地图全搞定",subtitle:"查路况 查违章",color:"#20c090"},walk:{image:"bottom-banner-walk",title:"Apple Watch等你领",subtitle:"手机地图步行导航",color:"#20c090"},"default":{image:"bottom-banner-default",title:"离线地图没网也能搜索",subtitle:"百度地图app",color:"#0db9eb"},subway:{image:"bottom-banner-subway",title:"没网也可查地铁",subtitle:"百度地图app地铁图",color:"#0db9eb"}},renderBanner:function(){$(".bottom-banner-float").show()},renderFloatBanner:function(){var e=r.get();("search"===e.module||"place"===e.module&&"list"===e.action)&&e.query.wd&&this.renderBanner("default"),e.query.uid&&this.renderBanner("default"),("walk"===e.query.qt||"wse"===e.query.qt)&&this.renderBanner("walk"),("nav"===e.query.qt||"nse"===e.query.qt)&&this.renderBanner("drive"),("bt"===e.query.qt||"bse"===e.query.qt)&&this.renderBanner("bus"),("cycle"===e.query.qt||"bcyse"===e.query.qt)&&this.renderBanner("bicycle"),("index"===e.module||"index"===e.action)&&this.renderBanner("default"),("subway"===e.module||"show"===e.action)&&this.renderBanner("subway"),("place"===e.module||"linesearch"===e.action)&&this.renderBanner("default")},getCurrentHash:function(){var e=window._APP_HASH,t=window.location.pathname.replace("/mobile/webapp/",""),a=t.split("/"),n=a[2],i=a[3];return{module:e.module,action:e.action,query:o.urlToJSON(n||""),pageState:o.urlToJSON(i||"")}},checkDisplayBanner:function(e){var t,a,n,o,i,r=[],d=window.bottomBannerDisplayRule,s=e.module,l=e.action,c=e.query,u=e.pageState;return d?($.each(d,function(e){t=[],e.module&&(a=e.module.substring(0,1),n=e.module.substring(1),t.push("!"===a?-1===n.indexOf(s):n.indexOf(s)>-1)),e.action&&(a=e.action.substring(0,1),n=e.action.substring(1),t.push("!"===a?-1===n.indexOf(l):n.indexOf(l)>-1)),e.query&&$.each(e.query,function(e,i){a=i.substring(0,1),n=i.substring(1),o=c[e]||void 0,t.push("!"===a?-1===n.indexOf(o):n.indexOf(o)>-1)}),e.pagestate&&$.each(e.pagestate,function(e,o){a=o.substring(0,1),n=o.substring(1),i=u[e]||void 0,t.push("!"===a?-1===n.indexOf(i):n.indexOf(i)>-1)}),r.push(-1===t.indexOf(!1))}),-1!==r.indexOf(!0)?!0:!1):!1},isHideBanner:function(){return this.bannerHide?(localStorage.hbt=Date.now(),!0):localStorage.hbt?Date.now()>Number(localStorage.hbt)+9e5?(localStorage.removeItem("hbt"),!1):!0:!1},getPageConfig:function(){var e,t,a,o,i,r=this.getCurrentHash(),d=r.module,s=r.action,l=r.query,c=r.pageState,u={};if(this.cmsDisplayRule=window.bottomBannerDisplayRule,i=window.webapp_cms_bottom_download_img,_APP_HASH.third_party&&(o=window["third_"+_APP_HASH.third_party+"_bottom_config"],o&&$.each(o,function(e,t){i[e]=t})),!i||!this.checkDisplayBanner(r)||this.isHideBanner())return null;try{e=i[d][s]}catch(p){e=null}try{i&&i.wd&&(t=new RegExp(i.wd.transitType,"g"),a=new RegExp(i.wd.driveType,"g"))}catch(p){}if(l.wd&&l.wd.search(t)>-1)try{e=i.transit.list}catch(p){}else if(l.wd&&l.wd.search(a)>-1)try{e=i.drive.list}catch(p){}else"groupon"===c.detail_part&&(e=i.groupon||e);if(!e){if(!i.other)return null;e=i.other}return e?(u.needOpen=e.openUrl?!0:!1,u.bgUrl=e.openUrl&&this.hasInstalled?e.openUrl:e.downloadImgUrl,u.srcUrl=n.isIPhone()?e.iponeSrc:n.isAndroid()?e.androidSrc:n.isIPad()?e.ipadSrc:e.androidSrc,u):null},renderAfterLoaded:function(){this.config=this.getPageConfig(),this.config&&this.config.bgUrl?(this.$el.attr("data-href",this.config.srcUrl).show(),listener.trigger("common","sizechange")):this.$el.hide()},currentNativeUrl:function(){var e,t,a,o,i=r.get(),d=_APP_HASH.da_page,l="",c="";if(i.query.sn&&(l=this.getRouteInfo(i.query.sn)),i.query.en&&(c=this.getRouteInfo(i.query.en)),o="baidumap://map/show?src=webapp.show."+d,("search"===i.module||"place"===i.module&&"list"===i.action)&&i.query.wd){var u=encodeURIComponent(i.query.wd);o="baidumap://map/place/search?query="+u+"&src=webapp.poi."+d}if(i.query.uid){var p=i.query.uid;o="baidumap://map/place/detail?uid="+p+"&src=webapp.detail."+d}if(i.query.uid&&"read_share"===i.pageState.act&&i.pageState.sharegeo){var b=i.pageState.sharegeo,m=b.split(","),h=m[1]+","+m[0];o="baidumap://map/geocoder?location="+encodeURIComponent(h)+"&coord_type=bd09mc&src=webapp.detail."+d}if("walk"===i.query.qt||"wse"===i.query.qt){var g=$("#walk-nav");e=g.attr("data-sn"),t=g.attr("data-en"),l&&(e=l),c&&(t=c),e=encodeURIComponent(e),t=encodeURIComponent(t),o="baidumap://map/direction?mode=walking&origin="+e+"&destination="+t+"&coord_type=bd09mc&src=webapp.walk."+d}if("cycle"===i.query.qt||"bcyse"===i.query.qt){var w=$("#bicycle-nav");e=w.attr("data-sn"),t=w.attr("data-en"),l&&(e=l),c&&(t=c),e=encodeURIComponent(e),t=encodeURIComponent(t),o="baidumap://map/direction?mode=riding&origin="+e+"&destination="+t+"&coord_type=bd09mc&src=webapp.bicycle."+d}if("nav"===i.query.qt||"nse"===i.query.qt){var f=$(".gotonav-native"),e=f.attr("data-sn"),y=f.data("spt"),t=f.attr("data-en"),_=f.data("ept");if(y&&""!==y){var q=y.split(","),v=s.convertMC2LL({lng:q[0],lat:q[1]});e="name:"+f.data("sn")+"|latlng:"+[v.lat,v.lng].join(",")}if(_&&""!==_){var q=_.split(","),v=s.convertMC2LL({lng:q[0],lat:q[1]});t="name:"+f.data("en")+"|latlng:"+[v.lat,v.lng].join(",")}e=encodeURIComponent(e),t=encodeURIComponent(t),o="baidumap://map/direction?mode=driving&origin="+e+"&destination="+t+"&src=webapp.car."+d}if(("bt"===i.query.qt||"bse"===i.query.qt)&&(e=$("#transit-start").attr("data-sn"),t=$("#transit-end").attr("data-en"),a=i.pageState.i||"",l&&(e=l),c&&(t=c),e=encodeURIComponent(e),t=encodeURIComponent(t),o="baidumap://map/direction?mode=transit&origin="+e+"&destination="+t+"&coord_type=bd09mc&index="+a+"&src=webapp.bus."+d,"undefined"!=typeof i.query.type&&null!==i.query.type&&(o=o+"&type="+i.query.type)),("index"===i.module||"index"===i.action)&&(e=$(""),o="baidumap://map/show?src=webapp.show."+d),"subway"===i.module||"show"===i.action){var O="baidumap://map/component?target=subway_page_openapi&comName=subway&param=",I='{"cityid":"'+this.opt.subwayCityId+'","cityname":"'+this.opt.subwayCity+'"}';return O+=encodeURIComponent(I),O+="&src=webapp.line."+d}if("place"===i.module&&"hotelzt"===i.action){var S=i.query.src_from||"webapp.default.all.hotel",B=n.isIPhone()?"hotel_search_channel_wise":"hotel_search_channel";o="baidumap://map/component?comName=hotel&popRoot=no&target="+B+"&param="+encodeURIComponent(JSON.stringify({src_from:S}))}return o},getRouteInfo:function(e){var t=e.split("$$"),a="",n=[],o="";return t[2]&&t[3]&&(n=t[2].split(","),o=n[1]+","+n[0],a="name:"+t[3]+"|latlng:"+o),a},showNative:function(e){var t=this,a=r.get(),o="",s="",l="",c=e.target,u=t.currentNativeUrl();($(c).hasClass("bottom-banner-float")||0!==$(c).parents(".bottom-banner-float").length)&&(s="bottombannerfloat",u+=".floatbottombannerbtn",l="float");var p="";if(a.pageState&&a.pageState.sharecallbackflag&&(p="&sharecallbackflag="+a.pageState.sharecallbackflag),u+=p,n.isIPhone()?i.addStat(window.COM_PB_STAT.BOTTOM_BANNER_CLICK_IOS+l):(o="1"===window._WISE_INFO.netype?"wifi":"notwifi","wifi"===o?i.addStat(window.COM_PB_STAT.BOTTOM_BANNER_CLICK_ANDROID_WIFI+l):"notwifi"===o&&i.addStat(window.COM_PB_STAT.BOTTOM_BANNER_CLICK_ANDROID_NOTWIFI+l)),i.addStat("static"===l?COM_PB_STAT.BOTTOM_BANNER_CLICK_STATIC:COM_PB_STAT.BOTTOM_BANNER_CLICK_FLOAT),d.canUseUniversalLink()){var b=r.getCurrentUrl();d.callNAbyUniversalLink(b,u,{callNaMore:"bottombanner"})}else d.callNA(u,{source:s,callNaMore:"bottombanner"})},closeBannerFloat:function(e){e.stopPropagation(),e.preventDefault(),$(".bottom-banner-float").hide()},bindEvent:function(){$(".bottom-banner-float").on("click",$.proxy(this.showNative,this)),$(".common-widget-bottom-banner-close").on("click",this.closeBannerFloat)},init:function(e,t){this.opt=t,i.addStat(n.isIPhone()?window.COM_PB_STAT.BOTTOM_BANNER_IOS:window.COM_PB_STAT.BOTTOM_BANNER_ANDROID),this.bannerHide=e||!1;var a=this;a.renderFloatBanner(),a.bindEvent()}});a.exports=l});
;define("common:widget/mapbanner/mapbanner.js",function(e,a,n){"use strict";var t=e("core:widget/stat/pbstat.js"),o=e("common:widget/util/device-util.js"),i=e("common:widget/util/native-util.js");n.exports=Widget.extend({el:".common-widget-mapbanner",init:function(){listener.once("common.map","mapcontrolcomplete",function(){var e=$(".map-geo").offset();if(e){var a=e.top-35-12;$(".common-widget-mapbanner").css("top",a+"px"),$(".common-widget-mapbanner").show(),window._MAP_LOADED===!1?(t.addStat(o.isIPhone()?COM_PB_STAT.MAPBANNER_STRONG_SHOW_IOS:COM_PB_STAT.MAPBANNER_STRONG_SHOW_ANDROID),setTimeout(function(){$(".banner").remove()},5e3)):(o.isIPhone()?t.addStat(COM_PB_STAT.MAPBANNER_WEAK_SHOW_IOS,"show"):t.addStat(COM_PB_STAT.MAPBANNER_WEAK_SHOW_ANDROID,"show"),$(".banner").remove()),window._MAP_LOADED=!0}}),this.gotoNative()},events:{},gotoNative:function(){var e=_APP_HASH.da_page,a="1"===window._WISE_INFO.netype?"wifi":"notwifi",n=navigator.userAgent,_="";_=/baiduboxapp/i.test(n)?"baidumap://map/show?src=webapp.default."+e+".mapbanner":"baidumap://map?src=webapp.default."+e+".mapbanner";$(".common-widget-mapbanner");$(".common-widget-mapbanner").on("click",function(){if(o.isIPhone()?t.addStat(COM_PB_STAT.MAPBANNER_CLICK_IOS):"wifi"===a?t.addStat(COM_PB_STAT.MAPBANNER_CLICK_ANDROID_WIFI):"notwifi"===a&&t.addStat(COM_PB_STAT.MAPBANNER_CLICK_ANDROID_NOTWIFI),i.canUseUniversalLink()){var e=window.location.href;i.callNAbyUniversalLink(e,_,{callNaMore:"mapoffline"})}else i.callNA(_,{source:"mapbanner",callNaMore:"mapoffline"});return!1})}})});
;define("common:widget/callnatohere/callnatohere.js",function(n,a,e){"use strict";var i=n("core:widget/util/url-util.js"),t=n("core:widget/geolocation/location.js"),o=n("common:widget/util/native-util.js"),l=n("common:widget/util/device-util.js"),r=n("core:widget/stat/pbstat.js"),d="我的位置",c={gotoHere:function(n,a){if(this.isPermitCallup()){var e=this.parseParam(n),i=e.word||"",l=e.point||"";if(l){var c=l.split(",");2===c.length&&(l=c[1]+","+c[0])}e.navi_x&&e.navi_y&&(l=e.navi_y+","+e.navi_x);var s="name:"+i+"|latlng:"+l,p=t.getLocation(),m=d,u=p.point||"",g=u?u.y+","+u.x:"",v="name:"+m+"|latlng:"+g,f=a.stat||"",A="baidumap://map/direction?mode=driving&origin="+encodeURIComponent(v)+"&destination="+encodeURIComponent(s)+"&coord_type=bd09mc&src=webapp.default.all."+f;o.canUseUniversalLink()?o.callNAbyUniversalLink(n,A):o.callNA(A,{forbidDownLoad:!0}),r.addStat(COM_PB_STAT.CALLNA_TOHERE_LIST)}},parseParam:function(n){var a=null,e=/&end=(.*)&tab=line/i;if(e.test(n)&&RegExp.$1){var t=decodeURIComponent(decodeURIComponent(RegExp.$1));a=i.urlToJSON(t)}return a},parseStartEndInfo:function(n,a){var e=n.word||d,i=n.point||"",t="name:"+e;if(i){var o=i.split(",");2===o.length&&(i=o[1]+","+o[0],t+="|latlng:"+i)}else t+="|latlng:";l.isAndroid()&&""===i&&(t=e);var r=a.word||d,c=a.point||"",s="name:"+r;if(c){var p=c.split(",");2===p.length&&(c=p[1]+","+p[0],s+="|latlng:"+c)}else s+="|latlng:";return l.isAndroid()&&""===c&&(s=r),[t,s]},callTransit:function(n,a,e,i){if(this.isPermitCallup()){var t=this.parseStartEndInfo(a,e),l=t[0],d=t[1],c="baidumap://map/direction?mode=transit&origin="+encodeURIComponent(l)+"&destination="+encodeURIComponent(d)+"&coord_type=bd09mc&src=webapp.default.all.callnatoheretransit";o.canUseUniversalLink()?o.callNAbyUniversalLink(i,c):o.callNA(c,{forbidDownLoad:!0}),r.addStat(COM_PB_STAT.CALLNA_TOHERE_TRANSIT)}},callDrive:function(n,a,e,i){if(this.isPermitCallup()){var t=this.parseStartEndInfo(a,e),l=t[0],d=t[1],c="baidumap://map/direction?mode=driving&origin="+encodeURIComponent(l)+"&destination="+encodeURIComponent(d)+"&coord_type=bd09mc&src=webapp.default.all.callnatoheredriving";o.canUseUniversalLink()?o.callNAbyUniversalLink(i,c):o.callNA(c,{forbidDownLoad:!0}),r.addStat(COM_PB_STAT.CALLNA_TOHERE_DRIVING)}},callWalk:function(n,a,e,i){if(this.isPermitCallup()){var t=this.parseStartEndInfo(a,e),l=t[0],d=t[1],c="baidumap://map/direction?mode=walking&origin="+encodeURIComponent(l)+"&destination="+encodeURIComponent(d)+"&coord_type=bd09mc&src=webapp.default.all.callnatoherewalking";o.canUseUniversalLink()?o.callNAbyUniversalLink(i,c):o.callNA(c,{forbidDownLoad:!0}),r.addStat(COM_PB_STAT.CALLNA_TOHERE_WALKING)}},callCycle:function(n,a,e,i){if(this.isPermitCallup()){var t=this.parseStartEndInfo(a,e),l=t[0],d=t[1],c="baidumap://map/direction?mode=riding&origin="+encodeURIComponent(l)+"&destination="+encodeURIComponent(d)+"&coord_type=bd09mc&src=webapp.default.all.callnatohereriding";o.canUseUniversalLink()?o.callNAbyUniversalLink(i,c):o.callNA(c,{forbidDownLoad:!0}),r.addStat(COM_PB_STAT.CALLNA_TOHERE_RIDING)}},isPermitCallup:function(){var n=navigator.userAgent;return/iphone os ([0-9]+)_/i.test(n)&&parseInt(RegExp.$1,10)>=9?!0:/Weibo/i.test(n)||/MicroMessenger/i.test(n)?!1:!0}};e.exports=c});
;define("common:widget/callnastreetscape/callnastreetscape.js",function(e,t,a){"use strict";var i=e("common:widget/util/native-util.js"),n=e("mapapi:widget/api/bmap/common/DataRequest.js"),p=e("mapapi:widget/api/bmap/streetview/StreetViewUtil.js"),r=e("core:widget/url/url.js"),o=e("core:widget/stat/pbstat.js"),s="http://pcsv0.map.bdimg.com/scape/",d={gotoNaStreetScape:function(e,t){var a=/iPhone/i.test(navigator.userAgent),n=t.stat||"",p="baidumap://map/component?target=street_scape_page&from_source=share&comName=streetscape&src=webapp.default.all."+n+"&",r={};if(t&&"indexMap"===t.from)r=this.getParamFormIndexMap(e),r.pid&&r.panotype&&(a?p+="param="+encodeURIComponent(JSON.stringify(r)):(r.panoid=r.pid,p+=$.param(r)),i.canUseUniversalLink()?i.callNAbyUniversalLink(e,p):i.callNA(p,{forbidDownLoad:!0}));else if(r=this.getParam(e),r.uid&&r.panotype){var t=r;if(a)"inter"===r.panotype?r={uid:r.uid,panotype:"inter"}:"street"===r.panotype&&(r={uid:r.uid,panotype:"street"}),p+="param="+encodeURIComponent(JSON.stringify(r)),i.canUseUniversalLink()?i.callNAbyUniversalLink(e,p):i.callNA(p,{forbidDownLoad:!0});else{var s=function(t){var a=t&&t.content&&t.content[0]&&t.content[0].poiinfo;a&&("inter"===r.panotype?r={pid:a.interstartpid,panoid:a.interstartpid,panotype:"inter",iid:a.IID}:"street"===r.panotype&&(r={pid:a.PID,panoid:a.PID,panotype:"street"}),p+=$.param(r),i.canUseUniversalLink()?i.callNAbyUniversalLink(e,p):i.callNA(p,{forbidDownLoad:!0}))};this.getStreetScapeInfo(s,t)}}n&&o.addStat(n)},getParam:function(e){if(e&&"string"==typeof e){var t=/.*(\/mobile\/webapp\/.*)/;t.test(e)&&(e=RegExp.$1);var a={path:e},i=r.get(a).query||{},n={uid:i.ss_id||"",panotype:i.ss_panoType||""};return n}},getParamFormIndexMap:function(e){if(e&&"string"==typeof e){var t=/.*(\/mobile\/webapp\/.*)/;t.test(e)&&(e=RegExp.$1);var a={path:e},i=r.get(a).query||{},n={pid:i.pid,panotype:"street"};return n}},getStreetScapeInfo:function(e,t){var a=(1e5*Math.random()).toFixed(0);window._rd=window._rd||{},window._rd["_cbk"+a]=function(t){e&&e(t),delete window._rd["_cbk"+a]};var i=s+"?udt="+p.getUDT()+"&qt=poicb&uid="+t.uid;i+="&fn=window._rd._cbk"+a,n.request(i)}};a.exports=d});