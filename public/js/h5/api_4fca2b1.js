define("mapapi:static/js/lib/tangram.js",function(t,e,n){var o,r=o=r||{version:"1.3.4"};r.guid="$BAIDU$",window[r.guid]=window[r.guid]||{},r.object=r.object||{},r.extend=r.object.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r.dom=r.dom||{},r.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},r.g=r.G=r.dom.g,r.dom.hide=function(t){return t=r.dom.g(t),t.style.display="none",t},r.hide=r.dom.hide,r.lang=r.lang||{},r.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},r.isString=r.lang.isString,r.dom._g=function(t){return r.lang.isString(t)?document.getElementById(t):t},r._g=r.dom._g,r.dom.contains=function(t,e){var n=r.dom._g;return t=n(t),e=n(e),t.contains?t!=e&&t.contains(e):!!(16&t.compareDocumentPosition(e))},r.browser=r.browser||{},r.dom._NAME_ATTRS=function(){var t={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};return t.htmlFor="for",t.className="class",t}(),r.dom.setAttr=function(t,e,n){return t=r.dom.g(t),"style"==e?t.style.cssText=n:(e=r.dom._NAME_ATTRS[e]||e,t.setAttribute(e,n)),t},r.setAttr=r.dom.setAttr,r.dom.setAttrs=function(t,e){t=r.dom.g(t);for(var n in e)r.dom.setAttr(t,n,e[n]);return t},r.setAttrs=r.dom.setAttrs,r.string=r.string||{},r.dom.removeClass=function(t,e){t=r.dom.g(t);for(var n,o,i=t.className.split(/\s+/),s=e.split(/\s+/),a=s.length,l=0;a>l;++l)for(o=0,n=i.length;n>o;++o)if(i[o]==s[l]){i.splice(o,1);break}return t.className=i.join(" "),t},r.removeClass=r.dom.removeClass,r.dom.insertHTML=function(t,e,n){t=r.dom.g(t);var o,i;return t.insertAdjacentHTML?t.insertAdjacentHTML(e,n):(o=t.ownerDocument.createRange(),e=e.toUpperCase(),"AFTERBEGIN"==e||"BEFOREEND"==e?(o.selectNodeContents(t),o.collapse("AFTERBEGIN"==e)):(i="BEFOREBEGIN"==e,o[i?"setStartBefore":"setEndAfter"](t),o.collapse(i)),o.insertNode(o.createContextualFragment(n))),t},r.insertHTML=r.dom.insertHTML,r.dom.show=function(t){return t=r.dom.g(t),t.style.display="",t},r.show=r.dom.show,r.dom.getDocument=function(t){return t=r.dom.g(t),9==t.nodeType?t:t.ownerDocument||t.document},r.dom.addClass=function(t,e){t=r.dom.g(t);for(var n=e.split(/\s+/),o=t.className,i=" "+o+" ",s=0,a=n.length;a>s;s++)i.indexOf(" "+n[s]+" ")<0&&(o+=" "+n[s]);return t.className=o,t},r.addClass=r.dom.addClass,r.dom._styleFixer=r.dom._styleFixer||{},r.dom._styleFilter=r.dom._styleFilter||[],r.dom._styleFilter.filter=function(t,e,n){for(var o,i=0,s=r.dom._styleFilter;o=s[i];i++)(o=o[n])&&(e=o(t,e));return e},r.string.toCamelCase=function(t){return t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})},r.dom.getStyle=function(t,e){var n=r.dom;t=n.g(t),e=r.string.toCamelCase(e);var o=t.style[e];if(!o){var i=n._styleFixer[e],s=t.currentStyle||getComputedStyle(t,null);o=i&&i.get?i.get(t,s):s[i||e]}return(i=n._styleFilter)&&(o=i.filter(e,o,"get")),o},r.getStyle=r.dom.getStyle,/opera\/(\d+\.\d)/i.test(navigator.userAgent)&&(r.browser.opera=+RegExp.$1),r.browser.isWebkit=/webkit/i.test(navigator.userAgent),r.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),r.browser.isStrict="CSS1Compat"==document.compatMode,r.dom.getPosition=function(t){t=r.dom.g(t);var e,n,o=r.dom.getDocument(t),i=r.browser,s=r.dom.getStyle,a=(i.isGecko>0&&o.getBoxObjectFor&&"absolute"==s(t,"position")&&(""===t.style.top||""===t.style.left),{left:0,top:0}),l=i.ie&&!i.isStrict?o.body:o.documentElement;if(t==l)return a;if(t.getBoundingClientRect){n=t.getBoundingClientRect(),a.left=Math.floor(n.left)+Math.max(o.documentElement.scrollLeft,o.body.scrollLeft),a.top=Math.floor(n.top)+Math.max(o.documentElement.scrollTop,o.body.scrollTop),a.left-=o.documentElement.clientLeft,a.top-=o.documentElement.clientTop;var d=o.body,c=parseInt(s(d,"borderLeftWidth")),g=parseInt(s(d,"borderTopWidth"));i.ie&&!i.isStrict&&(a.left-=isNaN(c)?2:c,a.top-=isNaN(g)?2:g)}else{e=t;do{if(a.left+=e.offsetLeft,a.top+=e.offsetTop,i.isWebkit>0&&"fixed"==s(e,"position")){a.left+=o.body.scrollLeft,a.top+=o.body.scrollTop;break}e=e.offsetParent}while(e&&e!=t);for((i.opera>0||i.isWebkit>0&&"absolute"==s(t,"position"))&&(a.top-=o.body.offsetTop),e=t.offsetParent;e&&e!=o.body;)a.left-=e.scrollLeft,i.opera&&"TR"==e.tagName||(a.top-=e.scrollTop),e=e.offsetParent}return a},/firefox\/(\d+\.\d)/i.test(navigator.userAgent)&&(r.browser.firefox=+RegExp.$1),function(){var t=navigator.userAgent;/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(t)&&!/chrome/i.test(t)&&(r.browser.safari=+(RegExp.$1||RegExp.$2))}(),/chrome\/(\d+\.\d)/i.test(navigator.userAgent)&&(r.browser.chrome=+RegExp.$1),r.array=r.array||{},r.array.each=function(t,e){var n,o,r,i=t.length;if("function"==typeof e)for(r=0;i>r&&(o=t[r],n=e.call(t,o,r),n!==!1);r++);return t},r.each=r.array.each,r.lang.guid=function(){return"TANGRAM__"+(window[r.guid]._counter++).toString(36)},window[r.guid]._counter=window[r.guid]._counter||1,window[r.guid]._instances=window[r.guid]._instances||{},r.lang.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},r.lang.isNumber=function(t){return"[object Number]"==Object.prototype.toString.call(t)},r.lang.Class=function(t){this.guid=t||r.lang.guid(),window[r.guid]._instances[this.guid]=this},window[r.guid]._instances=window[r.guid]._instances||{},r.lang.Class.prototype.dispose=function(){delete window[r.guid]._instances[this.guid];for(var t in this)r.lang.isFunction(this[t])||delete this[t];this.disposed=!0},r.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},r.lang.Event=function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=null},r.lang.Class.prototype.addEventListener=function(t,e,n){if(r.lang.isFunction(e)){!this.__listeners&&(this.__listeners={});var o,i=this.__listeners;if("string"==typeof n&&n){if(/[^\w\-]/.test(n))throw"nonstandard key:"+n;e.hashCode=n,o=n}0!=t.indexOf("on")&&(t="on"+t),"object"!=typeof i[t]&&(i[t]={}),o=o||r.lang.guid(),e.hashCode=o,i[t][o]=e}},r.lang.Class.prototype.removeEventListener=function(t,e){if(r.lang.isFunction(e))e=e.hashCode;else if(!r.lang.isString(e))return;!this.__listeners&&(this.__listeners={}),0!=t.indexOf("on")&&(t="on"+t);var n=this.__listeners;n[t]&&n[t][e]&&delete n[t][e]},r.lang.Class.prototype.dispatchEvent=function(t,e){r.lang.isString(t)&&(t=new r.lang.Event(t)),!this.__listeners&&(this.__listeners={}),e=e||{};for(var n in e)t[n]=e[n];var n,o=this.__listeners,i=t.type;if(t.target=t.target||this,t.currentTarget=this,0!=i.indexOf("on")&&(i="on"+i),r.lang.isFunction(this[i])&&this[i].apply(this,arguments),"object"==typeof o[i])for(n in o[i])o[i][n].apply(this,arguments);return t.returnValue},r.lang.inherits=function(t,e,n){var o,r,i=t.prototype,s=new Function;s.prototype=e.prototype,r=t.prototype=new s;for(o in i)r[o]=i[o];t.prototype.constructor=t,t.superClass=e.prototype,"string"==typeof n&&(r._className=n)},r.inherits=r.lang.inherits,r.lang.instance=function(t){return window[r.guid]._instances[t]||null},n.exports=r});
;define("mapapi:static/js/lib/tangram-patch.js",function(e,t,n){var a=e("mapapi:static/js/lib/tangram.js");a.platform=a.platform||{},a.platform.isAndroid=/android/i.test(navigator.userAgent),/android (\d+\.\d)/i.test(navigator.userAgent)&&(a.platform.android=a.android=RegExp.$1),a.platform.isIpad=/ipad/i.test(navigator.userAgent),a.platform.isIphone=/iphone/i.test(navigator.userAgent),a.platform.iosVersion=/iphone os (\d)\_/i.test(navigator.userAgent)?+RegExp.$1:0,a.lang.Event.prototype.inherit=function(e){var t=this;if(this.domEvent=e=window.event||e,t.clientX=e.clientX||e.pageX,t.clientY=e.clientY||e.pageY,t.offsetX=e.offsetX||e.layerX,t.offsetY=e.offsetY||e.layerY,t.screenX=e.screenX,t.screenY=e.screenY,t.ctrlKey=e.ctrlKey||e.metaKey,t.shiftKey=e.shiftKey,t.altKey=e.altKey,e.touches){t.touches=[];for(var n=0;n<e.touches.length;n++)t.touches.push({clientX:e.touches[n].clientX,clientY:e.touches[n].clientY,screenX:e.touches[n].screenX,screenY:e.touches[n].screenY,pageX:e.touches[n].pageX,pageY:e.touches[n].pageY,target:e.touches[n].target,identifier:e.touches[n].identifier})}if(e.changedTouches){t.changedTouches=[];for(var n=0;n<e.changedTouches.length;n++)t.changedTouches.push({clientX:e.changedTouches[n].clientX,clientY:e.changedTouches[n].clientY,screenX:e.changedTouches[n].screenX,screenY:e.changedTouches[n].screenY,pageX:e.changedTouches[n].pageX,pageY:e.changedTouches[n].pageY,target:e.changedTouches[n].target,identifier:e.changedTouches[n].identifier})}if(e.targetTouches){t.targetTouches=[];for(var n=0;n<e.targetTouches.length;n++)t.targetTouches.push({clientX:e.targetTouches[n].clientX,clientY:e.targetTouches[n].clientY,screenX:e.targetTouches[n].screenX,screenY:e.targetTouches[n].screenY,pageX:e.targetTouches[n].pageX,pageY:e.targetTouches[n].pageY,target:e.targetTouches[n].target,identifier:e.targetTouches[n].identifier})}return t.rotation=e.rotation,t.scale=e.scale,t},a.lang.decontrol=function(e){var t=window[a.guid];t._instances&&delete t._instances[e]},a.event={},a.on=a.event.on=function(e,t,n){return(e=a.g(e))?(t=t.replace(/^on/,""),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),e):e},a.un=a.event.un=function(e,t,n){return(e=a.g(e))?(t=t.replace(/^on/,""),e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n),e):e},a.dom.hasClass=function(e,t){if(!e||!e.className||"string"!=typeof e.className)return!1;var n=-1;try{n=e.className==t||e.className.indexOf(t)}catch(a){return!1}return n>-1},n.exports=a});
;define("mapapi:widget/api/BMap.js",function(e,t,i){var s=s||{};s._register=[],s.register=function(e){this._register.push(e)},s._streetViewRegister=[],s.streetViewRegister=function(e){this._streetViewRegister.push(e)},i.exports=s});
;define("mapapi:widget/api/bmap/Map.js",function(e,t,i){function o(t,i){if(t=n.g(t)){var r=this;n.lang.Class.call(r),r.config={clickInterval:200,enableDragging:!0,enableDblclickZoom:!0,enableMouseDown:!0,enablePinchToZoom:!0,enableAutoResize:!0,fps:25,actionDuration:450,minZoom:3,maxZoom:18,mapType:new s("地图",f,{tips:"显示普通地图",mapInstance:this}),enableInertialDragging:!1,drawer:BMAP_SYS_DRAWER,drawMargin:100,enableHighResolution:!1,devicePixelRatio:window.devicePixelRatio||2,vectorMapLevel:3,fixCenterWhenPinch:!1,fixCenterWhenResize:!1,trafficStatus:!1},n.extend(r.config,i||{}),r.config.devicePixelRatio>2&&(r.config.devicePixelRatio=2),r.container=t,r._setStyle(t),t.unselectable="on",t.innerHTML="",t.appendChild(r.render());var l=r.getSize();r.width=l.width,r.height=l.height,r.offsetX=0,r.offsetY=0,r.platform=t.firstChild,r.preWebkitTransform="",r.maskLayer=r.platform.firstChild,r.maskLayer.style.width=r.width+"px",r.maskLayer.style.height=r.height+"px",r._panes={},r.centerPoint=new p(0,0),r.mercatorCenter=new p(0,0),r.zoomLevel=1,r.lastLevel=0,r.defaultZoomLevel=null,r.defaultCenter=null,r._hotspots={},r.currentOperation=0,i=i||{};var h=r.mapType=r.config.mapType;r.projection=h.getProjection();var c=r.config;c.userMinZoom=i.minZoom,c.userMaxZoom=i.maxZoom,r._checkZoom(),r.temp={operating:!1,arrow:0,lastDomMoveTime:0,lastLoadTileTime:0,lastMovingTime:0,canKeyboard:!1,registerIndex:-1,curSpots:[]};for(var m=0;m<a._register.length;m++)a._register[m](r);r.temp.registerIndex=m,r._bind(),r.implLoaded||e.async("mapapi:widget/api/bmap/Map_Impl.js",function(e){n.object.extend(o.prototype,e),r._draw()}),r.touchLoaded||e.async(["mapapi:widget/api/bmap/operation/touch.js"],function(){r._asyncRegister(),r.touchLoaded=!0}),t=null,r.enableLoadTiles=!0,r._viewTiles=[]}}var n=e("mapapi:static/js/lib/tangram-patch.js"),a=e("mapapi:widget/api/BMap.js"),s=(e("mapapi:widget/api/bmap/layer/TileMgr.js"),e("mapapi:widget/api/bmap/common/MapType.js")),r=e("mapapi:widget/api/bmap/common/Pixel.js"),l=e("mapapi:widget/api/bmap/common/Size.js"),h=e("mapapi:widget/api/bmap/common/ApiUtil.js"),c=e("mapapi:widget/api/bmap/overlay/OverlayInternal.js"),m=e("mapapi:widget/api/bmap/geo/Bounds.js"),p=e("mapapi:widget/api/bmap/geo/Point.js"),g=e("mapapi:widget/api/bmap/hotspot/Hotspot.js"),f=e("mapapi:widget/api/bmap/layer/NormalMapTileLayer.js"),u=n.lang.Event;n.lang.inherits(o,n.lang.Class,"Map"),n.extend(o.prototype,{render:function(){var e=h.create("div"),t=e.style;t.overflow="visible",t.position="absolute",t.zIndex="0",t.top=t.left="0px";var i=h.create("div",{"class":"BMap_mask"}),o=i.style;return o.position="absolute",o.top=o.left="0px",o.zIndex="9",o.overflow="hidden",o.WebkitUserSelect="none",e.appendChild(i),e},_setStyle:function(e){var t=e.style;t.overflow="hidden","absolute"!=h.getCurrentStyle(e).position&&(t.position="relative",t.zIndex=0),t.backgroundColor="#F5F3F0",t.color="#000",t.textAlign="left"},_bind:function(){var e=this;e._watchSize=function(){var t=e.getSize();if(e.width!==t.width||e.height!==t.height||e._labelCanvas&&parseInt(e._labelCanvas.style.height,10)!==t.height){var i=new l(e.width,e.height),o=new u("onbeforeresize");o.size=i,e.dispatchEvent(o),e.config.fixCenterWhenResize||e._updateCenterPoint((t.width-e.width)/2,(t.height-e.height)/2),e.maskLayer.style.width=(e.width=t.width)+"px",e.maskLayer.style.height=(e.height=t.height)+"px";var n=new u("onresize");n.size=t,e.dispatchEvent(n)}var a=e.platform.style.WebkitTransform;""!=e.preWebkitTransform&&e.preWebkitTransform==a&&(a=e.platform.style.WebkitTransform=""),e.preWebkitTransform=a},e.config.enableAutoResize&&(e.temp.autoResizeTimer=setInterval(e._watchSize,1e3))},_updateCenterPoint:function(e,t,i,o){var n=this.getMapType().getZoomUnits(this.getZoom()),a=!0;i&&(this.centerPoint=new p(i.lng,i.lat),a=!1);var s=i&&o?i:this.mercatorCenter;s&&(this.mercatorCenter=new p(s.lng+e*n,s.lat-t*n),this.mercatorCenter&&a&&(this.centerPoint=this.mercatorCenter))},zoomTo:function(e,t){if(n.lang.isNumber(e)&&(e=this._getProperZoom(e).zoom,e!=this.zoomLevel)){this.lastLevel=this.zoomLevel,this.zoomLevel=e;var i;if(t&&(i=t),i){var o=this.pointToPixel(i,this.lastLevel);this._updateCenterPoint(this.width/2-o.x,this.height/2-o.y,i,!0)}this.dispatchEvent(new u("onzoomstart")),this.dispatchEvent(new u("onzoomstartcode"))}},setZoom:function(e){this.zoomTo(e)},zoomIn:function(e){this.zoomTo(this.zoomLevel+1,e)},zoomOut:function(e){this.zoomTo(this.zoomLevel-1,e)},panTo:function(e){e instanceof p&&(this.mercatorCenter=e,this.centerPoint=e?new p(e.lng,e.lat):this.mercatorCenter)},panBy:function(e,t){e=Math.round(e)||0,t=Math.round(t)||0,this._updateCenterPoint(-e,-t)},addControl:function(e){e&&n.lang.isFunction(e._i)&&(e._i(this),this.dispatchEvent(new u("onaddcontrol",e)))},removeControl:function(e){e&&n.lang.isFunction(e.remove)&&(e.remove(),this.dispatchEvent(new u("onremovecontrol",e)))},addOverlay:function(e){e&&n.lang.isFunction(e._i)&&(e._i(this),this.dispatchEvent(new u("onaddoverlay",e)))},removeOverlay:function(e){e&&n.lang.isFunction(e.remove)&&(e.remove(),this.dispatchEvent(new u("onremoveoverlay",e)))},clearOverlays:function(){this.dispatchEvent(new u("onclearoverlays"))},addTileLayer:function(e){e&&this.dispatchEvent(new u("onaddtilelayer",e))},removeTileLayer:function(e){e&&this.dispatchEvent(new u("onremovetilelayer",e))},setCenter:function(e){e.equals(this.centerPoint)||this.panTo(e,{noAnimation:!0})},centerAndZoom:function(e,t){var i=this;if(t=parseInt(t),e instanceof p&&t&&(t=i._getProperZoom(t).zoom,!e.equals(i.getCenter())||t!==i.getZoom())){i.lastLevel=i.zoomLevel||t,i.zoomLevel=t;var o=i.centerPoint;i.centerPoint=new p(e.lng,e.lat),i.mercatorCenter=i.centerPoint,i.defaultZoomLevel=i.defaultZoomLevel||i.zoomLevel,i.defaultCenter=i.defaultCenter||i.centerPoint;var n=new u("onload"),a=new u("onloadcode");n.point=new p(e.lng,e.lat),n.pixel=i.pointToPixel(i.centerPoint,i.zoomLevel),n.zoom=t,i.loaded||(i.loaded=!0,i.dispatchEvent(n)),i.dispatchEvent(a);var s=new u("onmoveend");if(s._eventSrc="centerAndZoom",o.equals(i.centerPoint)||i.dispatchEvent(s),i.lastLevel!=i.zoomLevel){var r=new u("onzoomend");r._eventSrc="centerAndZoom",i.dispatchEvent(r)}var l=new u("centerandzoom");i.dispatchEvent(l)}},reset:function(){this.centerAndZoom(this.defaultCenter,this.defaultZoomLevel,!0)},enableDragging:function(){this.config.enableDragging=!0},disableDragging:function(){this.config.enableDragging=!1},enableInertialDragging:function(){this.config.enableInertialDragging=!0},disableInertialDragging:function(){this.config.enableInertialDragging=!1},enableDoubleClickZoom:function(){this.config.enableDblclickZoom=!0},disableDoubleClickZoom:function(){this.config.enableDblclickZoom=!1},enablePinchToZoom:function(){this.config.enablePinchToZoom=!0},disablePinchToZoom:function(){this.config.enablePinchToZoom=!1},enableAutoResize:function(){this.config.enableAutoResize=!0,this._watchSize(),this.temp.autoResizeTimer||(this.temp.autoResizeTimer=setInterval(this._watchSize,1e3))},disableAutoResize:function(){this.config.enableAutoResize=!1,this.temp.autoResizeTimer&&(clearInterval(this.temp.autoResizeTimer),this.temp.autoResizeTimer=null)},getSize:function(){return new l(this.container.clientWidth,this.container.clientHeight)},getCenter:function(){return this.centerPoint},getZoom:function(){return this.zoomLevel},checkResize:function(){this._watchSize()},_getProperZoom:function(e){var t=this.config.minZoom,i=this.config.maxZoom,o=!1;return t>e&&(o=!0,e=t),e>i&&(o=!0,e=i),{zoom:e,exceeded:o}},getContainer:function(){return this.container},pointToPixel:function(e,t){return t=t||this.getZoom(),this.projection.pointToPixel(e,t,this.mercatorCenter,this.getSize())},pixelToPoint:function(e,t){return t=t||this.getZoom(),this.projection.pixelToPoint(e,t,this.mercatorCenter,this.getSize())},pointToOverlayPixel:function(e,t){if(e){var i=new p(e.lng,e.lat),o=this.pointToPixel(i,t);return o.x-=this.offsetX,o.y-=this.offsetY,o}},overlayPixelToPoint:function(e,t){if(e){var i=new r(e.x,e.y);return i.x+=this.offsetX,i.y+=this.offsetY,this.pixelToPoint(i,t)}},getBounds:function(){if(!this.isLoaded())return new m;var e=this.getSize();this.width=e.width,this.height=e.height;var t=arguments[0]||{},i=t.margins||[0,0,0,0],o=t.zoom||null,n=this.pixelToPoint({x:i[3],y:this.height-i[2]},o),a=this.pixelToPoint({x:this.width-i[1],y:i[0]},o);return new m(n,a)},isLoaded:function(){return!!this.loaded},_getBestLevel:function(e,t){for(var i=this.getMapType(),o=t.margins||[10,10,10,10],n=t.zoomFactor||0,a=o[1]+o[3],s=o[0]+o[2],r=i.getMinZoom(),l=i.getMaxZoom(),h=l;h>=r;h--){var c=this.getMapType().getZoomUnits(h);if(e.toSpan().lng/c<this.width-a&&e.toSpan().lat/c<this.height-s)break}return h+=n,r>h&&(h=r),h>l&&(h=l),h},getViewport:function(e,t){var i={center:this.getCenter(),zoom:this.getZoom()};if(!e||!e instanceof m&&0==e.length||e instanceof m&&e.isEmpty())return i;var o=[];e instanceof m?(o.push(e.getNorthEast()),o.push(e.getSouthWest())):o=e.slice(0),t=t||{};for(var n=[],a=0,s=o.length;s>a;a++)n.push(o[a]);for(var r=new m,a=n.length-1;a>=0;a--)r.extend(n[a]);if(r.isEmpty())return i;var l=r.getCenter(),h=this._getBestLevel(r,t);if(t.margins){var c=t.margins,p=(c[1]-c[3])/2,g=(c[0]-c[2])/2,f=this.getMapType().getZoomUnits(h);l.lng=l.lng+f*p,l.lat=l.lat+f*g}return{center:l,zoom:h}},setViewport:function(e,t){var i;i=e&&e.center?e:this.getViewport(e,t),t=t||{};var o=t.delay||200;if(i.zoom==this.zoomLevel&&0!=t.enableAnimation){var n=this;setTimeout(function(){n.panTo(i.center,{duration:210})},o)}else this.centerAndZoom(i.center,i.zoom)},getPanes:function(){return this._panes},getOverlays:function(){var e=[],t=this._overlays,i=this._customOverlays;if(t)for(var o in t)t[o]instanceof c&&e.push(t[o]);if(i)for(var o=0,n=i.length;n>o;o++)e.push(i[o]);return e},getMapType:function(){return this.mapType},_asyncRegister:function(){for(var e=this.temp.registerIndex;e<a._register.length;e++)a._register[e](this);this.temp.registerIndex=e},highResolutionEnabled:function(){return this.config.enableHighResolution&&window.devicePixelRatio>1},enableHighResolution:function(){this.config.enableHighResolution=!0},disableHighResolution:function(){this.config.enableHighResolution=!1},addHotspot:function(e){e instanceof g&&(this._hotspots[e.guid]=e,e.initialize(this));var t=this;t._asyncRegister()},removeHotspot:function(e){this._hotspots[e.guid]&&delete this._hotspots[e.guid]},clearHotspots:function(){this._hotspots={}},_checkZoom:function(){var e=this.mapType.getMinZoom(),t=this.mapType.getMaxZoom(),i=this.config;i.minZoom=i.userMinZoom||e,i.maxZoom=i.userMaxZoom||t,i.minZoom<e&&(i.minZoom=e),i.maxZoom>t&&(i.maxZoom=t)},setMinZoom:function(e){e>this.config.maxZoom&&(e=this.config.maxZoom),this.config.userMinZoom=e,this._updateZoom()},setMaxZoom:function(e){e<this.config.minZoom&&(e=this.config.minZoom),this.config.userMaxZoom=e,this._updateZoom()},_updateZoom:function(){this._checkZoom();var e=this.config;this.zoomLevel<e.minZoom?this.setZoom(e.minZoom):this.zoomLevel>e.maxZoom&&this.setZoom(e.maxZoom);var t=new u("onzoomspanchange");t.minZoom=e.minZoom,t.maxZoom=e.maxZoom,this.dispatchEvent(t)},getViewTiles:function(){return this._viewTiles},vectorMapEnabled:function(){return 99!=this.config.vectorMapLevel},setTrafficOn:function(){this.config.trafficStatus=!0,this.tileMgr.setRasterTrafficStatus(),this.tileMgr.setVectorTrafficStatus()},setTrafficOff:function(){this.config.trafficStatus=!1,this.tileMgr.setRasterTrafficStatus(),this.tileMgr.setVectorTrafficStatus()},showOverlayContainer:function(){this.overlayDiv&&(this.overlayDiv.style.visibility="",this.overlayDiv.style.zIndex=200)},hideOverlayContainer:function(){this.overlayDiv&&(this.overlayDiv.style.visibility="hidden",this.overlayDiv.style.zIndex=0)}}),window.BMAP_SYS_DRAWER=0,window.BMAP_SVG_DRAWER=1,window.BMAP_CANVAS_DRAWER=3,i.exports=o});
;define("mapapi:widget/api/bmap/common/Transitions.js",function(n,e,t){var u={linear:function(n){return n},reverse:function(n){return 1-n},easeInQuad:function(n){return n*n},easeInCubic:function(n){return Math.pow(n,3)},easeOutQuad:function(n){return-(n*(n-2))},easeOutCubic:function(n){return Math.pow(n-1,3)+1},easeInOutQuad:function(n){return.5>n?n*n*2:-2*(n-2)*n-1},easeInOutCubic:function(n){return.5>n?4*Math.pow(n,3):4*Math.pow(n-1,3)+1},easeInOutSine:function(n){return(1-Math.cos(Math.PI*n))/2}};u["ease-in"]=u.easeInQuad,u["ease-out"]=u.easeOutQuad,t.exports=u});
;define("mapapi:widget/api/bmap/common/Animation.js",function(i,t,n){function e(i){var t={duration:1e3,fps:30,delay:0,transition:a.linear,onStop:function(){}};if(this._anis=[],i)for(var n in i)t[n]=i[n];if(this._opts=t,s.lang.isNumber(t.delay)){var o=this;setTimeout(function(){o.start()},t.delay)}else t.delay!=e.INFINITE&&this.start()}var s=i("mapapi:static/js/lib/tangram-patch.js"),o=i("mapapi:widget/api/bmap/common/ApiUtil.js"),a=i("mapapi:widget/api/bmap/common/Transitions.js");e.INFINITE="INFINITE",e.prototype.start=function(){if(window.requestAnimationFrame){var i=this;i._timer=window.requestAnimationFrame(function(t){i._loop(t)})}else this._beginTime=o.getCurrentTime(),this._endTime=this._beginTime+this._opts.duration,this._loop()},e.prototype._loop=function(){var i=this,t=o.getCurrentTime();return this._beginTime||(this._beginTime=t,this._endTime=this._beginTime+this._opts.duration),t>=i._endTime?(s.lang.isFunction(i._opts.render)&&i._opts.render(i._opts.transition(1)),void(s.lang.isFunction(i._opts.finish)&&i._opts.finish())):(i.schedule=i._opts.transition((t-i._beginTime)/i._opts.duration),s.lang.isFunction(i._opts.render)&&i._opts.render(i.schedule),void(i.terminative||(i._timer=window.requestAnimationFrame?requestAnimationFrame(function(t){i._loop(t)}):setTimeout(function(){i._loop()},1e3/i._opts.fps))))},e.prototype.stop=function(i){this.terminative=!0;for(var t=0;t<this._anis.length;t++)this._anis[t].stop(),this._anis[t]=null;this._anis.length=0,this._timer&&(window.cancelAnimationFrame?cancelAnimationFrame(this._timer):clearTimeout(this._timer),this._timer=null),this._opts.onStop(this.schedule),i&&(this._endTime=this._beginTime,this._loop())},n.exports=e});
;define("mapapi:widget/api/bmap/common/MapConfig.js",function(a,i,m){var e={imgPath:"//map.baidu.com/res_mobile2/images/"};m.exports=e});
;define("mapapi:widget/api/bmap/common/ApiUtil.js",function(t,e,n){var o=t("mapapi:static/js/lib/tangram-patch.js"),r=t("mapapi:widget/api/bmap/common/Pixel.js"),a={setPosition:function(t,e){var n=t.style;n.left=e[0]+"px",n.top=e[1]+"px"},setUnSelectable:function(t){t.style.MozUserSelect="none"},isInDocument:function(t){return t&&t.parentNode&&11!=t.parentNode.nodeType},beforeEndHTML:function(t,e){return o.dom.insertHTML(t,"beforeEnd",e),t.lastChild},getPosition:function(t){for(var e={left:0,top:0};t&&t.offsetParent;)e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;return e},stopBubble:function(t){var t=window.event||t;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},preventDefault:function(t){var t=window.event||t;return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},stopAndPrevent:function(t){return this.stopBubble(t),this.preventDefault(t)},getScroll:function(){var t=document.documentElement,e=document.body;return t&&(t.scrollTop||t.scrollLeft)?[t.scrollTop,t.scrollLeft]:e?[e.scrollTop,e.scrollLeft]:[0,0]},getDistanceByPixel:function(t,e){return t&&e?Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))):void 0},create:function(t,e,n){var r=document.createElement(t);return n&&(r=document.createElementNS(n,t)),o.dom.setAttrs(r,e||{})},getCurrentStyle:function(t){return t.currentStyle?t.currentStyle:t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):void 0},isDefined:function(t){return"undefined"!=typeof t},isSupportSvg:function(){return"boolean"!=typeof this.isSupportSvg.result&&(this.isSupportSvg.result=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")),this.isSupportSvg.result},isSupportCanvas:function(){return"boolean"!=typeof this.isSupportCanvas.result&&(this.isSupportCanvas.result=!!this.create("canvas").getContext),this.isSupportCanvas.result},toRadian:function(t){return t*Math.PI/180},toAngle:function(t){return t/Math.PI*180},isMobile:function(){return!!(o.platform.isIphone||o.platform.isIpad||o.platform.isAndroid)},getCurrentTime:function(){return(new Date).getTime()},isAndroid23More:function(){return o.platform.isAndroid&&parseFloat(o.platform.android)>2.3?!0:!1},cohenSutherlandLineClip:function(t,e,n){var o,a,l,i=!1,u=!1,s=!1,c=new r(t.x,t.y),p=new r(e.x,e.y),f=this.calcOutcode(c,n),d=this.calcOutcode(p,n),h=n.minX,m=n.minY,g=n.maxX,v=n.maxY;do 0==f.all&&0==d.all?(i=!0,s=!0):0!=(f.all&d.all)?s=!0:(o=0!=f.all?f:d,o.top?(a=c.x+(p.x-c.x)*(m-c.y)/(p.y-c.y),l=m):o.bottom?(a=c.x+(p.x-c.x)*(v-c.y)/(p.y-c.y),l=v):o.right?(l=c.y+(p.y-c.y)*(g-c.x)/(p.x-c.x),a=g):o.left&&(l=c.y+(p.y-c.y)*(h-c.x)/(p.x-c.x),a=h),u=!0,o.all==f.all?(c.x=Math.round(a),c.y=Math.round(l),f=this.calcOutcode(c,n)):(p.x=Math.round(a),p.y=Math.round(l),d=this.calcOutcode(p,n)));while(!s);return i?{pixel0:new r(c.x,c.y),pixel1:new r(p.x,p.y),clip:u?!0:!1}:void 0},calcOutcode:function(t,e){var n={top:0,bottom:0,right:0,left:0,all:0},o=t.x,r=t.y;return r<e.minY?(n.top=8,n.all+=n.top):r>e.maxY&&(n.bottom=4,n.all+=n.bottom),o>e.maxX?(n.right=2,n.all+=n.right):o<e.minX&&(n.left=1,n.all+=n.left),n},douglasPeucker:function(t,e){if(0==e)return t;for(var n=0,o=0,r=1,a=t.length-1;a>r;r++){var l=this.getDistance(t[r],t[0],t[t.length-1]);l>n&&(o=r,n=l)}var i=[];if(n>=e){for(var u=t.slice(0,o),s=t.slice(o,t.length),c=this.douglasPeucker(u,e),p=this.douglasPeucker(s,e),r=0,a=c.length;a>r;r++)i.push(c[r]);for(var r=0,a=p.length;a>r;r++)i.push(p[r])}else i.push(t[0]),i.push(t[t.length-1]);return i},getDistance:function(t,e,n){var o=e.lng-n.lng,r=e.lat-n.lat;if(0==o)return Math.abs(t.lng-e.lng);if(0==r)return Math.abs(t.lat-e.lat);var a=r/o,l=e.lat-a*e.lng;return Math.abs(a*t.lng-t.lat+l)/Math.sqrt(a*a+1)}};n.exports=a});
;define("mapapi:widget/api/bmap/common/DataRequest.js",function(e,t,a){var i=e("mapapi:widget/api/bmap/common/ApiUtil.js"),n={request:function(e){var t=i.create("script",{src:e,type:"text/javascript",charset:"utf-8"});t.addEventListener("load",function(e){var t=e.target;t.parentNode.removeChild(t)},!1),document.getElementsByTagName("head")[0].appendChild(t),t=null}};a.exports=n});
;define("mapapi:widget/api/bmap/common/Pixel.js",function(i,t,n){function e(i,t){this.x=i||0,this.y=t||0}e.prototype.equals=function(i){return i&&i.x==this.x&&i.y==this.y},n.exports=e});
;define("mapapi:widget/api/bmap/common/Size.js",function(i,t,h){function e(i,t){this.width=i||0,this.height=t||0}e.prototype.equals=function(i){return i&&this.width==i.width&&this.height==i.height},h.exports=e});
;define("mapapi:widget/api/bmap/common/MapType.js",function(t,e,o){function i(t,e,o){this._name=t,this._layers=e instanceof s?[e]:e.slice(0),this._baseZoom=18,this._opts={tips:"",labelText:"",minZoom:3,maxZoom:19,tileSize:256,textColor:"black",errorImageUrl:"",projection:new r(this)},1==this._layers.length&&(this._layers[0].baseLayer=!0),n.extend(this._opts,o||{})}var n=t("mapapi:static/js/lib/tangram-patch.js"),r=t("mapapi:widget/api/bmap/geo/MercatorProjection.js"),s=t("mapapi:widget/api/bmap/layer/TileLayer.js");n.extend(i.prototype,{getName:function(){return this._name},getTips:function(){return this._opts.tips},getLabelText:function(){return this._opts.labelText},getTileLayer:function(){return this._layers[0]},getTileLayers:function(){return this._layers},getTileSize:function(){return this._opts.tileSize},getMinZoom:function(){return this._opts.minZoom},getMaxZoom:function(){return this._opts.maxZoom},getTextColor:function(){return this._opts.textColor},getProjection:function(){return this._opts.projection},getErrorImageUrl:function(){return this._opts.errorImageUrl},getZoomUnits:function(t){return Math.pow(2,this._baseZoom-t)},getZoomFactor:function(t){return this.getZoomUnits(t)*this.getTileSize()},getBaseZoom:function(){return this._baseZoom}}),o.exports=i});
;define("mapapi:widget/api/bmap/hotspot/Hotspot.js",function(t,i,o){function s(t,i){t&&(this._position=t,this.guid="spot"+s.guid++,i=i||{},this._text=i.text||"",this._offsets=i.offsets?i.offsets.slice(0):[5,5,5,5],this._userData=i.userData||null,this._minZoom=i.minZoom||null,this._maxZoom=i.maxZoom||null)}var e=t("mapapi:static/js/lib/tangram-patch.js"),n=t("mapapi:widget/api/BMap.js"),a=t("mapapi:widget/api/bmap/geo/Point.js"),p=t("mapapi:widget/api/bmap/overlay/Graph.js"),r=e.lang.Event;s.guid=0,e.extend(s.prototype,{initialize:function(t){null==this._minZoom&&(this._minZoom=t.config.minZoom),null==this._maxZoom&&(this._maxZoom=t.config.maxZoom)},setPosition:function(t){t instanceof a&&(this._position=t)},getPosition:function(){return this._position},setText:function(t){this._text=t},getText:function(){return this._text},setUserData:function(t){this._userData=t},getUserData:function(){return this._userData}}),n.register(function(t){function i(){t.temp.dragged&&t.temp.curSpots.length>0?t.temp.dragged=!1:t.temp.curSpots=[]}t.addEventListener("click",function(t){if(!t.overlay||t.overlay instanceof p){{var i=this.temp;i.curSpots.slice(0)}if(i.curSpots=[],this._hotspots)for(var o in this._hotspots){var s=this._hotspots[o];if(!(s._minZoom>this.getZoom()||s._maxZoom<this.getZoom())){var e=this.pointToPixel(s.getPosition());e.x<this.width&&e.y<this.height&&t.offsetX<e.x+s._offsets[1]&&t.offsetX>e.x-s._offsets[3]&&t.offsetY>e.y-s._offsets[0]&&t.offsetY<e.y+s._offsets[2]&&i.curSpots.push(s)}}var n=new r("onhotspotclick");n.spots=i.curSpots.slice(0),n.spots.sort(function(t,i){return t.getPosition().lat-i.getPosition().lat}),this.dispatchEvent(n)}}),t.addEventListener("load",i),t.addEventListener("moveend",i),t.addEventListener("zoomend",i),t.addEventListener("dragend",function(){this.temp.dragged=!0})}),o.exports=s});
;define("mapapi:widget/api/bmap/control/Control.js",function(t,i,n){function s(){this._map=null,this._container,this._type="control",this._visible=!0}var e=t("mapapi:static/js/lib/tangram-patch.js"),o=t("mapapi:widget/api/bmap/common/Size.js"),a=t("mapapi:widget/api/bmap/common/ApiUtil.js");e.lang.inherits(s,e.lang.Class,"Control"),e.extend(s.prototype,{initialize:function(t){return this._map=t,this._container?(t.container.appendChild(this._container),this._container):void 0},_i:function(t){!this._container&&this.initialize&&e.lang.isFunction(this.initialize)&&(this._container=this.initialize(t)),this._opts=this._opts||{printable:!1},this._setStyle(),this._setPosition(),this._container&&(this._container._jsobj=this)},_setStyle:function(){var t=this._container;if(t){var i=t.style;i.position="absolute",i.zIndex=this._container.style.zIndex||"10",i.MozUserSelect="none",i.WebkitTextSizeAdjust="none",this._opts.printable||e.dom.addClass(t,"BMap_noprint")}},remove:function(){this._map=null,this._container&&(this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container._jsobj=null,this._container=null)},_render:function(){return this._container=a.beforeEndHTML(this._map.container,"<div unselectable='on'></div>"),0==this._visible&&e.dom.hide(this._container),this._container},_setPosition:function(){this.setAnchor(this._opts.anchor)},setAnchor:function(t){(this.anchorFixed||!e.lang.isNumber(t)||isNaN(t)||BMAP_ANCHOR_TOP_LEFT>t||t>BMAP_ANCHOR_BOTTOM_RIGHT)&&(t=this.defaultAnchor),this._opts=this._opts||{printable:!1},this._opts.offset=this._opts.offset||this.defaultOffset;var i=this._opts.anchor;if(this._opts.anchor=t,this._container){var n=this._container,s=this._opts.offset.width,o=this._opts.offset.height;switch(n.firstChild.style.cssText="font-size:11px;line-height:18px;",n.style.left=n.style.top=n.style.right=n.style.bottom="auto",t){case BMAP_ANCHOR_TOP_LEFT:n.style.top=o+"px",n.style.left=s+"px";break;case BMAP_ANCHOR_TOP_RIGHT:n.style.top=o+"px",n.style.right=s+"px";break;case BMAP_ANCHOR_BOTTOM_LEFT:n.style.bottom=o+"px",n.style.left=s+"px";break;case BMAP_ANCHOR_BOTTOM_RIGHT:n.style.bottom=o+"px",n.style.right=s+"px"}var a=["TL","TR","BL","BR"];e.dom.removeClass(this._container,"anchor"+a[i]),e.dom.addClass(this._container,"anchor"+a[t])}},getAnchor:function(){return this._opts.anchor},setOffset:function(t){t instanceof o&&(this._opts=this._opts||{printable:!1},this._opts.offset=new o(t.width,t.height),this._container&&this.setAnchor(this._opts.anchor))},getOffset:function(){return this._opts.offset},getDom:function(){return this._container},show:function(){this._visible=!0,this._container&&e.dom.show(this._container)},hide:function(){this._visible=!1,this._container&&e.dom.hide(this._container)},isPrintable:function(){return!!this._opts.printable},isVisible:function(){return this._container||this._map?!!this._visible:!1}}),window.BMAP_ANCHOR_TOP_LEFT=0,window.BMAP_ANCHOR_TOP_RIGHT=1,window.BMAP_ANCHOR_BOTTOM_LEFT=2,window.BMAP_ANCHOR_BOTTOM_RIGHT=3,n.exports=s});
;define("mapapi:widget/api/bmap/control/ScaleControl.js",function(t,s,i){function e(t){a.call(this),t=t||{},this._opts={printable:!1},this._opts=o.object.extend(o.object.extend(this._opts,{color:"black",unit:"metric"}),t),this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT,this.defaultOffset=new n(81,18),this.setAnchor(t.anchor),this._units={metric:{name:"metric",conv:1,incon:1e3,u1:"米",u2:"公里"}},this._units[this._opts.unit]||(this._opts.unit="metric"),this._scaleText=null,this._numberArray={},this._asyncLoadCode()}var o=t("mapapi:static/js/lib/tangram-patch.js"),n=t("mapapi:widget/api/bmap/common/Size.js"),a=t("mapapi:widget/api/bmap/control/Control.js");window.BMAP_UNIT_METRIC="metric",o.lang.inherits(e,a,"ScaleControl"),o.object.extend(e.prototype,{initialize:function(t){return this._map=t,this._container},setColor:function(t){this._opts.color=t+""},getColor:function(){return this._opts.color},_asyncLoadCode:function(){var s=this;s.implLoaded||t.async(["mapapi:widget/api/bmap/control/ScaleControl_Impl.js"],function(t){o.object.extend(e.prototype,t),s._asyncDraw()})},setAnchor:function(t){(this.anchorFixed||!o.lang.isNumber(t)||isNaN(t)||BMAP_ANCHOR_TOP_LEFT>t||t>BMAP_ANCHOR_BOTTOM_RIGHT)&&(t=this.defaultAnchor),this._opts=this._opts||{printable:!1},this._opts.offset=this._opts.offset||this.defaultOffset;var s=this._opts.anchor;if(this._opts.anchor=t,this._container){var i=this._container,n=this._opts.offset.width,a=this._opts.offset.height;switch(this instanceof e&&this._map&&this._map.highResolutionEnabled()&&(i.childNodes[1].style.height="2px",i.childNodes[2].style.height="4px",i.childNodes[3].style.height="4px",i.style.height="19px"),i.firstChild.style.cssText="font-size:11px;line-height:18px;",i.style.left=i.style.top=i.style.right=i.style.bottom="auto",t){case BMAP_ANCHOR_TOP_LEFT:i.style.top=a+"px",i.style.left=n+"px";break;case BMAP_ANCHOR_TOP_RIGHT:i.style.top=a+"px",i.style.right=n+"px";break;case BMAP_ANCHOR_BOTTOM_LEFT:i.style.bottom=a+"px",i.style.left=n+"px";break;case BMAP_ANCHOR_BOTTOM_RIGHT:i.style.bottom=a+"px",i.style.right=n+"px"}var h=["TL","TR","BL","BR"];o.dom.removeClass(this._container,"anchor"+h[s]),o.dom.addClass(this._container,"anchor"+h[t])}}}),i.exports=e});
;define("mapapi:widget/api/bmap/geo/Bounds.js",function(t,s,n){function i(t,s){t&&!s&&(s=t),this._sw=this._ne=null,this._swLng=this._swLat=null,this._neLng=this._neLat=null,t&&(this._sw=new h(t.lng,t.lat),this._ne=new h(s.lng,s.lat),this._swLng=t.lng,this._swLat=t.lat,this._neLng=s.lng,this._neLat=s.lat)}var e=t("mapapi:static/js/lib/tangram-patch.js"),h=t("mapapi:widget/api/bmap/geo/Point.js");e.object.extend(i.prototype,{isEmpty:function(){return!this._sw||!this._ne},equals:function(t){return t instanceof i&&!this.isEmpty()?this.getSouthWest().equals(t.getSouthWest())&&this.getNorthEast().equals(t.getNorthEast()):!1},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getCenter:function(){return this.isEmpty()?null:new h((this._swLng+this._neLng)/2,(this._swLat+this._neLat)/2)},extend:function(t){if(t instanceof h){var s=t.lng,n=t.lat;this._sw||(this._sw=new h(0,0)),this._ne||(this._ne=new h(0,0)),(!this._swLng||this._swLng>s)&&(this._sw.lng=this._swLng=s),(!this._neLng||this._neLng<s)&&(this._ne.lng=this._neLng=s),(!this._swLat||this._swLat>n)&&(this._sw.lat=this._swLat=n),(!this._neLat||this._neLat<n)&&(this._ne.lat=this._neLat=n)}},toSpan:function(){return this.isEmpty()?new h(0,0):new h(Math.abs(this._neLng-this._swLng),Math.abs(this._neLat-this._swLat))}}),n.exports=i});
;define("mapapi:widget/api/bmap/geo/Point.js",function(t,a,i){function n(t,a){this.lng=parseFloat(t),this.lat=parseFloat(a)}n.prototype.equals=function(t){return t&&this.lat==t.lat&&this.lng==t.lng},i.exports=n});
;define("mapapi:widget/api/bmap/geo/MercatorProjection.js",function(t,i,a){function e(t){this._mapType=t}var n=t("mapapi:static/js/lib/tangram-patch.js"),p=t("mapapi:widget/api/bmap/common/Pixel.js"),o=t("mapapi:widget/api/bmap/geo/Point.js");n.extend(e.prototype,{pointToPixel:function(t,i,a,e){if(t){var n=this._mapType.getZoomUnits(i),o=Math.round((t.lng-a.lng)/n+e.width/2),m=Math.round((a.lat-t.lat)/n+e.height/2);return new p(o,m)}},pixelToPoint:function(t,i,a,e){if(t){var n=this._mapType.getZoomUnits(i),p=a.lng+n*(t.x-e.width/2),m=a.lat-n*(t.y-e.height/2),r=new o(p,m);return r}}}),a.exports=e});
;define("mapapi:widget/api/bmap/overlay/Overlay.js",function(e,i,t){function n(){this._type="overlay"}var a=e("mapapi:static/js/lib/tangram-patch.js"),o=e("mapapi:widget/api/BMap.js"),l=e("mapapi:widget/api/bmap/common/ApiUtil.js"),s=a.lang.Event;a.lang.inherits(n,a.lang.Class,"Overlay"),n.getZIndex=function(e){return e=1*e,e?-1e5*e<<1:0},a.extend(n.prototype,{_i:function(e){!this.domElement&&a.lang.isFunction(this.initialize)&&(this.domElement=this.initialize(e),this.domElement&&(this.domElement.style.WebkitUserSelect="none")),this.draw()},initialize:function(){throw"initialize方法未实现"},draw:function(){throw"draw方法未实现"},remove:function(){this.domElement&&this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=null,this.dispatchEvent(new s("onremove"))},hide:function(){this.domElement&&a.dom.hide(this.domElement)},show:function(){this.domElement&&a.dom.show(this.domElement)},isVisible:function(){return this.domElement?"none"==this.domElement.style.display||"hidden"==this.domElement.style.visibility?!1:!0:!1}}),o.register(function(e){function i(e,i){var t=l.create("div"),n=t.style;return n.position="absolute",n.top=n.left=n.width=n.height="0",n.zIndex=i,e.appendChild(t),t}var t=e.temp;t.overlayDiv=e.overlayDiv=i(e.platform,200),e._panes.floatPane=i(t.overlayDiv,800),e._panes.markerMouseTarget=i(t.overlayDiv,700),e._panes.floatShadow=i(t.overlayDiv,600),e._panes.labelPane=i(t.overlayDiv,500),e._panes.markerPane=i(t.overlayDiv,400),e._panes.markerShadow=i(t.overlayDiv,300),e._panes.mapPane=i(t.overlayDiv,200)}),t.exports=n});
;define("mapapi:widget/api/bmap/overlay/OverlayInternal.js",function(i,t,n){function e(){s.lang.Class.call(this),a.call(this),this.map=null,this._visible=!0,this._dblclickTime=0}var s=i("mapapi:static/js/lib/tangram-patch.js"),a=i("mapapi:widget/api/bmap/overlay/Overlay.js");s.lang.inherits(e,a,"OverlayInternal"),s.extend(e.prototype,{initialize:function(i){return this.map=i,s.lang.Class.call(this,this.guid),null},getMap:function(){return this.map},draw:function(){},remove:function(){this.map=null,s.lang.decontrol(this.guid),a.prototype.remove.call(this)},hide:function(){0!=this._visible&&(this._visible=!1)},show:function(){1!=this._visible&&(this._visible=!0)},isVisible:function(){return this.domElement?!!this._visible:!1},getContainer:function(){return this.domElement},setConfig:function(i){i=i||{};for(var t in i)this._config[t]=i[t]},setZIndex:function(i){this.zIndex=i},enableMassClear:function(){this._config.enableMassClear=!0},disableMassClear:function(){this._config.enableMassClear=!1}}),n.exports=e});
;define("mapapi:widget/api/bmap/overlay/OverlayMgr.js",function(e){function a(){this.map=null,this._overlays={},this._customOverlays=[]}var r=e("mapapi:static/js/lib/tangram-patch.js"),t=e("mapapi:widget/api/BMap.js"),s=e("mapapi:widget/api/bmap/overlay/OverlayInternal.js");t.register(function(e){var r=new a;r.map=e,e._overlays=r._overlays,e._customOverlays=r._customOverlays,e.addEventListener("moveend",function(e){"centerAndZoom"!=e._eventSrc&&r.draw(e)}),e.addEventListener("zoomend",function(e){"centerAndZoom"!=e._eventSrc&&r.draw(e)}),e.addEventListener("centerandzoom",function(e){r.draw(e)}),e.addEventListener("resize",function(e){r.draw(e)}),e.addEventListener("addoverlay",function(e){var a=e.target;if(a instanceof s)r._overlays[a.guid]||(r._overlays[a.guid]=a);else{for(var t=!1,n=0,o=r._customOverlays.length;o>n;n++)if(r._customOverlays[n]===a){t=!0;break}t||r._customOverlays.push(a)}}),e.addEventListener("removeoverlay",function(e){var a=e.target;if(a instanceof s)delete r._overlays[a.guid];else for(var t=0,n=r._customOverlays.length;n>t;t++)if(r._customOverlays[t]===a){r._customOverlays.splice(t,1);break}}),e.addEventListener("clearoverlays",function(){for(var e in r._overlays)r._overlays[e]._config.enableMassClear&&(r._overlays[e].remove(),delete r._overlays[e]);for(var a=0,t=r._customOverlays.length;t>a;a++)0!=r._customOverlays[a].enableMassClear&&(r._customOverlays[a].remove(),r._customOverlays[a]=null,r._customOverlays.splice(a,1),a--,t--)})}),a.prototype.draw=function(){var a=this;e.async(["mapapi:widget/api/bmap/overlay/Drawer/DrawerSelector_Impl.js"],function(e){if(e){var t=e.getDrawer(a.map);t.setPalette()}for(var s in a._overlays)a._overlays[s].draw();r.array.each(a._customOverlays,function(e){e.draw()})})}});
;define("mapapi:widget/api/bmap/overlay/Graph.js",function(t,i,e){function n(t){a.call(this),this._config={strokeColor:"#3a6bdb",strokeWeight:5,strokeOpacity:.65,strokeStyle:"solid",strokeLineCap:"round",strokeLineJoin:"round",enableMassClear:!0,getParseTolerance:null,getParseCacheIndex:null,enableParse:!0,clickable:!0},t=t||{},this.setConfig(t),this._config.strokeWeight<=0&&(this._config.strokeWeight=5),(this._config.strokeOpacity<0||this._config.strokeOpacity>1)&&(this._config.strokeOpacity=.65),"solid"!=this._config.strokeStyle&&"dashed"!=this._config.strokeStyle&&(this._config.strokeStyle="solid"),s.isDefined(t.enableClicking)&&(this._config.clickable=t.enableClicking),this.domElement=null,this._bounds=new r(0,0,0,0),this._parseCache=[],this._temp={}}var o=t("mapapi:static/js/lib/tangram-patch.js"),s=t("mapapi:widget/api/bmap/common/ApiUtil.js"),r=t("mapapi:widget/api/bmap/geo/Bounds.js"),a=t("mapapi:widget/api/bmap/overlay/OverlayInternal.js"),c=t("mapapi:widget/api/bmap/geo/Point.js");o.lang.inherits(n,a,"Graph"),n.getGraphPoints=function(t){var i=[];if(!t)return i;if(o.lang.isString(t)){var e=t.split(";");o.array.each(e,function(t){var e=t.split(",");i.push(new c(e[0],e[1]))})}return t.constructor==Array&&t.length>0&&(i=t),i},n.parseTolerance=[9e3,500,10,1],o.extend(n.prototype,{initialize:function(t){return this.map=t,null},draw:function(){},setPath:function(t){this._parseCache.length=0,this.points=n.getGraphPoints(t).slice(0),this._calcBounds()},_calcBounds:function(){if(this.points){var t=this;t._bounds=new r,o.array.each(this.points,function(i){t._bounds.extend(i)})}},getPath:function(){return this.points},setPositionAt:function(t,i){i&&this.points[t]&&(this._parseCache.length=0,this.points[t]=new c(i.lng,i.lat),this._calcBounds())},setStrokeColor:function(t){this._config.strokeColor=t},getStrokeColor:function(){return this._config.strokeColor},setStrokeWeight:function(t){t>0&&(this._config.strokeWeight=t)},getStrokeWeight:function(){return this._config.strokeWeight},setStrokeOpacity:function(t){!t||t>1||0>t||(this._config.strokeOpacity=t)},getStrokeOpacity:function(){return this._config.strokeOpacity},setStrokeStyle:function(t){("solid"==t||"dashed"==t)&&(this._config.strokeStyle=t)},getStrokeStyle:function(){return this._config.strokeStyle},setStrokeLineCap:function(t){this._config.strokeLineCap=t},getStrokeLineCap:function(){return this._config.strokeLineCap},setStrokeLineJoin:function(t){this._config.strokeLineJoin=t},getStrokeLineJoin:function(){return this._config.strokeLineJoin},setFillColor:function(t){this._config.fillColor=t||""},getBounds:function(){return this._bounds},remove:function(){a.prototype.remove.call(this),this._parseCache.length=0}}),e.exports=n});
;define("mapapi:widget/api/bmap/overlay/Icon.js",function(t,i,e){function n(t,i,e){if(t&&i){this.imageUrl=t,this.size=i;var n=new h(Math.floor(i.width/2),Math.floor(i.height/2)),s={anchor:n,imageOffset:new h(0,0)};e=e||{},a.extend(s,e),this.anchor=s.anchor,this.imageOffset=s.imageOffset,this.printImageUrl=e.printImageUrl||""}}var a=t("mapapi:static/js/lib/tangram-patch.js"),h=t("mapapi:widget/api/bmap/common/Size.js"),s=n.prototype;s.setImageUrl=function(t){t&&(this.imageUrl=t)},s.setPrintImageUrl=function(t){t&&(this.printImageUrl=t)},s.setSize=function(t){t&&(this.size=new h(t.width,t.height))},s.setAnchor=function(t){t&&(this.anchor=new h(t.width,t.height))},s.setImageOffset=function(t){t&&(this.imageOffset=new h(t.width,t.height))},s.toString=function(){return"Icon"},e.exports=n});
;define("mapapi:widget/api/bmap/overlay/Marker.js",function(i,t,n){function e(t,n){f.call(this),n=n||{},this.point=t,this.map=null,this._config={offset:new p(0,0),icon:g,shadow:m,title:"",baseZIndex:0,clickable:!0,zIndexFixed:!1,isTop:!1,enableMassClear:!0},this.setConfig(n),n.icon&&!n.shadow&&(this._config.shadow=null),s.isDefined(n.enableClicking)&&(this._config.clickable=n.enableClicking);var o=this;o.implLoaded||i.async(["mapapi:widget/api/bmap/overlay/OverlayInternal_Impl.js","mapapi:widget/api/bmap/overlay/Marker_Impl.js","mapapi:widget/api/bmap/overlay/Icon_Impl.js"],function(i,t,n){a.extend(f.prototype,i),a.extend(e.prototype,t),a.extend(c.prototype,n),o._draw()})}var a=i("mapapi:static/js/lib/tangram-patch.js"),o=i("mapapi:widget/api/bmap/common/MapConfig.js"),p=i("mapapi:widget/api/bmap/common/Size.js"),s=i("mapapi:widget/api/bmap/common/ApiUtil.js"),c=i("mapapi:widget/api/bmap/overlay/Icon.js"),f=(i("mapapi:widget/api/bmap/overlay/Overlay.js"),i("mapapi:widget/api/bmap/overlay/OverlayInternal.js")),r=i("mapapi:widget/api/bmap/geo/Point.js"),l=o.imgPath+"red_marker.png",g=new c(l,new p(19,25),{anchor:new p(10,25)}),m=new c(l,new p(20,11),{anchor:new p(6,11),imageOffset:new p(-19,-13)});a.lang.inherits(e,f,"Marker"),a.extend(e.prototype,{setIcon:function(i){i instanceof c&&(this._config.icon=i)},getIcon:function(){return this._config.icon},setShadow:function(i){i instanceof c&&(this._config.shadow=i)},getShadow:function(){return this._config.shadow},getPosition:function(){return this.point},setPosition:function(i){i instanceof r&&(this.point=new r(i.lng,i.lat))},setTop:function(i,t){this._config.isTop=!!i,i&&(this._addi=t||0)},setTitle:function(i){this._config.title=i+""},getTitle:function(){return this._config.title},setOffset:function(i){i instanceof p&&(this._config.offset=i)},getOffset:function(){return this._config.offset}}),n.exports=e});
;define("mapapi:widget/api/bmap/overlay/Polyline.js",function(a,p,e){function i(p,e){t.call(this,e),this.setPath(p);var m=this;m.implLoaded||a.async(["mapapi:widget/api/bmap/overlay/OverlayInternal_Impl.js","mapapi:widget/api/bmap/overlay/Marker_Impl.js","mapapi:widget/api/bmap/overlay/Icon_Impl.js","mapapi:widget/api/bmap/overlay/Graph_Impl.js","mapapi:widget/api/bmap/overlay/Polyline_Impl.js","mapapi:widget/api/bmap/overlay/Drawer/Drawer_Impl.js","mapapi:widget/api/bmap/overlay/Drawer/SvgDrawer_Impl.js","mapapi:widget/api/bmap/overlay/Drawer/CanvasDrawer_Impl.js","mapapi:widget/api/bmap/overlay/Drawer/DrawerSelector_Impl.js"],function(a,p,e,o,n){r.object.extend(l.prototype,a),r.object.extend(t.prototype,l.prototype),r.object.extend(t.prototype,o),r.object.extend(i.prototype,n),m._draw()})}var r=a("mapapi:static/js/lib/tangram-patch.js"),t=a("mapapi:widget/api/bmap/overlay/Graph.js"),l=a("mapapi:widget/api/bmap/overlay/OverlayInternal.js");r.lang.inherits(i,t,"Polyline"),e.exports=i});
;define("mapapi:widget/api/bmap/layer/TileMgr.js",function(e,i,t){function a(e){this.map=e,this.mapTypeLayers=[],this.tileLayers=[],this.bufferNumber=30,this.realBufferNumber=0,this.mapTiles={},this.bufferTiles={},this.numLoading=0,this.isFirstTile=!0,this.arrStatTraffic=[],this.isZooming=!1,this._mapTypeLayerContainer=this._createDiv(-1),this._vectorLayerContainer=this._createDiv(2),this._normalLayerContainer=this._createDiv(3),e.platform.appendChild(this._mapTypeLayerContainer),e.platform.appendChild(this._vectorLayerContainer),e.platform.appendChild(this._normalLayerContainer)}var r=e("mapapi:static/js/lib/tangram-patch.js"),n=e("mapapi:widget/api/BMap.js"),o=e("mapapi:widget/api/bmap/common/Transitions.js"),s=e("mapapi:widget/api/bmap/common/Animation.js"),l=e("mapapi:widget/api/bmap/common/Pixel.js"),d=e("mapapi:widget/api/bmap/common/Size.js"),p=e("mapapi:widget/api/bmap/common/ApiUtil.js"),m=e("mapapi:widget/api/bmap/vectormap/VectorMDLayer.js"),c=e("mapapi:widget/api/bmap/layer/RasterTrafficLayer.js"),h=e("mapapi:widget/api/bmap/layer/Tile.js"),f=e("mapapi:widget/api/bmap/layer/TileLayer.js"),v=e("mapapi:widget/api/bmap/geo/Point.js"),u=r.lang.Event;n.register(function(e){var i=new a(e);i.initialize(),e.tileMgr=i}),r.extend(a.prototype,{initialize:function(){var e=this,i=e.map;i.addEventListener("loadcode",function(){e.loadTiles()}),i.addEventListener("addtilelayer",function(i){e.addTileLayer(i)}),i.addEventListener("removetilelayer",function(i){e.removeTileLayer(i)}),i.addEventListener("zoomstartcode",function(){e._zoom()}),i.addEventListener("dblclick",function(i){e.dblClick(i)}),i.addEventListener("moving",function(){e.moveGridTiles()}),i.addEventListener("resize",function(){e.moveGridTiles()}),i.addEventListener("zoomend",function(i){e.setRasterTrafficStatus(i)}),e.addMapClickEvent()},loadTiles:function(){var i=this;if(i.lastZoom=i.map.getZoom(),i.loaded||i.initMapTypeTiles(),i.moveGridTiles(),i.map.vectorMapEnabled()&&!i.asyncLoaded)if(window.FeatureStyle&&window.iconSetInfo_high)e.async(["mapapi:widget/api/bmap/vectormap/VectorDrawLib_Impl2.js"],function(e){i.vectorDrawLib=new e(i),i.asyncLoaded=!0});else{var t="20150501",a="001";"undefined"!=typeof MSV&&MSV.mapstyle&&(t=MSV.mapstyle.updateDate,a=MSV.mapstyle.version);var r="udt="+t+"&v="+a,n="//mapor0.bdimg.com/sty/",o=n+"vpl.js?"+r,s=n+"icons_pl2_0.js?"+r,l=[o,s];LazyLoad.js(l,function(){e.async(["mapapi:widget/api/bmap/vectormap/VectorDrawLib_Impl2.js"],function(e){i.vectorDrawLib=new e(i),i.asyncLoaded=!0})})}},initMapTypeTiles:function(){for(var e=this.map.getMapType(),i=e.getTileLayers(),t=0;t<i.length;t++){var a=new f;r.extend(a,i[t]),this.mapTypeLayers.push(a),a.initialize(this.map,this._mapTypeLayerContainer)}},_createDiv:function(e){var i=p.create("div");return i.style.position="absolute",i.style.left=i.style.top="0",i.style.zIndex=e,i},_checkTilesLoaded:function(){this.numLoading--;var e=this;this.isFirstTile&&(this.map.dispatchEvent(new u("onfirsttileloaded")),this.isFirstTile=!1),0==this.numLoading&&(this._checkLoadedTimer&&(clearTimeout(this._checkLoadedTimer),this._checkLoadedTimer=null),this._checkLoadedTimer=setTimeout(function(){0==e.numLoading&&(e.map.dispatchEvent(new u("ontilesloaded")),e.isFirstTile=!0),e._checkLoadedTimer=null},80))},getTileName:function(e,i){return"TILE-"+i.guid+"-"+e[0]+"-"+e[1]+"-"+e[2]},hideTile:function(e){var i=e.img;i&&p.isInDocument(i)&&i.parentNode.removeChild(i),delete this.mapTiles[e.name],e.loaded||(i=null,e._callCbks(),e.img=null,e.mgr=null)},moveGridTiles:function(){this.arrStatTraffic.length=[];for(var e=this.mapTypeLayers,i=e.concat(this.tileLayers),t=i.length,a=0;t>a;a++){var r=i[a],n=1;if(r.forceHighResolution===!0&&(n=2),r.baseLayer){this.tilesDiv=r.tilesDiv;var o=this.tilesDiv;if(this.map.getZoom()>=this.map.config.vectorMapLevel){o.style.display="none";continue}o.style.display="block"}if(!r._isVectorLayer){var s=this.map,l=s.getMapType(),d=(l.getProjection(),s.getZoom()+(2==n?1:0)),p=s.mercatorCenter,m=l.getZoomUnits(d)*n,h=l.getZoomFactor(d),f=Math.ceil(p.lng/h),v=Math.ceil(p.lat/h),g=l.getTileSize()/n,T=[f,v,(p.lng-f*h)/h*g,(p.lat-v*h)/h*g],L=T[0]-Math.ceil((s.width/2-T[2])/g),y=T[1]-Math.ceil((s.height/2-T[3])/g),w=T[0]+Math.ceil((s.width/2+T[2])/g),b=T[1]+Math.ceil((s.height/2+T[3])/g),_=this.mapTiles,M=-p.lng/m,C=p.lat/m,k=[Math.round(M),Math.round(C)],D=r.guid;for(var z in _){var x=_[z],E=x.info,j=z.split("-")[1];D===parseInt(j,10)&&(E[2]!=d||E[2]==d&&(L>E[0]||w<=E[0]||y>E[1]||b<=E[1]))&&this.hideTile(x)}var Z=-s.offsetX+s.width/2,S=-s.offsetY+s.height/2;r.tilesDiv.style.left=Z+"px",r.tilesDiv.style.top=S+"px",this.tilesOrder?this.tilesOrder.length=0:this.tilesOrder=[],s._viewTiles?s._viewTiles.length=0:s._viewTiles=[];for(var O=L;w>O;O++)for(var V=y;b>V;V++)this.tilesOrder.push([O,V]),s._viewTiles.push({x:O,y:V});if(this.tilesOrder.sort(function(e){return function(i,t){return.4*Math.abs(i[0]-e[0])+.6*Math.abs(i[1]-e[1])-(.4*Math.abs(t[0]-e[0])+.6*Math.abs(t[1]-e[1]))}}([T[0]-1,T[1]-1])),!this.map.enableLoadTiles)return;var G=r.baseLayer?!0:!1;G&&(this.map.dispatchEvent(new u("ontilesbegin")),this.numLoading+=this.tilesOrder.length),r instanceof c&&this.map.dispatchEvent(new u("onTrafficbegin"));for(var O=0,I=this.tilesOrder.length;I>O;O++)this.showTile([this.tilesOrder[O][0],this.tilesOrder[O][1],d],k,r,n)}}},showTile:function(e,i,t,a){var r=this,n=t.baseLayer?!0:!1,o=this.map.getMapType(),s=r.getTileName(e,t),d=o.getTileSize()/a,m=e[0]*d+i[0],c=(-1-e[1])*d+i[1],f=[m,c],v=this.mapTiles[s];if(v&&v.img)return p.setPosition(v.img,f),void(n&&(v.loaded?this._checkTilesLoaded():v._addLoadCbk(function(){r._checkTilesLoaded()})));if(v=this.bufferTiles[s],v&&v.img)return t.tilesDiv.insertBefore(v.img,t.tilesDiv.lastChild),this.mapTiles[s]=v,p.setPosition(v.img,f),void(n&&(v.loaded?this._checkTilesLoaded():v._addLoadCbk(function(){r._checkTilesLoaded()})));var u=new l(e[0],e[1]),g=t.getTilesUrl(u,e[2]);v=new h(this,g,f,e,t,a),n&&v._addLoadCbk(function(){r._checkTilesLoaded()}),v._load(),this.mapTiles[s]=v},addTileLayer:function(e){for(var i=this,t=e.target,a=0;a<i.tileLayers.length;a++)if(i.tileLayers[a]==t)return;i.tileLayers.push(t);var r=t._isVectorLayer?this._vectorLayerContainer:this._normalLayerContainer;t.initialize(this.map,r),i.map.loaded&&i.moveGridTiles()},removeTileLayer:function(e){var i=this,t=e.target,a=i.mapTiles,r=i.bufferTiles;for(var n in r){var o=n.split("-")[1];o==t.guid&&delete r[n]}for(var n in a){var o=n.split("-")[1];o==t.guid&&delete a[n]}for(var s=!1,l=0,d=i.tileLayers.length;d>l;l++)t==i.tileLayers[l]&&(s=!0,i.tileLayers.splice(l,1));s&&(t.remove(),i.moveGridTiles())},_zoom:function(e,i){var t=this,a=p.isAndroid23More();if(r.platform.isAndroid&&!a)return t.moveGridTiles(),void t.map.dispatchEvent(new u("onzoomend"));var n=t.map,l=n.getZoom();if(l!=t.lastZoom){var m=l>t.lastZoom?!0:!1;if(t.lastZoom=l,t.isZooming!==!0){t.isZooming=!0;var c=n.platform.style,h=n.offsetX,f=n.offsetY,v=n.width,g=n.height,T=e?e.x-h:v/2-h,L=e?e.y-f:g/2-f;c.WebkitTransformOrigin=T+"px "+L+"px",i=new d(0,0);{new s({duration:300,transition:o.easeInOutQuad,fps:30,render:function(e){var t=m?1+e:1-e/2;c.WebkitTransformOrigin=T+"px "+L+"px",c.WebkitTransform="translate3d("+-i.width*e+"px, "+-i.height*e+"px,0px) scale("+t+")"},finish:function(){t.moveGridTiles(),t.map.dispatchEvent(new u("onzoomend")),c.WebkitTransform="",t.isZooming=!1}})}}}},dblClick:function(e){var i=this.map;if(i.config.enableDblclickZoom){var t=e.pixel,a=t,r=new d(0,0),n=i.zoomLevel+1,o=i._getProperZoom(n);if(o.exceeded){var s=i.pixelToPoint(t);i.panTo(s)}else{i.dispatchEvent(new u("onzoomstart")),i.lastLevel=i.zoomLevel,i.zoomLevel=o.zoom;{i.mercatorCenter}i.mercatorCenter=this._getMercatorCenter(t),i.centerPoint=i.mercatorCenter,r.width=t.x-Math.round(i.width/2),r.height=t.y-Math.round(i.height/2),this._zoom(a,r)}}},_getMercatorCenter:function(e){var i=this.map,t=i.mercatorCenter,a=i.getMapType().getZoomUnits(i.zoomLevel),r=t.lng+a*(e.x-i.width/2),n=t.lat-a*(e.y-i.height/2);return new v(r,n)},addMapClickEvent:function(){var e=this,i=200,t=null,a=0;e.map.addEventListener("click",function(r){return a++,1!=a?(clearTimeout(t),a=0,!1):void(t=setTimeout(function(){a=0;var i=null,t=e.tileLayers;for(var n in t)if(t[n]instanceof m){i=t[n];break}i&&i.vectorClick(r)||e.vectorDrawLib&&e.vectorDrawLib.vectorClick(r)},i))})},setRasterTrafficStatus:function(){var e=this,i=e.map,t=i.getZoom();e.rasterTrafficLayer||(e.rasterTrafficLayer=new c),i.config.trafficStatus&&t<i.config.vectorMapLevel?i.addTileLayer(e.rasterTrafficLayer):i.removeTileLayer(e.rasterTrafficLayer)},setVectorTrafficStatus:function(){this.vectorDrawLib&&this.vectorDrawLib.reDrawVectorMap()}}),t.exports=a});
;define("mapapi:widget/api/bmap/layer/Tile.js",function(e,i,t){function r(e,i,t,r,a,n){this.mgr=e,this.position=t,this._cbks=[],this.name=e.getTileName(r,a),this.info=r,this.level=parseInt(r[2],10);var l=s.create("img");s.setUnSelectable(l),l.galleryImg=!1;var o=l.style,m=e.map.getMapType(),p=m.getTileSize()/n;o.position="absolute",s.isAndroid23More()&&-1==navigator.userAgent.indexOf("UCBrowser")&&(o.WebkitTransform="translate3d(0px,0px,0)"),o.width=p+"px",o.height=p+"px",o.left=t[0]+"px",o.top=t[1]+"px",this.img=l,this.src=i;var g=this;this.img.onload=function(){if(g.loaded=!0,g.mgr){var e=g.mgr,i=e.bufferTiles;i[g.name]||(e.realBufferNumber++,i[g.name]=g),g.img&&!s.isInDocument(g.img)&&a.tilesDiv&&a.tilesDiv.appendChild(g.img);var t=e.realBufferNumber-e.bufferNumber;for(var r in i){if(0>=t)break;if(!e.mapTiles[r]){i[r].mgr=null;var n=i[r].img;n&&n.parentNode&&n.parentNode.removeChild(n),n=null,i[r].img=null,delete i[r],e.realBufferNumber--,t--}}g._callCbks()}},this.isHighResolution=e.map.highResolutionEnabled(),this.img.onerror=function(){var e=g.img,t=e?e.getAttribute("errorCount"):!0;if(e&&(!t||t&&5>t))t=t||0,t++,e.src=i,e.setAttribute("errorCount",t);else{if(g._callCbks(),!g.mgr)return;var r=g.mgr,n=r.map.getMapType();n.getErrorImageUrl()&&(g.error=!0,g.img.src=n.getErrorImageUrl(),g.img&&!s.isInDocument(g.img)&&a.tilesDiv.appendChild(g.img))}},l=null}{var a=e("mapapi:static/js/lib/tangram-patch.js"),s=e("mapapi:widget/api/bmap/common/ApiUtil.js");a.lang.Event}r.prototype._addLoadCbk=function(e){this._cbks.push(e)},r.prototype._load=function(){this.img.src=this.src},r.prototype._callCbks=function(){for(var e=this,i=0;i<e._cbks.length;i++)e._cbks[i]();e._cbks.length=0},t.exports=r});
;define("mapapi:widget/api/bmap/layer/TileLayer.js",function(i,e,t){function s(i){this.opts=i||{},this.baseLayer=this.opts.baseLayer||!1,this.zIndex=this.opts.zIndex||0,this.guid=s._guid++}var a=i("mapapi:static/js/lib/tangram-patch.js"),p=i("mapapi:widget/api/bmap/common/ApiUtil.js");s._guid=0,a.lang.inherits(s,a.lang.Class,"TileLayer"),a.extend(s.prototype,{initialize:function(i,e){if(this.baseLayer&&(this.zIndex=-100),this.map=i,!this.tilesDiv){var t=p.create("div"),s=t.style;s.position="absolute",s.zIndex=this.zIndex,s.left=Math.ceil(-i.offsetX+i.width/2)+"px",s.top=Math.ceil(-i.offsetY+i.height/2)+"px",e.appendChild(t),this.tilesDiv=t}},remove:function(){this.tilesDiv&&this.tilesDiv.parentNode&&(this.tilesDiv.innerHTML="",this.tilesDiv.parentNode.removeChild(this.tilesDiv)),delete this.tilesDiv},getTilesUrl:function(i,e){var t="";return this.opts.tileUrlTemplate&&(t=this.opts.tileUrlTemplate.replace(/\{X\}/,i.x),t=t.replace(/\{Y\}/,i.y),t=t.replace(/\{Z\}/,e)),t},getMapType:function(){return this.mapType}}),t.exports=s});
;define("mapapi:widget/api/bmap/layer/NormalMapTileLayer.js",function(a,e,t){var i=a("mapapi:widget/api/bmap/layer/TileLayer.js"),p={pd:{host:["//mapor0.bdimg.com/tile/?qt=tile&","//mapor1.bdimg.com/tile/?qt=tile&"],params:{}},hd:{host:["//mapor0.bdimg.com/tile/?qt=tile&","//mapor1.bdimg.com/tile/?qt=tile&"],params:{scaler:"2"}}},r=new i;r.getTilesUrl=function(a,e){var t=a.x,i=a.y,r=void 0,m=void 0;"undefined"!=typeof TVC&&(m=TVC.ditu.normal);var o=p;r=this.map.highResolutionEnabled()?o.hd:o.pd;var l="x="+t+"&y="+i+"&z="+e+"&styles=pl",d=r.host[Math.abs(t+i)%r.host.length]+l;m&&m.updateDate&&(d+="&udt="+m.updateDate);for(var s in r.params)d+="&"+s+"="+r.params[s];return d},t.exports=r});
;define("mapapi:widget/api/bmap/layer/RasterTrafficLayer.js",function(t,e,i){function a(t){r.call(this,t),this._opts={},t=t||{},this._opts=p.object.extend(this._opts,t),this._opts.predictDate&&((this._opts.predictDate.weekday<1||this._opts.predictDate.weekday>7)&&(this._opts.predictDate=1),(this._opts.predictDate.hour<0||this._opts.predictDate.hour>23)&&(this._opts.predictDate.hour=0)),this._tileUrl="https://sp3.baidu.com/7_AZsjOpB1gCo2Kml5_Y_DAcsMJiwa/traffic/"}var p=t("mapapi:static/js/lib/tangram-patch.js"),r=t("mapapi:widget/api/bmap/layer/TileLayer.js");a.prototype=new r,a.prototype.initialize=function(t,e){r.prototype.initialize.call(this,t,e),this._map=t},a.prototype.getTilesUrl=function(t,e){var i=this._map.tileMgr.arrStatTraffic,a="level="+e+"&x="+t.x+"&y="+t.y;i.push(a);var p="";p=this._opts.predictDate?"HistoryService?day="+(this._opts.predictDate.weekday-1)+"&hour="+this._opts.predictDate.hour+"&t="+(new Date).getTime()+"&":"TrafficTileService?time="+(new Date).getTime()+"&";var r=(this._map,t.x),s=t.y,o=(Math.floor(r/200),Math.floor(s/200),this._tileUrl+p+"level="+e+"&x="+r+"&y="+s+"&scaler=2");return o.replace(/-(\d+)/gi,"M$1")},i.exports=a});
;define("mapapi:widget/api/bmap/layer/SpotshotLayer.js",function(t,i,e){function s(t){p.call(this,t),this._opts={},t=t||{},this._opts=a.object.extend(this._opts,t),this.curTimeStamp=(new Date).getTime(),this.interval=18e5,this.uid=this._opts.uid||"",this.layerVersion=this._opts.layerVersion,this._tileUrls=["https://ss0.bdstatic.com/5bwHcj7lABFU8t_jkk_Z1zRvfdw6buu/it/","https://ss1.bdstatic.com/5bwHcj7lABFV8t_jkk_Z1zRvfdw6buu/it/"]}var a=t("mapapi:static/js/lib/tangram-patch.js"),p=t("mapapi:widget/api/bmap/layer/TileLayer.js");s.prototype=new p,s.prototype.initialize=function(t,i){p.prototype.initialize.call(this,t,i),this._map=t},s.prototype.getTilesUrl=function(t,i){var e=this,s=(new Date).getTime();s-e.curTimeStamp>=e.interval&&(e.curTimeStamp=s);var a=t.x,p=t.y,r="u=x="+a+";y="+p+";z="+i+";v="+e.layerVersion+";type=hot"+(e.uid?";s="+e.uid:"")+"&fm=44&t="+e.curTimeStamp,l=e._tileUrls[Math.abs(a+p)%e._tileUrls.length]+r;return l.replace(/-(\d+)/gi,"M$1")},e.exports=s});
;define("mapapi:widget/api/bmap/vectormap/VectorMDLayer.js",function(t,e,i){function a(e,i){var r={zIndex:1};o.call(this,r),this._keyWord=e,this._cityCode=i,this._isVectorLayer=!0,this._map=null,this._container=null;var s=this;s.implLoaded||t.async(["mapapi:widget/api/bmap/vectormap/VectorMDLayer_Impl.js"],function(t){n.object.extend(a.prototype,t),s._asyncLoadCode()})}var n=t("mapapi:static/js/lib/tangram-patch.js"),o=t("mapapi:widget/api/bmap/layer/TileLayer.js");n.inherits(a,o,"VectorMDLayer"),n.extend(a.prototype,{initialize:function(t,e){this._map=t,this._container=e},remove:function(){this._map=null,this._container=null},setKeyword:function(t){this._keyWord=t},getKeyword:function(){return this._keyWord},setCityCode:function(t){this._cityCode=t},getCityCode:function(){return this._cityCode},refreshLayer:function(){}}),i.exports=a});
;define("mapapi:widget/api/bmap/streetview/StreetViewUtil.js",function(e,t,i){var r=e("mapapi:static/js/lib/tangram-patch.js"),o=e("mapapi:widget/api/bmap/common/Pixel.js"),n={_displayZoomResults:{},calcDisplayZoom:function(e,t){var i=e.width,o=e.height,a=i+"_"+o+"_"+t;if(n._displayZoomResults[a])return n._displayZoomResults[a];var u,s=240/Math.pow(2,t),p=2,f=i/o;u=1>f?i:o;var l=s/u,_=Math.floor(t)+p;for(tileSize=360/(2*Math.pow(2,_-2)*l);tileSize>512;)_++,tileSize=360/(2*Math.pow(2,_-2)*l);var d=this.getNetType();if((2==d||3==d)&&(_=3,tileSize=360/(2*Math.pow(2,_-2)*l)),r.platform.isAndroid&&-1===navigator.userAgent.indexOf("Chrome")&&(tileSize=Math.abs(tileSize-256)<Math.abs(tileSize-512)?256:512),_>this.TILE_MAX_ZOOM){var h=_-this.TILE_MAX_ZOOM;tileSize*=Math.pow(2,h),_=this.TILE_MAX_ZOOM}_<this.TILE_MIN_ZOOM&&(_=this.TILE_MIN_ZOOM),tileSize=Math.round(tileSize);var m={imgZoom:_,displayTileSize:tileSize};return n._displayZoomResults[a]=m,m},getNetType:function(){var e=1;try{e=parseInt(window._WISE_INFO.netype)}catch(t){}return e},useGPU:function(){if("boolean"==typeof n._useGPU)return n._useGPU;if(n._useGPU=!0,r.platform.isIphone)return!0;var e=navigator.userAgent;return e.indexOf("Chrome")>-1?!0:e.indexOf("SAMSUNG-GT-I9508")>-1?(n._useGPU=!1,!1):1==this.getNetType()||0==this.getNetType()?!0:(n._useGPU=!1,!1)},useThumb:function(){if("boolean"==typeof n._useThumb)return n._useThumb;if(n._useThumb=!0,r.platform.isIphone)return!0;var e=navigator.userAgent;return e.indexOf("Chrome")>-1?!0:e.indexOf("SAMSUNG-GT-I9508")>-1?!0:1!=this.getNetType()?!0:(n._useThumb=!1,!1)},getUDT:function(){var e="20150402";return window.TVC&&TVC.ditu&&TVC.ditu.panoUdt&&(e=TVC.ditu.panoUdt.version),e},getXY:function(e,t,i){for(var r=i;r&&r!=document.body;)e-=r.offsetLeft,t-=r.offsetTop,r=r.offsetParent;return new o(e,t)},ifSupportWebGL:function(){if("boolean"==typeof n._supportWebGL)return n._supportWebGL;if(!window.WebGLRenderingContext)return n._supportWebGL=!1,!1;var e=navigator.userAgent||"";if(r.platform.isAndroid){if(-1===e.indexOf("Android 5"))return n._supportWebGL=!1,!1;if(e.indexOf("MX")>-1)return n._supportWebGL=!1,!1}if(r.platform.isIphone&&(-1!==e.indexOf("baiduboxapp")||-1!==e.indexOf("UCBrowser")))return n._supportWebGL=!1,!1;var t=document.createElement("canvas"),i=null;try{i=t.getContext("webgl")}catch(o){n._supportWebGL=!1}return n._supportWebGL=null===i?!1:!0,n._supportWebGL},getWordCount:function(e){return e.replace(/[^\x00-\xff]/g,"**").length/2},TILE_MAX_ZOOM:5,TILE_MIN_ZOOM:1,MAX_ZOOM:5,MIN_ZOOM:0};i.exports=n});
;define("mapapi:widget/api/bmap/streetview/StreetView.js",function(e,i,t){function s(i,t){this._container="string"==typeof i?a.g(i):i,this._opts={linksControl:!0,enableDoubleClickZoom:!0,showInnerView:!0,pidForInner:null},this._povChangedByUser=!1,t=t||{};for(var r in t)this._opts[r]=t[r];this._pov={heading:0,pitch:0},this._links=[],this._overlays=[],this._id=null,this._position=null,this._zoom=2,this._description="",this._mode="",this.displayMode="normal",this._time="",this._init();var d=this;if(!d.implLoaded){var _=function(e,i,t,r,_,l){a.extend(o.prototype,l),n.streetViewRegister(function(e){new i(e)}),n.streetViewRegister(function(e){new r(e)}),n.streetViewRegister(function(e){var i=new _(e);e._op=i,e.addEventListener("dataload",function(e){i._data=e.data,i._initialize()}),e.addEventListener("size_changed",function(){var t=p.calcDisplayZoom(e.getContainerSize(),e.getZoom(),e.displayMode);i._displayZoom=t.imgZoom,i._tileSize=t.displayTileSize,i._anglePerPixel=i._calcAnglePerPixel(t.imgZoom,t.displayTileSize),i._calcMinMaxAngle()}),e.addEventListener("zoom_changed",function(){var t=p.calcDisplayZoom(e.getContainerSize(),e.getZoom(),e.displayMode);i._displayZoom=t.imgZoom,i._tileSize=t.displayTileSize,i._anglePerPixel=i._calcAnglePerPixel(t.imgZoom,t.displayTileSize),i._calcMinMaxAngle()})}),a.extend(s.prototype,e),d._draw()};p.ifSupportWebGL()?e.async(["mapapi:widget/api/bmap/streetview/StreetView_Async.js","mapapi:widget/api/bmap/streetview/StreetViewService_Async.js","mapapi:widget/api/bmap/streetview/StreetViewTileData_Async.js","mapapi:widget/api/bmap/streetview/StreetViewGLRenderer_Async.js","mapapi:widget/api/bmap/streetview/StreetViewOperation_Async.js","mapapi:widget/api/bmap/streetview/StreetViewOverlayManager_Async.js","mapapi:widget/api/bmap/streetview/CachePool_Async.js","mapapi:widget/api/bmap/streetview/ImagePool_Async.js","mapapi:widget/api/bmap/streetview/StreetViewTileGLRenderer_Async.js","mapapi:widget/api/bmap/streetview/StreetViewLinksGLRenderer_Async.js","mapapi:widget/api/bmap/streetview/GLCircle_Async.js","mapapi:widget/api/bmap/streetview/GLMatrix_Async.js","mapapi:widget/api/bmap/streetview/GLRing_Async.js","mapapi:widget/api/bmap/streetview/GLSphere_Async.js"],_):e.async(["mapapi:widget/api/bmap/streetview/StreetView_Async.js","mapapi:widget/api/bmap/streetview/StreetViewService_Async.js","mapapi:widget/api/bmap/streetview/StreetViewTileData_Async.js","mapapi:widget/api/bmap/streetview/StreetViewRenderer_Async.js","mapapi:widget/api/bmap/streetview/StreetViewOperation_Async.js","mapapi:widget/api/bmap/streetview/StreetViewOverlayManager_Async.js","mapapi:widget/api/bmap/streetview/CachePool_Async.js","mapapi:widget/api/bmap/streetview/ImagePool_Async.js","mapapi:widget/api/bmap/streetview/StreetViewTileRenderer_Async.js","mapapi:widget/api/bmap/streetview/StreetViewLinksRenderer_Async.js"],_)}}var a=e("mapapi:static/js/lib/tangram-patch.js"),n=e("mapapi:widget/api/BMap.js"),p=e("mapapi:widget/api/bmap/streetview/StreetViewUtil.js"),r=a.lang.Event,o=e("mapapi:widget/api/bmap/streetview/StreetViewOverlayManager.js");p.ifSupportWebGL()?(s.MIN_PITCH=-90,s.MAX_PITCH=90):(s.MIN_PITCH=-10,s.MAX_PITCH=45),a.lang.inherits(s,a.lang.Class,"StreetView"),a.extend(s.prototype,{_init:function(){this._streetViewOverlayManager=new o(this)},getLinks:function(){return this._links},getId:function(){return this._id},getPosition:function(){return this._position},getPov:function(){return this._pov},getZoom:function(){return this._zoom},getDescription:function(){return this._description},getRelevants:function(){return this._relevants||[]},getMode:function(){return this._mode},setId:function(e,i){e!=this._id&&(this._lastId=this._id,this._id=e,this._position=null,this._opts.pidForInner=i?e:null,this._opts.showInnerView=i?!0:!1,this._iid=i)},setStreetId:function(e,i){i=i||{},(e!==this._streetId||i.pid!==this._opts.pidForInner)&&(this._opts.pidForInner=i.pid||null,this._opts.showInnerView=i.showInnerView||!1,this._lastStreetId=this._streetId,this._streetId=e,this._id=null,this._iid=null,this._position=null)},setPosition:function(e){e.equals(this._position)||(this._lastId=this._id,this._lastPosition=this._position,this._position=e,this._id=null,this._streetId=null)},setPov:function(e){this._pov=e,this._pov.pitch>s.MAX_PITCH&&(this._pov.pitch=s.MAX_PITCH),this._pov.pitch<s.MIN_PITCH&&(this._pov.pitch=s.MIN_PITCH),this._povChangedByUser=!0},setZoom:function(e){e!=this._zoom&&(e>p.MAX_ZOOM&&(e=p.MAX_ZOOM),e<p.MIN_ZOOM&&(e=p.MIN_ZOOM),e!=this._zoom&&(this._zoom=e))},clear:function(){this._data=null,this._id=null,this._position=null,this._links=[],this.dispatchEvent(new r("onclear"))},addOverlay:function(e){var i=new r("onoverlay_add");i.overlay=e,this.dispatchEvent(i)},removeOverlay:function(e){var i=new r("onoverlay_remove");i.overlay=e,this.dispatchEvent(i)},destroy:function(){this.dispatchEvent(new r("ondestroy"))},getRenderMethod:function(){return p.ifSupportWebGL()?"webgl":"css"},getPOITitle:function(){return this._data&&this._data.poi?this._data.poi.title||"":this._data&&this._data.poiTitle?this._data.poiTitle:""},setDisplayMode:function(e){this.displayMode=e},getLinkIdByVRCircle:function(e){var i=null;if(this._linksRenderer)if("webgl"===this.getRenderMethod()){var t=this._linksRenderer._ratio,s=e.x*t,a=e.y*t;i=this._linksRenderer._getIdByTouchPos(s,a)}else{var s=e.x,a=e.y;i=this._linksRenderer._getIdByTouchPos(s,a)}return i}}),t.exports=s});
;define("mapapi:widget/api/bmap/streetview/StreetViewCoverageLayer.js",function(e,t,i){function a(){r.call(this),this.forceHighResolution=!0}var p=e("mapapi:widget/api/bmap/streetview/StreetViewUtil.js"),r=e("mapapi:widget/api/bmap/layer/TileLayer.js");a.URLS=["//mapsv0.bdimg.com/tile/","//mapsv1.bdimg.com/tile/"],a.prototype=new r,a.prototype.getTilesUrl=function(e,t){var i=(Math.abs(e.x)+Math.abs(e.y))%a.URLS.length,r="pl",s=a.URLS[i]+"?udt="+p.getUDT()+"&qt=tile&styles="+r+"&x="+e.x+"&y="+e.y+"&z="+t;return s.replace(/-(\d+)/gi,"M$1")},i.exports=a});
;define("mapapi:widget/api/bmap/streetview/StreetViewOverlayManager.js",function(e,a,t){function r(e){this._pano=e,this._data=null,this._overlays=[],this._bind()}var o=e("mapapi:static/js/lib/tangram-patch.js");o.extend(r.prototype,{_bind:function(){var e=this;this._pano.addEventListener("overlay_add",function(a){for(var t=0;t<e._overlays.length;t++)if(e._overlays[t]===a.overlay)return;e._overlays.push(a.overlay),e._data&&a.overlay.init(e._pano)}),this._pano.addEventListener("overlay_remove",function(a){for(var t=0;t<e._overlays.length;t++)if(e._overlays[t]===a.overlay)return e._overlays[t].remove(),void e._overlays.splice(t,1)})},destroy:function(){}}),t.exports=r});
;define("mapapi:widget/api/api.js",function(a,p,e){var i=a("mapapi:widget/api/BMap.js");i.Map=a("mapapi:widget/api/bmap/Map.js"),i.Hotspot=a("mapapi:widget/api/bmap/hotspot/Hotspot.js"),i.MapType=a("mapapi:widget/api/bmap/common/MapType.js"),i.Point=a("mapapi:widget/api/bmap/geo/Point.js"),i.Pixel=a("mapapi:widget/api/bmap/common/Pixel.js"),i.Size=a("mapapi:widget/api/bmap/common/Size.js"),i.Bounds=a("mapapi:widget/api/bmap/geo/Bounds.js"),i.TileLayer=a("mapapi:widget/api/bmap/layer/TileLayer.js"),i.RasterTrafficLayer=a("mapapi:widget/api/bmap/layer/RasterTrafficLayer.js"),i.SpotshotLayer=a("mapapi:widget/api/bmap/layer/SpotshotLayer.js"),i.VectorMDLayer=a("mapapi:widget/api/bmap/vectormap/VectorMDLayer.js"),i.Overlay=a("mapapi:widget/api/bmap/overlay/Overlay.js"),i.OverlayMgr=a("mapapi:widget/api/bmap/overlay/OverlayMgr.js"),i.Marker=a("mapapi:widget/api/bmap/overlay/Marker.js"),i.Icon=a("mapapi:widget/api/bmap/overlay/Icon.js"),i.Polyline=a("mapapi:widget/api/bmap/overlay/Polyline.js"),i.Control=a("mapapi:widget/api/bmap/control/Control.js"),i.ScaleControl=a("mapapi:widget/api/bmap/control/ScaleControl.js"),i.StreetView=a("mapapi:widget/api/bmap/streetview/StreetView.js"),i.StreetViewOverlay=a("mapapi:widget/api/bmap/streetview/StreetViewOverlay.js"),i.StreetViewCoverageLayer=a("mapapi:widget/api/bmap/streetview/StreetViewCoverageLayer.js"),e.exports=i});