define("common:static/js/gmu/src/core/gmu.js",function(){window.gmu=window.gmu||{version:"2.1.2",$:window.Zepto,staticCall:function(n){var t=n.fn,o=[].slice,e=n();return e.length=1,function(n,i){return e[0]=n,t[i].apply(e,o.call(arguments,2))}}(Zepto)}});
;define("common:static/js/gmu/src/extend/highlight.js",function(){!function(t){function o(){if(c){var t=c.attr("hl-cls");clearTimeout(n),c.removeClass(t).removeAttr("hl-cls"),c=null,e.off("touchend touchmove touchcancel",o)}}var c,n,e=t(document);t.fn.highlight=function(h,i){return this.each(function(){var u=t(this);u.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),h&&u.on("touchstart.hl",function(s){var l;c=i?(l=t(s.target).closest(i,this))&&l.length&&l:u,setTimeout(function(){o()},2e3),c&&(c.attr("hl-cls",h),n=setTimeout(function(){c.addClass(h)},10),e.on("touchend touchmove touchcancel",o))})})}}(Zepto)});
;define("common:static/js/gmu/src/extend/parseTpl.js",function(){!function(e){e.parseTpl=function(e,r){var n="var __p=[];with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(e,r){return"',"+r.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,r){return"');"+r.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',p=new Function("obj",n);return r?p(r):p}}(Zepto)});
;define("common:widget/header/header.js",function(e,t,n){"use strict";var i=e("core:widget/stat/pbstat.js"),o=e("common:widget/util/ui-util.js"),d=e("common:widget/util/native-util.js"),a=e("common:widget/util/device-util.js"),u=$("#header_install_button"),c=a.isAndroid()?"android":a.isIPhone()?"iphone":a.isIPad()?"ipad":"unknown",r=function(){a.isIPhone()?d.bindHrefStat(u,function(){i.addStat(COM_PB_STAT.HEADER_BANNER_CLICK),$(document.body).append("<iframe src= 'baidumap://map/' id='callapp' width='0' height='0' style='border: 0;display: none;'/>");var e=(new Date).getTime();return window.a=setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){(new Date).getTime()-e<2e3&&(i.addStat(COM_PB_STAT.HEADER_BANNER_GONA_FAIL,"show"),window.location="https://itunes.apple.com/cn/app/id452186370?ls=1&mt=8")},500)},500),!1}):d.bindHrefStat(u,function(){i.addStat(COM_PB_STAT.HEADER_BANNER_CLICK),$(document.body).append("<iframe src= 'baidumap://map/' id='callapp' width='0' height='0' style='border: 0;display: none;'/>");var e=(new Date).getTime();return window.a=setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){(new Date).getTime()-e<2e3&&o.DownBox.showTb()},500)},500),!1})},s=function(){var e=$(".index-widget-searchbox, .index-widget-tabgroup"),t=$(".common-widget-header"),n={},o={},d=function(e){var t,n=[],i=null,o=e.touches;if(o&&(t=o.length)){var d;for(d=0;t>d;d++)i=o[d],n.push({x:i.pageX,y:i.pageY})}return n},a=function(t){n=d(t),e.on("touchmove",u)},u=function(a){o=d(a);var r;try{r=Math.abs(n[0].y-o[0].y)}catch(s){r=0}r>5&&(e.off("touchmove",u),n[0].y<o[0].y?(i.addStat(COM_PB_STAT.HEADER_BANNER,"ready",{os:c}),t.show()):t.hide(),listener.trigger("common","sizechange"))};e.on("touchstart",a)},w=function(){r(),s(),$(window).bind("blur",function(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}).bind("pageshow",function(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}),m()},m=function(){function e(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}document.addEventListener("visibilitychange",e),document.addEventListener("webkitvisibilitychange",e),document.addEventListener("blur",e),document.addEventListener("msvisibilitychange",e)};n.exports.init=function(){w()}});
;define("common:widget/imageloader/imageloader.js",function(n,i,e){"use strict";var o=parseInt(window._WISE_INFO.netype,10),a=window.devicePixelRatio,t=t||{};t={init:function(n,i){var e=this;o&&a&&function(){2!==o&&a>1&&0!==o&&e.loadRetinaBackground(n,i)}()},loadRetinaBackground:function(n,i){var e=new Image;e.src=i,e.onload=function(){$(n).css({"background-image":"url("+i+");"})},e=null}},e.exports=t});
;define("common:widget/setcity/setcity.js",function(e,t,i){"use strict";var a=e("core:widget/cookie/cookie.js"),r=e("core:widget/url/url.js"),n=e("core:widget/geolocation/location.js"),d={path:"/mobile/",expires:86400},c="     ",o={cityName:"",cityId:"",point:""},s=function(e,t,i){o.cityName=e,o.cityId=t,o.point=i},p=function(e){var t=e||{};t.c=o.cityId||t.c,delete t.nb_x,delete t.nb_y,o.point&&""!=o.point&&(t.nb_x=o.point.x,t.nb_y=o.point.y);var i={module:"place",action:"list",query:t,pageState:{dist_name:o.cityName}};return i},u=function(e,t){var i=e||{},a=t||{};i.cityId=o.cityId||i.c,i.c=i.cityId,i.pageNum=1,i.m="searchBrands",delete i.nb_x,delete i.nb_y,delete i.pointX1,delete i.pointY1,delete i.radius,delete i.sortType,delete i.orderType,a=$.extend(a,{citysearch:1,center_name:o.cityName});var r={module:"place",action:"takeout",query:i,pageState:a};return r},l=function(e){e&&e.module&&e.action?r.update(e,{replace:!0}):r.toIndex({replace:!0})},y=function(e){r.update({module:"subway",action:"show",query:{city:e}},{replace:!0})},_=function(){var e,t,i,a=r.get(),n=a.pageState;if(n.refer_query&&"undefined"!==n.refer_query){try{e=JSON.parse(decodeURIComponent(n.refer_query)),t=JSON.parse(decodeURIComponent(n.refer_pagestate))}catch(d){r.toIndex({cache:!1,replace:!0})}if(e.wd&&e.wd.split(c)[1]&&(e.wd=e.wd.split(c)[1]),e.src&&"hotelzt"===e.src){var s=t.data;return s.wd&&delete s.wd,s.brand_index&&delete s.brand_index,s.brand_id&&delete s.brand_id,s.district_name&&delete s.district_name,s.business_name&&delete s.business_name,s.distance_index&&delete s.distance_index,void r.update({module:"place",action:"hotelzt",query:{c:o.cityId,cname:o.cityName},pageState:s},{queryReplace:!0,pageStateReplace:!0,replace:!0})}i="wm"===e.qt||"takeout"===t.search?u(e,t):p(e,t),l(i)}else r.toIndex({cache:!1})},m=function(e,t,i,c){var o="";if("string"==typeof e){if("setsubwaycity"===window._APP_HASH.page)y(i);else{c&&c.isExactPoi&&(o=c.point),s(e,t,o);var p,u=r.get(),l=u.pageState;l&&l.refer_query&&"undefined"!=l.refer_query&&(p=JSON.parse(decodeURIComponent(l.refer_query))),p&&p.src&&"hotelzt"===p.src||(l.refer_query?c&&(c.isSaveLocInCookie=!1,n.setAddress(c)):c?(c.isSaveLocInCookie=!1,n.setAddress(c)):a.set("setCityName",e,d)),_()}return e}};i.exports.setAndRedirect=m});
;define("common:static/js/gmu/src/core/event.js",function(t){t("common:static/js/gmu/src/core/gmu.js"),function(t,n){function e(t,n,e){(t||"").split(c).forEach(function(t){e(t,n)})}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t){var n=(""+t).split(".");return{e:n[0],ns:n.slice(1).sort().join(" ")}}function r(t,n,e,r){var o,u;return u=s(n),u.ns&&(o=i(u.ns)),t.filter(function(t){return!(!t||u.e&&t.e!==u.e||u.ns&&!o.test(t.ns)||e&&t.cb!==e&&t.cb._cb!==e||r&&t.ctx!==r)})}function o(t,e){return this instanceof o?(e&&n.extend(this,e),this.type=t,this):new o(t,e)}var u=[].slice,c=/\s+/,f=function(){return!1},a=function(){return!0};o.prototype={isDefaultPrevented:f,isPropagationStopped:f,preventDefault:function(){this.isDefaultPrevented=a},stopPropagation:function(){this.isPropagationStopped=a}},t.event={on:function(t,n,i){var r,o=this;return n?(r=this._events||(this._events=[]),e(t,n,function(t,n){var e=s(t);e.cb=n,e.ctx=i,e.ctx2=i||o,e.id=r.length,r.push(e)}),this):this},one:function(t,n,i){var s=this;return n?(e(t,n,function(t,n){var e=function(){return s.off(t,e),n.apply(i||s,arguments)};e._cb=n,s.on(t,e,i)}),this):this},off:function(t,n,i){var s=this._events;return s?t||n||i?(e(t,n,function(t,n){r(s,t,n,i).forEach(function(t){delete s[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var n,e,i,s,c,f=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new o(t)),n=u.call(arguments,1),t.args=n,n.unshift(t),e=r(this._events,t.type))for(s=e.length;++f<s;)if((i=t.isPropagationStopped())||!1===(c=e[f]).cb.apply(c.ctx2,n)){i||(t.stopPropagation(),t.preventDefault());break}return this}},t.Event=o}(gmu,gmu.$)});
;define("common:static/js/gmu/src/core/widget.js",function(t){t("common:static/js/gmu/src/core/gmu.js"),t("common:static/js/gmu/src/core/event.js"),t("common:static/js/gmu/src/extend/parseTpl.js"),function(t,n,e){function r(t){return"[object Object]"===h.call(t)}function i(t,n){t&&Object.keys(t).forEach(function(e){n(e,t[e])})}function o(t){try{t="true"===t?!0:"false"===t?!1:"null"===t?null:+t+""===t?+t:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(t)?JSON.parse(t):t}catch(n){t=e}return t}function s(t){for(var n,r,i={},s=t&&t.attributes,u=s&&s.length;u--;)r=s[u],n=r.name,"data-"===n.substring(0,5)&&(n=n.substring(5),r=o(r.value),r===e||(i[n]=r));return i}function u(i){var o=i.substring(0,1).toLowerCase()+i.substring(1),s=n.fn[o];n.fn[o]=function(o){var s,u,a=g.call(arguments,1),c="string"==typeof o&&o;return n.each(this,function(l,f){if(u=y(f,i)||new t[i](f,r(o)?o:e),"this"===c)return s=u,!1;if(c){if(!n.isFunction(u[c]))throw new Error("组件没有此方法："+c);if(s=u[c].apply(u,a),s!==e&&s!==u)return!1;s=e}}),s!==e?s:this},n.fn[o].noConflict=function(){return n.fn[o]=s,this}}function a(t,e){var r=this;t.superClass&&a.call(r,t.superClass,e),i(y(t,"options"),function(t,i){i.forEach(function(i){var o=i[0],s=i[1];("*"===o||n.isFunction(o)&&o.call(r,e[t])||o===e[t])&&s.call(r)})})}function c(t,r){var o=this;t.superClass&&c.call(o,t.superClass,r),i(y(t,"plugins"),function(t,s){r[t]!==!1&&(i(s,function(t,r){var i;o[t]=n.isFunction(r)&&(i=o[t])?function(){var t,n=o.origin;return o.origin=i,t=r.apply(o,arguments),n===e?delete o.origin:o.origin=n,t}:r}),s._init.call(o))})}function l(){for(var t,e=g.call(arguments),i=e.length;i--;)t=t||e[i],r(e[i])||e.splice(i,1);return e.length?n.extend.apply(null,[!0,{}].concat(e)):t}function f(t,i,o,u,f){var p,g=this;return r(u)&&(f=u,u=e),f&&f.el&&(u=n(f.el)),u&&(g.$el=n(u),u=g.$el[0]),p=g._options=l(i.options,s(u),f),g.template=l(i.template,p.template),g.tpl2html=l(i.tpl2html,p.tpl2html),g.widgetName=t.toLowerCase(),g.eventNs="."+g.widgetName+o,g._init(p),g._options.setup=g.$el&&g.$el.parent()[0]?!0:!1,a.call(g,i,p),c.call(g,i,p),g._create(),g.trigger("ready"),u&&y(u,t,g)&&g.on("destroy",function(){y(u,t,null)}),g}function p(r,o,s){function u(t,n){if("Base"===r)throw new Error("Base类不能直接实例化");return this instanceof u?f.call(this,r,u,a++,t,n):new u(t,n)}"function"!=typeof s&&(s=t.Base);var a=1,c=1;return n.extend(u,{register:function(t,n){var e=y(u,"plugins")||y(u,"plugins",{});return n._init=n._init||m,e[t]=n,u},option:function(t,n,e){var r=y(u,"options")||y(u,"options",{});return r[t]||(r[t]=[]),r[t].push([n,e]),u},inherits:function(t){return p(r+"Sub"+c++,t,u)},extend:function(t){var n=u.prototype,r=s.prototype;v.forEach(function(n){t[n]=l(s[n],t[n]),t[n]&&(u[n]=t[n]),delete t[n]}),i(t,function(t,i){n[t]="function"==typeof i&&r[t]?function(){var n,o=this.$super;return this.$super=function(){var n=g.call(arguments,1);return r[t].apply(this,n)},n=i.apply(this,arguments),o===e?delete this.$super:this.$super=o,n}:i})}}),u.superClass=s,u.prototype=Object.create(s.prototype),u.extend(o),u}var g=[].slice,h=Object.prototype.toString,m=function(){},v=["options","template","tpl2html"],y=function(){var t={},n=0,r="_gid";return function(i,o,s){var u=i[r]||(i[r]=++n),a=t[u]||(t[u]={});return s!==e&&(a[o]=s),null===s&&delete a[o],a[o]}}(),d=t.event;t.define=function(n,e,r){t[n]=p(n,e,r),u(n)},t.isWidget=function(n,e){return e="string"==typeof e?t[e]||m:e,e=e||t.Base,n instanceof e},t.Base=p("Base",{_init:m,_create:m,getEl:function(){return this.$el},on:d.on,one:d.one,off:d.off,trigger:function(e){var r="string"==typeof e?new t.Event(e):e,i=[r].concat(g.call(arguments,1)),o=this._options[r.type],s=this.getEl();return o&&n.isFunction(o)&&!1===o.apply(this,i)&&(r.stopPropagation(),r.preventDefault()),d.trigger.apply(this,i),s&&s.triggerHandler(r,(i.shift(),i)),this},tpl2html:function(t,e){var r=this.template;return r="string"==typeof t?r[t]:(e=t,r),e||~r.indexOf("<%")?n.parseTpl(r,e):r},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),n.ui=t}(gmu,gmu.$)});
;define("common:static/js/gmu/src/widget/suggestion/suggestion.js",function(t){t("common:static/js/gmu/src/core/widget.js"),t("common:static/js/gmu/src/extend/highlight.js");var i=t("core:widget/stat/pbstat.js");!function(t,e){var n=0;gmu.define("Suggestion",{options:{historyShare:!0,confirmClearHistory:!0,autoClose:!1,appendContanier:document.body},template:{wrapper:'<div class="ui-suggestion"><div class="ui-suggestion-content"></div><div class="ui-suggestion-button"><span class="ui-suggestion-clear">清除历史记录</span><span class="ui-suggestion-close"></span></div></div>'},_initDom:function(){var i=this,e=i.getEl().attr("autocomplete","off"),o=e.parent(".ui-suggestion-mask");return o.length?i.$mask=o:e.wrap(i.$mask=t('<div class="ui-suggestion-mask"></div>')),i.$wrapper=t(i.tpl2html("wrapper")),i._options.appendContanier?t(i._options.appendContanier).append(i.$wrapper):i.$mask.append(i.$wrapper),i.$wrapper.prop("id","ui-suggestion-"+n++),i.$content=i.$wrapper.css("top",e.height()+(i.wrapperTop=parseInt(i.$wrapper.css("top"),10)||0)).find(".ui-suggestion-content"),i.$btn=i.$wrapper.find(".ui-suggestion-button"),i.$clearBtn=i.$btn.find(".ui-suggestion-clear"),i.$closeBtn=i.$btn.find(".ui-suggestion-close"),i.trigger("initdom")},_bindEvent:function(){var e=this,n=e.getEl(),o=e.eventNs;return e._options.autoClose&&t(document).on("click"+o,function(i){!t.contains(e.$mask.get(0),i.target)&&e.hide()}),n.on("focus"+o,function(){!e.isShow&&e._showList().trigger("open")}),n.on("input"+o,function(){e._showList()}),e.$clearBtn.on("click"+o,function(){e.history(null)}).highlight("ui-suggestion-highlight"),e.$closeBtn.on("click"+o,function(){e.getEl().blur(),e.hide().trigger("close"),i.addStat(COM_PB_STAT.SUGG_CLOSE_BTN)}).highlight("ui-suggestion-highlight"),e},_create:function(){var i=this,e=i._options,o=e.historyShare;return e.container&&(i.$el=t(e.container)),i.key=o?("boolean"===t.type(o)?"":o+"-")+"SUG-Sharing-History":i.getEl().attr("id")||"ui-suggestion-"+n++,i.separator=encodeURIComponent(","),i._initDom()._bindEvent(),i},_showList:function(){var i,e=this,n=e.value();if(n){if("我的位置"===n)return e;e.trigger("sendrequest",n,t.proxy(e._render,e),t.proxy(e._cacheData,e))}else(i=e._localStorage())?e._render(n,i.split(e.separator)):e.hide();return e},_render:function(i,e){this.trigger("renderlist",e,i,t.proxy(this._fillWrapper,this))},_fillWrapper:function(t){return this.$clearBtn[this.value()?"hide":"show"](),t?(this.$content.html(t),this.show()):this.hide(),this},_localStorage:function(t){var i,n,o=this,s=o.key,r=o.separator;try{if(i=e.localStorage,void 0===t)return i[s];if(null===t)i[s]="";else if(t){n=i[s]?i[s].split(r):[];for(var a=-1,c=encodeURIComponent("|"),u=t.split(c),h=0,g=n.length;g>h;h++){var l=n[h].split(c);if(u[0]===l[0]){a=h;break}}-1!==a&&n.splice(a,1),n.unshift(t),window.localStorage[s]=n.join(r)}}catch(p){console.log(p.message)}return o},_cacheData:function(t,i){return this.cacheData||(this.cacheData={}),void 0!==i?this.cacheData[t]=i:this.cacheData[t]},value:function(){return this.getEl().val()},history:function(t){var n=this,o=null!==t||function(){return i.addStat(COM_PB_STAT.SUGG_CLEAR_BTN),n._localStorage(null).hide()};return null===t?n._options.confirmClearHistory?e.confirm("清除全部查询历史记录？")&&o():o():n._localStorage(t)},show:function(){return this.isShow?this:(this.$wrapper.show(),this.isShow=!0,i.addStat(COM_PB_STAT.ONLINE_SUGG,"show"),this.trigger("show"))},hide:function(){return this.isShow?(this.$wrapper.hide(),this.isShow=!1,this.trigger("hide")):this},destroy:function(){var i=this,e=i.getEl(),n=i.eventNs;return i.trigger("destroy"),e.off(n),i.$mask.replaceWith(e),i.$clearBtn.off(n),i.$closeBtn.off(n),i.$wrapper.children().off().remove(),i.$wrapper.remove(),i._options.autoClose&&t(document).off(n),this.destroyed=!0,i}})}(gmu.$,window)});
;define("common:static/js/gmu/src/widget/suggestion/quickdelete.js",function(i){i("common:static/js/gmu/src/widget/suggestion/suggestion.js"),function(i,e){i.Suggestion.register("quickdelete",{_init:function(){var i,t,u=this;u.on("ready",function(){i=u.getEl(),t=u.eventNs,u.$mask.append(u.$quickDel=e('<div class="ui-suggestion-quickdel"></div>')),i.on("focus"+t+" input"+t,function(){u["_quickDel"+(e.trim(i.val())?"Show":"Hide")]()}),i.on("blur"+t,function(){u["_quickDel"+(e.trim(i.val())?"Show":"Hide")]()}),u.$quickDel.on("click"+t,function(e){e.preventDefault(),e.formDelete=!0,i.val(""),u.trigger("delete").trigger("input")._quickDelHide(),i.blur().focus()}),u.on("destroy",function(){u.$quickDel.off().remove()})})},_quickDelShow:function(){this.quickDelShow||(i.staticCall(this.$quickDel.get(0),"css","visibility","visible"),this.quickDelShow=!0)},_quickDelHide:function(){this.quickDelShow&&(i.staticCall(this.$quickDel.get(0),"css","visibility","hidden"),this.quickDelShow=!1)}})}(gmu,gmu.$)});
;define("common:static/js/gmu/src/widget/suggestion/renderlist.js",function(t){t("common:static/js/gmu/src/widget/suggestion/suggestion.js"),t("common:static/js/gmu/src/extend/highlight.js");var n=t("core:widget/stat/pbstat.js");!function(t){t.extend(gmu.Suggestion.options,{isHistory:!0,usePlus:!1,listCount:5,renderlist:null,sugType:0}),gmu.Suggestion.option("renderlist",function(){return"function"!==t.type(this._options.renderlist)},function(){var e=this,i=t("<div></div>"),s=function(t){return i.text(t).html()},o=function(n,i){var o=e._options,a=[];return i&&i.length?(i=i.slice(0,o.listCount),n=s(n||""),t.each(i,function(e,i){t.trim(i),i=i.split("$");var o="";n?a.push('<li><div class="ui-suggestion-result">'+(i[3]?'<span class="query-icon icon -search"></span><span data-bid="'+i[5]+'">'+(n&&t.trim(i[3]).replace(n,"<font>"+n+"</font>"))+"</span>":"")+"<span>"+s(i[0])+(n&&i[1])+"</span></div></li>"):(o=i[0].split(encodeURIComponent("|")),a.push('<li><div class="ui-suggestion-result">'+(i[3]?"<span>"+(n&&t.trim(i[3]).replace(n,"<font>"+n+"</font>"))+"</span>":"")+'<span class="history-icon icon -clock"></span><span data-bid="'+(o[1]?o[1]:"")+'">'+s(o[0])+(n&&i[1])+"</span></div></li>"))}),a):(e.hide(),a)};e.on("ready",function(){var e=this,i=e.eventNs,s=t(e._options.form||e.getEl().closest("form"));s.size()&&(e.$form=s.on("submit"+i,function(n){var i=t(n.target).find("#se-input-poi"),s=gmu.Event("submit"),o=i.data("extra-info"),a=o?o.bid||"":"",r=a?e.value()+encodeURIComponent("|")+a:e.value();e._options.isHistory&&e._localStorage(r),e.trigger(s),s.isDefaultPrevented()&&n.preventDefault()})),e.$content.on("click"+i,function(i){var o=e.getEl(),a=t(i.target);a[0].tagName&&"font"===a[0].tagName.toLowerCase()&&(a=a.parent()),a.hasClass("ui-suggestion-plus")?o.val(a.attr("data-item")):t.contains(e.$content.get(0),a.get(0))&&(""===o.val()?(e._options.sugType=2,n.addStat(COM_PB_STAT.HISTORY_SUGG_ITEM)):(e._options.sugType=1,n.addStat(COM_PB_STAT.ONLINE_SUGG_ITEM)),setTimeout(function(){o.val(a.parent().find("span:nth-of-type(2)").text());var t={};t.curWord=o.val();var n=a.parent().find("span:nth-of-type(3)");n.size()&&""!==n.text()&&(t.zone=n.text());var i=a.parent().find("span:nth-of-type(2)").data("bid")||"";t.bid=i,t.sugType=e._options.sugType,o.data("extra-info",JSON.stringify(t)),e.trigger("select",a).hide(),s.length&&s.submit()},400))}).highlight("ui-suggestion-highlight"),e.on("destroy",function(){s.size()&&s.off(i),e.$content.off()})}),e.on("renderlist",function(t,n,e,i){var s=o(e,n);return i(s.length?"<ul>"+s.join(" ")+"</ul>":"")})})}(gmu.$)});
;define("common:static/js/gmu/src/widget/suggestion/sendrequest.js",function(e){e("common:static/js/gmu/src/widget/suggestion/suggestion.js");var t=e("core:widget/geolocation/location.js");!function(e,n){e.extend(gmu.Suggestion.options,{isCache:!0,queryKey:"wd",cbKey:"cb",sendrequest:null,beforesendrequest:null}),gmu.Suggestion.option("sendrequest",function(){return"function"!==e.type(this._options.sendrequest)},function(){var i,s=this,o=s._options,u=o.queryKey,c=o.cbKey,r=o.param,a=o.isCache;this.on("sendrequest",function(d,g,m,p){var y=t.getCityCode()||1,f={},l="";t.hasExactPoi()&&(f.minX=t.getPointX()-5e3,f.minY=t.getPointY()-5e3,f.maxX=t.getPointX()+5e3,f.maxY=t.getPointY()+5e3,l="("+f.minX+","+f.minY+";"+f.maxX+","+f.maxY+")");var w="cid="+y+"&b="+l+"&pc_ver=2&type=0&newmap=1&ie=utf-8",h={};r&&-1!=r.search(/cid=[0-9]/)&&(e.each(r.split("&"),function(e,t){var n=t.split("=");h[n[0]]=n[1]}),h.cid&&(y=h.cid,w="cid="+y+"&pc_ver=2&type=0&newmap=1&ie=utf-8"));var q=o.source,v="suggestion_"+ +new Date;return a&&(i=p(g))?(m(g,i),s):(q=(q+"&"+u+"="+encodeURIComponent(g)).replace(/[&?]{1,2}/,"?"),!~q.indexOf("&"+c)&&(q+="&"+c+"="+v),w&&(q+="&"+w+(h.industry?"&industry="+h.industry:"")),n[v]=function(e){m(g,e.s),a&&p(g,e.s),delete n[v]},e.ajax({url:q,dataType:"jsonp"}),s)})})}(gmu.$,window)});
;define("common:widget/searchnave/searchnave.js",function(t,e,o){"use strict";t("common:static/js/gmu/src/widget/suggestion/suggestion.js"),t("common:static/js/gmu/src/widget/suggestion/renderlist.js"),t("common:static/js/gmu/src/widget/suggestion/quickdelete.js"),t("common:static/js/gmu/src/widget/suggestion/sendrequest.js");var a=t("core:widget/geolocation/location.js"),r=t("common:widget/popup/popup.js"),s=t("core:widget/url/url.js"),n=t("core:widget/stat/pbstat.js"),i=t("common:widget/searchnave/searchboxmodel.js"),d=t("common:widget/callnatohere/callnatohere.js"),c="我的位置",u=!1,s=t("core:widget/url/url.js");o.exports={init:function(){this.render(),this.bind();var t=this._getPagetype();if(!t.isSelf){this[t.elSelf].val(t.word);var e=this.model.get("geo");e&&e.word&&this[t.el].val(e.word)}this.revertLast(),this.changeBtnSearch(),this.selectRouteTypeBtn()},render:function(){var t=this,e=s.get(),o=e.pageState||{};t.seStart=$("#se-txt-start"),t.seEnd=$("#se-txt-end"),t.maskid=$("#se_wrap"),t.reverseBtn=$("#se_dir_reverse"),t.model=i,t.urlstart=t._proceedUrl(o.start),t.urlend=t._proceedUrl(o.end),t.pagetype=t._getPagetype(),t.selement=$("#se-txt-start, #se-txt-end"),t.submitbtn=$(".se-btn-tr"),t.sedirform=$(".se-dir-form"),t.searchBtn=$(".se-btn-search")},revertLast:function(){var t=this;if(""===$.trim(t.seEnd.val())){var e=this.model.get("start")||{},o=this.model.get("end")||{};e.word&&t.seStart.val(e.word),o.word&&t.seEnd.val(o.word)}"我的位置"==t.seStart.val()&&"我的位置"==t.seEnd.val()&&t.seEnd.val("")},_proceedUrl:function(t){var e=!1;if(void 0!==t){e={word:"",point:"",uid:""};var o=t.trim().split("&");o[0]&&(e.word=decodeURIComponent(o[0].split("=")[1])),o[1]&&(e.point=decodeURIComponent(o[1].split("=")[1])),o[2]&&(e.uid=decodeURIComponent(o[2].split("=")[1]))}return e},bind:function(){var e=this;$(window).on("pageshow",function(){u&&setTimeout(function(){e._setLocation()},0)}),e._poiSugStart=new gmu.Suggestion("#se-txt-start",{form:e.sedirform,source:"//map.baidu.com/su",cbKey:"callback",listCount:6,posAdapt:!1,historyShare:!0,autoClose:!0,appendContanier:"#wrapper",quickdelete:!0,show:function(){var t=0,e=$(".common-widget-weixincallna");e&&(t=e.height()),this.$wrapper.offset({left:0,top:200+t}),this.$wrapper.css("width","100%")}}),$("#se-txt-start").on("focus",function(){e._poiSugEnd&&e._poiSugEnd.hide()}),e._poiSugEnd=new gmu.Suggestion("#se-txt-end",{form:e.sedirform,source:"//map.baidu.com/su",cbKey:"callback",listCount:6,posAdapt:!1,historyShare:!0,autoClose:!0,appendContanier:"#wrapper",quickdelete:!0,show:function(){var t=0,e=$(".common-widget-weixincallna");e&&(t=e.height()),this.$wrapper.offset({left:0,top:200+t}),this.$wrapper.css("width","100%")}}),$("#se-txt-end").on("focus",function(){e._poiSugStart&&e._poiSugStart.hide()}),e.reverseBtn.on("click",$.proxy(e._reverse,this)),a.getMyLocation()||t.async("common:widget/geolocation/initgeo.js",function(t){t.init()});var o=function(){u=!!a.getMyLocation().point,e._setLocation()};a.getMyLocation()?o():listener.on("common.geolocation","mylocsuc",function(){o()},this),e.selement.on("focus",$.proxy(e._focus,this)),e.selement.on("blur",$.proxy(e._blur,this)),e.selement.on("mousedown",$.proxy(e._touchstart,this)),e.selement.on("keyup",$.proxy(e.selementKeyup,this)),e.submitbtn.on("touchend",$.proxy(e._poiSubmitEnd,this)),e.selement.on("mousedown",$.proxy(e._touchstart,this)),e.sedirform.on("submit",$.proxy(this._poiSubmit,this)),listener.on("common.page","switchstart",function(){$(".ui-suggestion").length&&$(".ui-suggestion").hide()}),e.selement.on("input propertychange",$.proxy(e.changeBtnSearch,this)),e.submitbtn.on("click",$.proxy(e.selectType,this)),e.searchBtn.on("click",$.proxy(e._poiSubmit,this))},selementKeyup:function(t){var e=this;13===+t.keyCode&&e._poiSubmit(t)},selectType:function(t){var e=this,o=t.currentTarget;$(o).parent().find("span").removeClass("selected"),$(o).find("span").addClass("selected"),e.routeType=$(o).attr("data-value"),void 0!==e.routeType?($(e.submitbtn).attr("type","button"),$(e.submitbtn[e.routeType-1]).attr("type","submit")):($(e.submitbtn).attr("type","button"),$(e.submitbtn[0]).attr("type","submit"))},checkInput:function(t){var e=this;return t&&/\S+/.test(t.val())?t.val()===c&&e.model.get("geo").word!==c?(t.val(""),r.open({text:"定位失败！"}),!1):!0:!1},changeBtnSearch:function(){var t=this;return t.checkInput(t.seStart)===!1||t.checkInput(t.seEnd)===!1?void t.searchBtn.removeClass("actived"):void t.searchBtn.addClass("actived")},selectRouteTypeBtn:function(){var t=this,e=s.get().pageState;t.routeType=e.routeType,t.submitbtn.find("span").removeClass("selected"),void 0!==t.routeType?($(t.submitbtn).attr("type","button"),$(t.submitbtn[t.routeType-1]).find("span").addClass("selected"),$(t.submitbtn[t.routeType-1]).attr("type","submit")):($(t.submitbtn).attr("type","button"),$(t.submitbtn[0]).find("span").addClass("selected"),$(t.submitbtn[0]).attr("type","submit"))},_getPagetype:function(){var t=this,e={elSelf:"",el:"seStart",key:"start",isSelf:!1,word:"",point:""};return t.urlend?(e.elSelf="seEnd",e.word=t.urlend.word,e.point=t.urlend.point,e.uid=t.urlend.uid):t.urlstart?(e.key="end",e.el="seEnd",e.elSelf="seStart",e.word=t.urlstart.word,e.point=t.urlstart.point,e.uid=t.urlstart.uid):e.isSelf=!0,e},_checkInput:function(t){return t?/\S+/.test(t.val())?t.val()===c&&this.model.get("geo").word!==c?(t.val(""),r.open({text:"定位失败！"}),!1):!0:(t.focus(),!1):!1},_getGeoData:function(){var t={word:"",point:"",citycode:""};return u&&(t={word:c,point:a.getMyPointX()+","+a.getMyPointY(),citycode:a.getMyCityCode()}),t},_reverse:function(){var t=this,e={start:$("#se-txt-start").val(),end:$("#se-txt-end").val()},o={start:$("#se-txt-start").data("extra-info")||{},end:$("#se-txt-end").data("extra-info")||{}},a={},r={};(""!==e.start||""!==e.end)&&(t.seStart.val(e.end),t.seStart.data("extra-info",JSON.stringify(o.end)),t.seEnd.val(e.start),t.seEnd.data("extra-info",JSON.stringify(o.start)),a=t.model.get("start"),r=t.model.get("end"),t.model.set("end",a),t.model.set("start",r),t._update())},_update:function(){var t=this,e=t.seStart,o=t.seEnd,a=t.model.get("geo");e.val()===c&&a.word===c&&u?(e.addClass("geo"),o.removeClass("geo")):e.removeClass("geo"),o.val()===c&&a.word===c&&u?(o.addClass("geo"),e.removeClass("geo")):o.removeClass("geo")},_setLocation:function(){var t=this,e=t.pagetype,o=t._getGeoData(),a=t.model.get(e.key);a.word&&a.word!==o.word||e.key&&t.model.set(e.key,o);var r=t.model.get("geo");(!r.point||o&&""!==o.point)&&t.model.set("geo",o),t._update()},_focus:function(t){var e=$(t.target);e.val()===c&&(e.val(""),e.trigger("focus")),e.removeClass("geo")},_blur:function(t){var e=this,o=$(t.target),a=o.attr("key"),s=e.model.get("geo"),n=o.val().trim(),i=s.word!==c&&n===c&&u;if(i&&(o.val(""),r.open({text:"定位失败！"})),s.point&&""===n&&u){e.model.get(a).word===s.word&&(o.val(c),o.addClass("geo"));var d="start"===a?"seStart":"seEnd";$.trim(e.seStart.val())!==c&&$.trim(e.seEnd.val())!==c&&(e.model.set(a,e._getGeoData()),e.model.set(d,{word:""}))}},_fixDirData:function(){var t=$(".se-dir-form input[type=text]"),e=this._getPagetype(),o=e.isSelf,a=this;$.each(t,function(){var t=$(this).attr("key"),r=$("#se-txt-"+t),s=a.model.get(t),n=s.word!==r.val();(!s.word||n)&&(r.val()===c&&u?a.model.set(t,a._getGeoData()):o||r.val()!==e.word?a.model.set(t,{word:r.val()}):a.model.set(t,{word:e.word,point:e.point,uid:e.uid}));var i=r.data("extra-info");if($.isPlainObject(i)&&i.curWord&&i.zone&&i.curWord===r.val()){var d=$.extend({ifSug:1,sug:i.zone},a.model.get(t));a.model.set(t,d)}})},_touchstart:function(t){var e=$(t.target);e.focus(),t.stopPropagation()},_getDirParam:function(t,e,o,r){var s,n=a.getCityCode()||1,i=this._getTabIndex("search",t),d=e.citycode||n,c=o.citycode||n,u=d||n;if(e.point&&o.point||!e.point&&!o.point)s={qt:["s","bt","nav","walk","cycle"][i]||"bt",sn:this._joinParam(e),en:this._joinParam(o),sc:d,ec:c,c:u,pn:"0",rn:"5"};else{var l,p,g,m;e.point?(l=e,m=o,p="sn",g="1"):(l=o,m=e,p="en",g="0");var v=["s","bse","nse","wse","bcyse"][i]||"bse",f=l.point;s={qt:v,ptx:f.split(",")[0],pty:f.split(",")[1],wd:m.word||"",wd2:m.sug||"",name:l.word||"",c:n,sc:e.citycode||n,ec:o.citycode||n,isSingle:"true"},s[v+"tp"]=g,s[p]=this._joinParam(l)}return r&&r.from&&(s.searchFlag=r.from||""),["nav","nse","walk","wse","cycle","bcyse"].indexOf(s.qt)>=0&&(s.version="3"),["bse","bt"].indexOf(s.qt)>=0&&(s.version="5",s.exptype="dep"),s},addRouteTypeToUrl:function(t){var e=s.get();e.pageState&&(e.pageState.routeType=t);var o=s._get(e);window.history.replaceState&&window.history.replaceState({},"",o)},_poiSubmit:function(t){t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault();var e,o=t;o.currentTarget&&(e=$(t.currentTarget).attr("data-value")),void 0!==this.routeType&&(e=this.routeType);var a=$(o.currentTarget);a.addClass("active");var r=this,i=r.seStart,u=r.seEnd;if(!r._checkInput(i)||!r._checkInput(u))return!1;switch(this._fixDirData(),e){case"2":n.addStat(COM_PB_STAT.NAV_SEARCH_BTN);break;case"3":n.addStat(COM_PB_STAT.WALK_SEARCH_BTN);break;case"4":n.addStat(window.COM_PB_STAT.BICYCLE_SEARCH_BTN);break;default:n.addStat(COM_PB_STAT.BUS_SEARCH_BTN)}e||(e="1");var l=!0,p=this.model.get("start"),g=this.model.get("end"),m=r._getDirParam(e,p,g,t);if(n.addStat("我的位置"===m.name?COM_PB_STAT.SEARCH_CONTAIN_MYLOC:COM_PB_STAT.SEARCH_NOT_CONTAIN_MYLOC),i.val()!==c&&this._poiSugStart&&this._poiSugStart.history(i.val()),u.val()!==c&&this._poiSugEnd&&this._poiSugEnd.history(u.val()),r.addRouteTypeToUrl(e),"2"===e){var v={module:"search",action:"search",query:m,pageState:{vt:"map",traffic:"off",evtson:"off"}};if(l){var f=s.getTargetUrl(v);d.callDrive(m,p,g,f)}s.update(v)}else if("3"===e){var v={module:"search",action:"search",query:m,pageState:{vt:"map",traffic:"off",evtson:"off"}};if(l){var f=s.getTargetUrl(v);d.callWalk(m,p,g,f)}s.update(v)}else if("4"===e){var v={module:"search",action:"search",query:m,pageState:{vt:"map",traffic:"off",evtson:"off"}};if(l){var f=s.getTargetUrl(v);d.callCycle(m,p,g,f)}s.update(v)}else{var v={module:"search",action:"search",query:m};if(l){var f=s.getTargetUrl(v);d.callTransit(m,p,g,f)}s.update(v)}},_poiSubmitEnd:function(t){var e=t,o=$(e.target);o.removeClass("active")},_getTabIndex:function(t,e){if(!isNaN(e)){var o=this._num2str(t,e),a=this._str2num(t,o);return a}return"string"==typeof e?this._str2num(t,e):void 0},_num2str:function(t,e){return"tab"===t?["place","line"][e]||"place":["place","transit","drive","walk","cycle"][e]||"place"},_str2num:function(t,e){return"tab"===t?{plcae:0,line:1}[e]||0:{place:0,transit:1,drive:2,walk:3,cycle:4}[e]||0},_joinParam:function(t){if(!t)return"";var e=t.point?1:2,o=t.uid||"",a=t.point||"",r=t.word||"",s=t.ifSug||"0",n=t.sug||"";return[e,o,a,r,s,n,""].join("$$")}}});
;define("common:widget/searchnave/searchboxmodel.js",function(t,i,n){"use strict";var e=t("core:widget/geolocation/location.js"),a={data:{start:{word:"",ifSug:0,sug:""},end:{word:"",ifSug:0,sug:""},geo:{word:""}},init:function(){},value:function(t){return t&&$.isPlainObject(t)?this.set(this._deepAdaptive(t)):this.get()},_deepAdaptive:function(t){var i={};for(var n in t)i[n]=this._adaptive(t[n]);return i},_adaptive:function(t){var i={};for(var n in t)if("name"===n||"wd"===n?i.word=t[n]:"pt"===n?i.point=t[n]:i[n]=t[n],i.word===MY_GEO){if(e.hasExactPoi())return i;i=this.getExactlocationData()}return i.point&&$.isPlainObject(i.point)&&(i.point=i.point.lng+","+i.point.lat),i},set:function(t,i){t&&"string"==typeof t&&i&&$.isPlainObject(i)?this.data[t]=i:t&&$.isPlainObject(t)&&$.extend(this.data,t)},_set:function(t,i){t&&"string"==typeof t&&i&&$.isPlainObject(i)?this.data[t]=i:t&&$.isPlainObject(t)&&$.extend(this.data,t)},get:function(t){return t&&"string"==typeof t?this.data[t]:this.data},getExactlocationData:function(){var t={word:""},i=e;return i&&i.point&&(t={word:MY_GEO,point:i.point.x+","+i.point.y,citycode:i.addr.cityCode}),t},getCenterName:function(){return e.hasExactPoi()?e.isUserDeny()?e.getAddress():MY_GEO:""}};n.exports=a});
;define("common:widget/geolocation/bdboxgeolocation.js",function(o,i,t){"use strict";var e=o("common:widget/stat/metrics-stat.js");t.exports={init:function(o){this.opts=o||{};var i=/baiduboxapp/i.test(navigator.userAgent);if(!i)return void this.geoFailHandler();if(!window.Box){var t=document.createElement("script");return t.src="//m.baidu.com/static/searchbox/openjs/aio.js",t.onload=$.proxy(this.startGeo,this),void $("body").append(t)}this.startGeo()},startGeo:function(){var o=this;Box.isBox?Box.os.ios?Box.version_compare(Box.version,"6.0")>=0?(Box.ios.invokeApp("utils",{action:"getCurrentLocation",params:"",minver:"6.0.0.0"},"iosCbk"),setTimeout(function(){o.isLocFail!==!1&&(o.geoFailHandler(),o.isLocFail=!0)},1e3)):this.geoFailHandler():Box.os.android&&(Box.version_compare(Box.version,"6.3")>=0?(Box.android.invokeApp("Bdbox_android_utils","location",[JSON.stringify({coor_type:"bd09"}),"androidCbk"]),setTimeout(function(){o.isLocFail!==!1&&(o.geoFailHandler(),o.isLocFail=!0)},1e3)):this.geoFailHandler()):this.geoFailHandler(),window.androidCbk=function(i){if(o.isLocFail!==!0){o.isLocFail=!1;var t=JSON.parse(i);0===t.st?o.formatLocAndroid(t):o.geoFailHandler()}},window.iosCbk=function(i){var t=JSON.parse(i);0===t.result?o.getRgcLoc(t):o.geoFailHandler()}},formatLocAndroid:function(o){if(o.longitude&&o.latitude){var i=this,t={addr:{address:o.addr,city:o.city,district:o.dist,street:o.str,cityCode:o.city_code,accuracy:o.radius},point:{x:o.longitude,y:o.latitude},type:"bdbox",isExactPoi:!0,isGeoSuc:!0,isSaveLocInCookie:!0};i.addStatAndTriggerEvent(t)}},formatLoc:function(o,i){var t=this,e=o.result,a=e.addressComponent,n=e.cityCode;if(!e.location)return void t.geoFailHandler({message:"has no point"});var r={addr:{city:a.city,cityCode:n,addr:e.formatted_address,district:a.district,street:a.street,accuracy:i},point:{x:e.location.lng,y:e.location.lat}};$.extend(r,{type:"bdbox",isExactPoi:e.location?!0:!1,isGeoSuc:!0,isSaveLocInCookie:!0}),t.addStatAndTriggerEvent(r)},getRgcLoc:function(o){var i=this,t=o.coords,e=t.accuracy;if(t.longitude&&t.latitude){var a={enableHighAccuracy:!0,maximumAge:6e4,timeout:this.opts.par||3e4,accuracy:2e8};if(e>=a.accuracy||0===t.longitude||0===t.latitude)return void i.geoFailHandler();var n={x:t.longitude,y:t.latitude,pois:1},r="//"+location.host+"/mobile/?qt=loc";$.ajax({url:r,data:n,dataType:"json",success:function(o){i.formatLoc(o,e)}})}},addStatAndTriggerEvent:function(o){e.addStat("geo","bdbox_geo_suc",1,!0),listener.trigger("common.geomethod","success",o)},geoFailHandler:function(o){listener.trigger("common.geomethod","fail",o)}}});