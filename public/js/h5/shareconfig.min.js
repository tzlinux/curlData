(function(e,t){if(typeof exports==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define(t)}else{e.shareConfig=t()}})(this,function(){var e=navigator.userAgent;var t=/micromessenger\//i.test(e);var n=/ baiduboxapp\//i.test(e);var o=/qq/i.test(e);var i=/weibo/i.test(e);var r=function(){};var a=location.protocol;var c=location.href;var s="手机百度";var l="手机百度";var u="https://b.bdstatic.com/searchbox/icms/searchbox/img/po/act/newuserredpack/box_logo.png";function f(e){if(typeof e==="string"){return e}var t=[];for(var n in e){t.push(n+"="+e[n])}return t.join("&")}function d(e){return e.replace(/^\s+/,function(){return""}).replace(/\s+$/,function(){return""})}function p(e){var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement;var n=document.createElement("script");n.type="text/javascript";var o,i,a;o=e.url;data=e.data;success=e.success||r;i=e.error||r;a=e.timeout||2e4;if(typeof data==="object"){data=f(data)}if(data){o+=(o.indexOf("?")===-1?"?":"&")+data}o=o.replace(/[&?]{1,2}/,"?");var c;if(/=\?/.test(o)){c="_box_jsonp"+Date.now();o=o.replace(/=\?/,"="+c)}n.src=o;var s=true,l;var u=function(){if(c){delete window[c]}l&&clearTimeout(l);n.onload=n.onreadystatechange=n.onerror=null;n=null};var d=function(e,t){if(n&&(!n.readyState||/loaded|complete/.test(n.readyState))){u();if(s&&typeof success==="function"){success.apply(null,[].slice.call(arguments))}s=false}};var p=function(e){u();if(s){i(e)}s=false};if(c){window[c]=d}l=setTimeout(function(){u();if(s){i("timeout")}s=false},a);n.onload=n.onreadystatechange=n.onerror=d;n.onerror=p;t.appendChild(n)}function m(e){if(e.nodeType!==1){return""}var t=e.innerHTML.replace(/\n/gim,function(){return""}).replace(/<script.*?script>/gim,function(){return""}).replace(/(<.*?>)|(<script>.*?<\/script>)/gim,function(){return""});return d(t)}function g(e,t){var n=document.getElementsByTagName("img");var o,i;var r=n.length;r=r<=10?r:10;for(o=0;o<r;o++){i=n[o];(function(t){var n=document.createElement("img");n.src=t;n.onload=function(){if(n.width>290&&n.height>290){e(n.src)}}})(i.src)}setTimeout(function(){e(t)},1e3)}function w(e,t){if(Math.random()<=.95&&c.indexOf("share_config_random=1")<0){return}if(!e||!t){return}t=encodeURIComponent(t);var n="300_001";var o="//m.baidu.com/tcbox?service=bdbox&action=pblog&data="+encodeURIComponent(JSON.stringify({appid:1,dataid:2,cateid:26,actionid:2,actiontype:"0",actiondata:{type:0,timestamp:Date.now(),content:{page_id:n,logtype:3,type:"c_"+e,msg:t}}}));var i="//ispeed.baidu.com/e.gif?t="+Date.now()+"&page_id="+n+"&evt=c_"+e+"&msg="+t;var r=[a+o,a+i];r.forEach(function(e){var t=document.createElement("img");t.onload=t.onerror=t.onabort=function(){t=null};t.src=e})}function h(e,i,r){var s=!!e.debug;if(n){delete e.wx;var l=e.bdbox||{};if(!l.source){w("no_bdbox_source",c);if(s){alert("使用手百分享必须配置 source 参数")}return}var u={type:"url",mediaType:"all",linkUrl:c,source:l.source};for(var f in e){if(f!=="bdbox"){u[f]=e[f]}}window["__BdboxShare_success__"]=i||console.log;window["__BdboxShare_fail__"]=r||console.log;window.BoxShareData={options:u,successcallback:"__BdboxShare_success__",errorcallback:"__BdboxShare_fail__"}}else if(t||o){delete e.bdbox;e.wx=e.wx||{};e.wx.appId=e.wx.appId||"wxadc1a0c6b9096e89";e.wx.jsApiList=e.wx.jsApiList||[];e.wx.jsApiList=e.wx.jsApiList.concat(["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]);p({url:a+"//po.baidu.com/api/wechat/token.jsonp",data:{app_id:e.wx.appId,url:encodeURIComponent(c),callback:"?",ts:Date.now()},success:function(n){if(n.errno!=0){w("wx_gettoken_err",c);if(s){alert("获取签名的接口错误："+n.errmsg)}return}var a=n.data||{};if(t){wx.config({debug:s,jsApiList:e.wx.jsApiList,appId:a.appId,nonceStr:a.nonceStr,timestamp:a.timestamp,signature:a.signature});var l={title:e.title,desc:e.content,link:e.linkUrl,imgUrl:e.iconUrl,success:function(){i&&i()},cancel:function(){r&&r()}};wx.ready(function(){wx.onMenuShareTimeline(l);wx.onMenuShareAppMessage(l);wx.onMenuShareQQ(l);wx.onMenuShareWeibo(l);wx.onMenuShareQZone(l)})}if(o){setShareInfo({title:e.title,summary:e.content,pic:e.iconUrl,url:e.linkUrl,WXconfig:{swapTitleInWX:false,appId:a.appId,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature}})}}})}}function x(e,n,i){if(typeof e!=="object"){console.log("shareConfig.init 参数错误");return}var r=!!e.debug;if(t&&!window.wx){if(r){alert("微信 SDK 未加载完成")}return}if(o&&!window.setShareInfo){if(r){alert("QQ SDK 未加载完成")}return}if(!e.titleDefault){e.titleDefault=s}if(!e.contentDefault){e.contentDefault=l}if(!e.iconUrlDefault){e.iconUrlDefault=u}if(!e.title){e.title=d(document.title);if(!e.title){e.title=e.titleDefault}}if(!e.linkUrl){e.linkUrl=c}if(!e.content){e.content=document.body}if(e.content.nodeType===1){e.content=m(e.content)}if(!e.content||typeof e.content!=="string"){e.content=e.contentDefault}if(e.content.length>50){e.content=e.content.slice(0,50)+"..."}var a=false;if(!e.iconUrl){g(function(t){if(a){return}a=true;e.iconUrl=t;h(e,n,i)},e.iconUrlDefault)}else{h(e,n,i)}}return{init:function(){var e=arguments;if(t){if(window.wx){x.apply(this,e)}else{p({url:a+"//res.wx.qq.com/open/js/jweixin-1.0.0.js",success:function(){x.apply(this,e)},error:function(){w("load_wxsdk_err",c)}})}}else if(o){if(window.setShareInfo){x.apply(this,e)}else{p({url:a+"//qzonestyle.gtimg.cn/qzone/qzact/common/share/share.js",success:function(){x.apply(this,e)},error:function(){w("load_qqsdk_err",c)}})}}else{x.apply(this,e)}}}});